{"version":3,"sources":["node_modules/xstate/es/_virtual/_tslib.js","node_modules/xstate/es/constants.js","node_modules/xstate/es/environment.js","node_modules/xstate/es/utils.js","node_modules/xstate/es/mapState.js","node_modules/xstate/es/types.js","node_modules/xstate/es/actionTypes.js","node_modules/xstate/es/actions.js","node_modules/xstate/es/stateUtils.js","node_modules/xstate/es/State.js","node_modules/xstate/es/Actor.js","node_modules/xstate/es/StateNode.js","node_modules/xstate/es/Machine.js","node_modules/xstate/es/scheduler.js","node_modules/xstate/es/registry.js","node_modules/xstate/es/devTools.js","node_modules/xstate/es/interpreter.js","node_modules/xstate/es/match.js","node_modules/xstate/es/index.js","node_modules/hsluv/hsluv.js","utils.js","dragMachine.js","index.js","node_modules/parcel-bundler/src/builtins/hmr-runtime.js"],"names":["__assign","exports","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","__rest","e","indexOf","getOwnPropertySymbols","propertyIsEnumerable","__values","o","m","Symbol","iterator","next","value","done","__read","r","ar","push","error","__spread","concat","STATE_DELIMITER","EMPTY_ACTIVITY_MAP","DEFAULT_GUARD_TYPE","TARGETLESS_KEY","IS_PRODUCTION","_tslib","require","_constants","_environment","keys","matchesState","parentStateId","childStateId","delimiter","parentStateValue","toStateValue","childStateValue","isString","every","key","getEventType","event","type","Error","toStatePath","stateId","isArray","toString","split","isStateLike","state","stateValue","pathToStateValue","statePath","marker","mapValues","collection","iteratee","result","collectionKeys","mapFilterValues","predicate","e_1","_a","_b","_c","item","e_1_1","return","path","props","object","e_2","props_1","props_1_1","prop","e_2_1","nestedPath","accessorProp","e_3","props_2","props_2_1","e_3_1","toStatePaths","flatten","map","subStateValue","subPath","array","toArrayStrict","toArray","undefined","mapContext","mapper","context","_event","e_5","isFunction","data","subMapper","e_5_1","isBuiltInEvent","eventType","test","isPromiseLike","Promise","then","partition","items","e_6","truthy","falsy","items_1","items_1_1","e_6_1","updateHistoryStates","hist","states","subHist","current","updateHistoryValue","updateContext","assignActions","warn","updatedContext","reduce","acc","assignAction","e_7","assignment","meta","action","partialUpdate","propAssignment","e_7_1","condition","message","console","args","Array","toGuard","guardMap","name","isObservable","subscribe","symbolObservable","observable","isMachine","uniqueId","currentId","toEventObject","payload","toSCXMLEvent","scxmlEvent","$$type","eventObject","toTransitionConfigArray","configLike","transitions","transitionLike","target","normalizeTarget","reportUnhandledExceptionOnInvocation","originalError","currentError","id","originalStackTrace","stack","stackTrace","_utils","mapState","stateMap","foundStateId","mappedStateId","ActionTypes","SpecialTargets","_types","start","Start","stop","Stop","raise","Raise","send","Send","cancel","Cancel","nullEvent","NullEvent","Assign","after","After","doneState","DoneState","log","Log","init","Init","invoke","Invoke","errorExecution","ErrorExecution","errorPlatform","ErrorPlatform","ErrorCustom","update","Update","pure","Pure","_actionTypes","initEvent","getActionFunction","actionType","actionFunctionMap","toActionObject","actionObject","exec","other","defineProperty","enumerable","configurable","toActionObjects","actions","subAction","toActivityDefinition","to","Internal","raise$1","resolveRaise","options","send$1","delay","resolveSend","ctx","delaysMap","resolvedEvent","resolvedDelay","configDelay","resolvedTarget","sendParent","Parent","sendUpdate","respond","_","__","origin","defaultLogExpr","expr","label","log$1","resolveLog","sendId","cancel$1","activity","activityDef","assign$1","delayRef","idSuffix","doneInvoke","DoneInvoke","forwardTo","escalate","errorData","error$1","isLeafNode","stateNode","getChildren","getAllStateNodes","stateNodes","getConfiguration","prevStateNodes","e_4","_d","prevConfiguration","Set","prevAdjList","getAdjList","configuration","configuration_1","configuration_1_1","parent","has","add","adjList","configuration_2","configuration_2_1","get","forEach","sn","initialStateNodes","_e","_f","child","configuration_3","configuration_3_1","e_4_1","getValueFromAdj","baseNode","childStateNodes","childStateNode","csn","Map","configuration_4","configuration_4_1","set","getValue","rootNode","config","iterable","some","member","nextEvents","ownEvents","isInFinalState","_stateUtils","_actions","stateValuesEqual","a","b","aKeys","bKeys","isState","bindActionToState","boundAction","State","_this","activities","events","_sessionid","historyValue","history","matches","bind","toStrings","children","from","create","inert","valueKeys","toJSON","jsonValues","createNullActor","unsubscribe","createInvocableActor","invokeDefinition","tempActor","isActor","_State","_Actor","NULL_EVENT","STATE_IDENTIFIER","WILDCARD","EMPTY_OBJECT","isStateId","str","createDefaultOptions","guards","services","delays","validateArrayifiedTransitions","hasNonLastUnguardedTarget","slice","transition","eventText","StateNode","order","__xstatenode","__cache","relativeValue","initialStateValue","initialState","on","candidates","delayedTransitions","idMap","_parent","_key","machine","join","version","parallel","initial","stateConfig","dfs","_transient","strict","onEntry","entry","onExit","exit","invokeConfig","src","invokeSrc","_init","withConfig","withContext","definition","getDelayedTransitions","formatTransitions","getCandidates","eventName","transient","filter","sameEventType","afterConfig","mutateEntryExit","configTransition","resolvedTransition","isNaN","delayedTransition","formatTransition","getStateNodes","getStateNode","subStateKeys","subStateNodes","subStateKey","allSubStateNodes","subStateNode","handles","includes","resolveState","resolve","transitionLeafNode","transitionCompoundNode","_transition","transitionParallelNode","transitionMap","stateTransitions","enabledTransitions","st","willTransition","entryNodes","entrySet","exitSet","source","nextStateNodes","selectedTransition","candidate","cond","stateIn","in","resolvedContext","isInState","getStateNodeById","guardPassed","evaluateGuard","err","allNextStateNodes","getRelativeStateNodes","isInternal","internal","reentryNodes","nodesFromChild","escapes","nodes","guard","guardMeta","condFn","getActions","currentContext","prevState","prevConfig","resolvedConfig","resolvedConfig_1","resolvedConfig_1_1","prevConfig_1","prevConfig_1_1","doneEvents","grandparent","parentNode","sort","entryStates","exitStates","entryActions","exitActions","currentState","resolvedStateValue","getResolvedPath","stateTransition","resolveTransition","resolveRaisedTransition","originalEvent","currentActions","unshift","actions_1","actions_1_1","start$1","stop$1","otherActions","resolvedActions","sendAction","raisedEvents","nonRaisedActions","invokeActions","resolvedConfiguration","isDone","nextState","changed","maybeNextState","isTransient","raisedEvent","shift","stateKey","resolvedStateId","getStateNodeByPath","arrayStatePath","currentStateNode","stateIdentifier","getInitialState","historyConfig","relativeStateId","resolveHistory","initialStateNodePaths","initialPath","getFromRelativePath","relativePath","childStatePath","relativeStateValue","historyTarget","relativeChildPath","subHistoryValue","subStatePath","childStateIds","stateIds","e_8","event_1","e_8_1","resolveTarget","_target","isInternalTarget","targetStateNode","transitionConfig","normalizedTarget","e_9","onConfig","wildcardConfigs","strictOnConfigs_1","arrayified","doneConfig","onDone","String","invokeDef","settleTransitions","onError","formattedTransitions","delayedTransitions_1","delayedTransitions_1_1","e_9_1","_StateNode","Machine","initialContext","resolvedInitialContext","createMachine","defaultOptions","deferEvents","Scheduler","processingEvent","queue","initialized","initialize","callback","schedule","process","flushEvents","task","clear","nextCallback","sessionIdIndex","registry","bookId","register","actor","free","delete","getDevTools","w","window","__xstate__","registerService","service","devTools","_scheduler","_registry","_devTools","DEFAULT_SPAWN_OPTIONS","sync","autoForward","withServiceScope","serviceStack","fn","pop","InterpreterStatus","Interpreter","scheduler","delayedEventsMap","listeners","contextListeners","stopListeners","doneListeners","eventListeners","sendListeners","_status","NotStarted","batch","Stopped","JSON","stringify","Running","forward","_state","sendTo","isParent","sessionId","resolvedOptions","clock","logger","resolvedId","_initialState","execute","actionsConfig","listener","_g","_h","_j","_k","contextListener","finalChildStateNode","find","doneData","_l","_m","onTransition","nextListenerOrObserver","errorListener","completeListener","resolvedCompleteListener","complete","onEvent","onSend","onChange","onStop","off","resolvedState","attachDev","e_10","_o","_p","_q","clearTimeout","e_10_1","e_11","batchChanged","batchedActions","_loop_1","events_1","events_1_1","e_11_1","sender","nextEvent","e_12","e_12_1","defer","setTimeout","actionOrExec","serviceCreator","spawnPromise","spawnCallback","spawnObservable","spawnMachine","spawnActivity","stopChild","childId","spawn","entity","spawnActor","childService","doneEvent","promise","canceled","response","errorEvent","handleError","unsubscribed","receivers","receive","callbackStop","newListener","receiver","subscription","implementation","dispose","spawnEffect","__REDUX_DEVTOOLS_EXTENSION__","devToolsOptions","connect","autoPause","stateSanitizer","features","jump","skip","global","ms","interpret","resolveSpawnOptions","nameOrOptions","interpreter","matchState","patterns","defaultValue","patterns_1","patterns_1_1","_mapState","_Machine","_interpreter","_match","_hsluv","_slicedToArray","arr","_arrayWithHoles","_iterableToArrayLimit","_unsupportedIterableToArray","_nonIterableRest","TypeError","minLen","_arrayLikeToArray","constructor","len","arr2","l","u","f","pathCalc","_ref","_ref2","mx","my","x","y","x1","y1","Math","max","rerenderPath","svg","points","getElementsByClassName","setAttribute","isSocket","_ref3","pos","el","document","elementFromPoint","findUpTree","socketList","hitList","element","parentElement","getColor","hue","floor","random","hsluvToHex","createPath","createElementNS","appendChild","logShit","c","dragListener","area","cb","moveListener","_ref4","clientX","clientY","addEventListener","removeEventListener","_xstate","_toConsumableArray","_arrayWithoutHoles","_iterableToArray","_nonIterableSpread","iter","dragMachine","div","createElement","style","position","end","wire","idle","POINTERDOWN","drag","MOVE","POINTERLEAVE","POINTERUP","dragCancel","startPath","removeWire","removeChild","updatePath","setStart","setEnd","_ref5","beeping","indicator","getElementById","interval","setInterval","backgroundColor","clearInterval","_dragMachine2","_createForOfIteratorHelper","allowArrayLike","it","F","normalCompletion","didErr","step","_e2","_iterator","_step","_dragMachine","dragService","OVERLAY_ID","OldModule","module","bundle","Module","moduleName","hot","hotData","_acceptCallbacks","_disposeCallbacks","accept","checkedAssets","assetsToAccept","isParcelRequire","WebSocket","hostname","location","protocol","ws","onmessage","parse","handled","assets","asset","isNew","didAccept","hmrAcceptCheck","parcelRequire","generated","js","hmrApply","v","hmrAcceptRun","reload","close","onclose","removeErrorOverlay","overlay","createErrorOverlay","body","remove","innerText","innerHTML","getParents","modules","parents","k","d","dep","Function","deps","cached","cache"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAIA,QAAQ,GAAG,SAAAA,CAAA,EAAY;EACzBC,OAAA,CAAAD,QAAA,GAAAA,QAAQ,GAAGE,MAAM,CAACC,MAAM,IAAI,SAASH,QAAQA,CAACI,CAAC,EAAE;IAC/C,KAAK,IAAIC,CAAC,EAAEC,CAAC,GAAG,CAAC,EAAEC,CAAC,GAAGC,SAAS,CAACC,MAAM,EAAEH,CAAC,GAAGC,CAAC,EAAED,CAAC,EAAE,EAAE;MACnDD,CAAC,GAAGG,SAAS,CAACF,CAAC,CAAC;MAEhB,KAAK,IAAII,CAAC,IAAIL,CAAC,EAAE,IAAIH,MAAM,CAACS,SAAS,CAACC,cAAc,CAACC,IAAI,CAACR,CAAC,EAAEK,CAAC,CAAC,EAAEN,CAAC,CAACM,CAAC,CAAC,GAAGL,CAAC,CAACK,CAAC,CAAC;IAC9E;IAEA,OAAON,CAAC;EACV,CAAC;EAED,OAAOJ,QAAQ,CAACc,KAAK,CAAC,IAAI,EAAEN,SAAS,CAAC;AACxC,CAAC;AAACP,OAAA,CAAAD,QAAA,GAAAA,QAAA;AAEF,SAASe,MAAMA,CAACV,CAAC,EAAEW,CAAC,EAAE;EACpB,IAAIZ,CAAC,GAAG,CAAC,CAAC;EAEV,KAAK,IAAIM,CAAC,IAAIL,CAAC,EAAE,IAAIH,MAAM,CAACS,SAAS,CAACC,cAAc,CAACC,IAAI,CAACR,CAAC,EAAEK,CAAC,CAAC,IAAIM,CAAC,CAACC,OAAO,CAACP,CAAC,CAAC,GAAG,CAAC,EAAEN,CAAC,CAACM,CAAC,CAAC,GAAGL,CAAC,CAACK,CAAC,CAAC;EAEhG,IAAIL,CAAC,IAAI,IAAI,IAAI,OAAOH,MAAM,CAACgB,qBAAqB,KAAK,UAAU,EAAE,KAAK,IAAIZ,CAAC,GAAG,CAAC,EAAEI,CAAC,GAAGR,MAAM,CAACgB,qBAAqB,CAACb,CAAC,CAAC,EAAEC,CAAC,GAAGI,CAAC,CAACD,MAAM,EAAEH,CAAC,EAAE,EAAE;IAC3I,IAAIU,CAAC,CAACC,OAAO,CAACP,CAAC,CAACJ,CAAC,CAAC,CAAC,GAAG,CAAC,IAAIJ,MAAM,CAACS,SAAS,CAACQ,oBAAoB,CAACN,IAAI,CAACR,CAAC,EAAEK,CAAC,CAACJ,CAAC,CAAC,CAAC,EAAEF,CAAC,CAACM,CAAC,CAACJ,CAAC,CAAC,CAAC,GAAGD,CAAC,CAACK,CAAC,CAACJ,CAAC,CAAC,CAAC;EACnG;EACA,OAAOF,CAAC;AACV;AAEA,SAASgB,QAAQA,CAACC,CAAC,EAAE;EACnB,IAAIC,CAAC,GAAG,OAAOC,MAAM,KAAK,UAAU,IAAIF,CAAC,CAACE,MAAM,CAACC,QAAQ,CAAC;IACtDlB,CAAC,GAAG,CAAC;EACT,IAAIgB,CAAC,EAAE,OAAOA,CAAC,CAACT,IAAI,CAACQ,CAAC,CAAC;EACvB,OAAO;IACLI,IAAI,EAAE,SAAAA,CAAA,EAAY;MAChB,IAAIJ,CAAC,IAAIf,CAAC,IAAIe,CAAC,CAACZ,MAAM,EAAEY,CAAC,GAAG,KAAK,CAAC;MAClC,OAAO;QACLK,KAAK,EAAEL,CAAC,IAAIA,CAAC,CAACf,CAAC,EAAE,CAAC;QAClBqB,IAAI,EAAE,CAACN;MACT,CAAC;IACH;EACF,CAAC;AACH;AAEA,SAASO,MAAMA,CAACP,CAAC,EAAEd,CAAC,EAAE;EACpB,IAAIe,CAAC,GAAG,OAAOC,MAAM,KAAK,UAAU,IAAIF,CAAC,CAACE,MAAM,CAACC,QAAQ,CAAC;EAC1D,IAAI,CAACF,CAAC,EAAE,OAAOD,CAAC;EAChB,IAAIf,CAAC,GAAGgB,CAAC,CAACT,IAAI,CAACQ,CAAC,CAAC;IACbQ,CAAC;IACDC,EAAE,GAAG,EAAE;IACPd,CAAC;EAEL,IAAI;IACF,OAAO,CAACT,CAAC,KAAK,KAAK,CAAC,IAAIA,CAAC,EAAE,GAAG,CAAC,KAAK,CAAC,CAACsB,CAAC,GAAGvB,CAAC,CAACmB,IAAI,CAAC,CAAC,EAAEE,IAAI,EAAEG,EAAE,CAACC,IAAI,CAACF,CAAC,CAACH,KAAK,CAAC;EAC5E,CAAC,CAAC,OAAOM,KAAK,EAAE;IACdhB,CAAC,GAAG;MACFgB,KAAK,EAAEA;IACT,CAAC;EACH,CAAC,SAAS;IACR,IAAI;MACF,IAAIH,CAAC,IAAI,CAACA,CAAC,CAACF,IAAI,KAAKL,CAAC,GAAGhB,CAAC,CAAC,QAAQ,CAAC,CAAC,EAAEgB,CAAC,CAACT,IAAI,CAACP,CAAC,CAAC;IAClD,CAAC,SAAS;MACR,IAAIU,CAAC,EAAE,MAAMA,CAAC,CAACgB,KAAK;IACtB;EACF;EAEA,OAAOF,EAAE;AACX;AAEA,SAASG,QAAQA,CAAA,EAAG;EAClB,KAAK,IAAIH,EAAE,GAAG,EAAE,EAAExB,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGE,SAAS,CAACC,MAAM,EAAEH,CAAC,EAAE,EAAEwB,EAAE,GAAGA,EAAE,CAACI,MAAM,CAACN,MAAM,CAACpB,SAAS,CAACF,CAAC,CAAC,CAAC,CAAC;EAExF,OAAOwB,EAAE;AACX;;;;;;;;ACnFA,IAAIK,eAAe,GAAAlC,OAAA,CAAAkC,eAAA,GAAG,GAAG;AACzB,IAAIC,kBAAkB,GAAAnC,OAAA,CAAAmC,kBAAA,GAAG,CAAC,CAAC;AAC3B,IAAIC,kBAAkB,GAAApC,OAAA,CAAAoC,kBAAA,GAAG,cAAc;AACvC,IAAIC,cAAc,GAAArC,OAAA,CAAAqC,cAAA,GAAG,EAAE;;;;;;;;ACHvB,IAAIC,aAAa,GAAAtC,OAAA,CAAAsC,aAAA,GAAG,kBAAyB,YAAY;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACAzD,IAAAC,MAAA,GAAAC,OAAA;AACA,IAAAC,UAAA,GAAAD,OAAA;AACA,IAAAE,YAAA,GAAAF,OAAA;AAEA,SAASG,IAAIA,CAAClB,KAAK,EAAE;EACnB,OAAOxB,MAAM,CAAC0C,IAAI,CAAClB,KAAK,CAAC;AAC3B;AAEA,SAASmB,YAAYA,CAACC,aAAa,EAAEC,YAAY,EAAEC,SAAS,EAAE;EAC5D,IAAIA,SAAS,KAAK,KAAK,CAAC,EAAE;IACxBA,SAAS,GAAGb,0BAAe;EAC7B;EAEA,IAAIc,gBAAgB,GAAGC,YAAY,CAACJ,aAAa,EAAEE,SAAS,CAAC;EAC7D,IAAIG,eAAe,GAAGD,YAAY,CAACH,YAAY,EAAEC,SAAS,CAAC;EAE3D,IAAII,QAAQ,CAACD,eAAe,CAAC,EAAE;IAC7B,IAAIC,QAAQ,CAACH,gBAAgB,CAAC,EAAE;MAC9B,OAAOE,eAAe,KAAKF,gBAAgB;IAC7C,CAAC,CAAC;;IAGF,OAAO,KAAK;EACd;EAEA,IAAIG,QAAQ,CAACH,gBAAgB,CAAC,EAAE;IAC9B,OAAOA,gBAAgB,IAAIE,eAAe;EAC5C;EAEA,OAAOP,IAAI,CAACK,gBAAgB,CAAC,CAACI,KAAK,CAAC,UAAUC,GAAG,EAAE;IACjD,IAAI,EAAEA,GAAG,IAAIH,eAAe,CAAC,EAAE;MAC7B,OAAO,KAAK;IACd;IAEA,OAAON,YAAY,CAACI,gBAAgB,CAACK,GAAG,CAAC,EAAEH,eAAe,CAACG,GAAG,CAAC,CAAC;EAClE,CAAC,CAAC;AACJ;AAEA,SAASC,YAAYA,CAACC,KAAK,EAAE;EAC3B,IAAI;IACF,OAAOJ,QAAQ,CAACI,KAAK,CAAC,IAAI,OAAOA,KAAK,KAAK,QAAQ,GAAG,EAAE,GAAGA,KAAK,GAAGA,KAAK,CAACC,IAAI;EAC/E,CAAC,CAAC,OAAOzC,CAAC,EAAE;IACV,MAAM,IAAI0C,KAAK,CAAC,sEAAsE,CAAC;EACzF;AACF;AAEA,SAASC,WAAWA,CAACC,OAAO,EAAEZ,SAAS,EAAE;EACvC,IAAI;IACF,IAAIa,OAAO,CAACD,OAAO,CAAC,EAAE;MACpB,OAAOA,OAAO;IAChB;IAEA,OAAOA,OAAO,CAACE,QAAQ,CAAC,CAAC,CAACC,KAAK,CAACf,SAAS,CAAC;EAC5C,CAAC,CAAC,OAAOhC,CAAC,EAAE;IACV,MAAM,IAAI0C,KAAK,CAAC,GAAG,GAAGE,OAAO,GAAG,8BAA8B,CAAC;EACjE;AACF;AAEA,SAASI,WAAWA,CAACC,KAAK,EAAE;EAC1B,OAAO,OAAOA,KAAK,KAAK,QAAQ,IAAI,OAAO,IAAIA,KAAK,IAAI,SAAS,IAAIA,KAAK,IAAI,OAAO,IAAIA,KAAK,IAAI,QAAQ,IAAIA,KAAK;AACrH;AAEA,SAASf,YAAYA,CAACgB,UAAU,EAAElB,SAAS,EAAE;EAC3C,IAAIgB,WAAW,CAACE,UAAU,CAAC,EAAE;IAC3B,OAAOA,UAAU,CAACxC,KAAK;EACzB;EAEA,IAAImC,OAAO,CAACK,UAAU,CAAC,EAAE;IACvB,OAAOC,gBAAgB,CAACD,UAAU,CAAC;EACrC;EAEA,IAAI,OAAOA,UAAU,KAAK,QAAQ,EAAE;IAClC,OAAOA,UAAU;EACnB;EAEA,IAAIE,SAAS,GAAGT,WAAW,CAACO,UAAU,EAAElB,SAAS,CAAC;EAClD,OAAOmB,gBAAgB,CAACC,SAAS,CAAC;AACpC;AAEA,SAASD,gBAAgBA,CAACC,SAAS,EAAE;EACnC,IAAIA,SAAS,CAAC3D,MAAM,KAAK,CAAC,EAAE;IAC1B,OAAO2D,SAAS,CAAC,CAAC,CAAC;EACrB;EAEA,IAAI1C,KAAK,GAAG,CAAC,CAAC;EACd,IAAI2C,MAAM,GAAG3C,KAAK;EAElB,KAAK,IAAIpB,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG8D,SAAS,CAAC3D,MAAM,GAAG,CAAC,EAAEH,CAAC,EAAE,EAAE;IAC7C,IAAIA,CAAC,KAAK8D,SAAS,CAAC3D,MAAM,GAAG,CAAC,EAAE;MAC9B4D,MAAM,CAACD,SAAS,CAAC9D,CAAC,CAAC,CAAC,GAAG8D,SAAS,CAAC9D,CAAC,GAAG,CAAC,CAAC;IACzC,CAAC,MAAM;MACL+D,MAAM,CAACD,SAAS,CAAC9D,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;MACzB+D,MAAM,GAAGA,MAAM,CAACD,SAAS,CAAC9D,CAAC,CAAC,CAAC;IAC/B;EACF;EAEA,OAAOoB,KAAK;AACd;AAEA,SAAS4C,SAASA,CAACC,UAAU,EAAEC,QAAQ,EAAE;EACvC,IAAIC,MAAM,GAAG,CAAC,CAAC;EACf,IAAIC,cAAc,GAAG9B,IAAI,CAAC2B,UAAU,CAAC;EAErC,KAAK,IAAIjE,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGoE,cAAc,CAACjE,MAAM,EAAEH,CAAC,EAAE,EAAE;IAC9C,IAAIgD,GAAG,GAAGoB,cAAc,CAACpE,CAAC,CAAC;IAC3BmE,MAAM,CAACnB,GAAG,CAAC,GAAGkB,QAAQ,CAACD,UAAU,CAACjB,GAAG,CAAC,EAAEA,GAAG,EAAEiB,UAAU,EAAEjE,CAAC,CAAC;EAC7D;EAEA,OAAOmE,MAAM;AACf;AAEA,SAASE,eAAeA,CAACJ,UAAU,EAAEC,QAAQ,EAAEI,SAAS,EAAE;EACxD,IAAIC,GAAG,EAAEC,EAAE;EAEX,IAAIL,MAAM,GAAG,CAAC,CAAC;EAEf,IAAI;IACF,KAAK,IAAIM,EAAE,GAAG,IAAA3D,eAAQ,EAACwB,IAAI,CAAC2B,UAAU,CAAC,CAAC,EAAES,EAAE,GAAGD,EAAE,CAACtD,IAAI,CAAC,CAAC,EAAE,CAACuD,EAAE,CAACrD,IAAI,EAAEqD,EAAE,GAAGD,EAAE,CAACtD,IAAI,CAAC,CAAC,EAAE;MAClF,IAAI6B,GAAG,GAAG0B,EAAE,CAACtD,KAAK;MAClB,IAAIuD,IAAI,GAAGV,UAAU,CAACjB,GAAG,CAAC;MAE1B,IAAI,CAACsB,SAAS,CAACK,IAAI,CAAC,EAAE;QACpB;MACF;MAEAR,MAAM,CAACnB,GAAG,CAAC,GAAGkB,QAAQ,CAACS,IAAI,EAAE3B,GAAG,EAAEiB,UAAU,CAAC;IAC/C;EACF,CAAC,CAAC,OAAOW,KAAK,EAAE;IACdL,GAAG,GAAG;MACJ7C,KAAK,EAAEkD;IACT,CAAC;EACH,CAAC,SAAS;IACR,IAAI;MACF,IAAIF,EAAE,IAAI,CAACA,EAAE,CAACrD,IAAI,KAAKmD,EAAE,GAAGC,EAAE,CAACI,MAAM,CAAC,EAAEL,EAAE,CAACjE,IAAI,CAACkE,EAAE,CAAC;IACrD,CAAC,SAAS;MACR,IAAIF,GAAG,EAAE,MAAMA,GAAG,CAAC7C,KAAK;IAC1B;EACF;EAEA,OAAOyC,MAAM;AACf;AACA;AACA;AACA;AACA;;AAGA,IAAIW,IAAI,GAAG,SAAAA,CAAUC,KAAK,EAAE;EAC1B,OAAO,UAAUC,MAAM,EAAE;IACvB,IAAIC,GAAG,EAAET,EAAE;IAEX,IAAIL,MAAM,GAAGa,MAAM;IAEnB,IAAI;MACF,KAAK,IAAIE,OAAO,GAAG,IAAApE,eAAQ,EAACiE,KAAK,CAAC,EAAEI,SAAS,GAAGD,OAAO,CAAC/D,IAAI,CAAC,CAAC,EAAE,CAACgE,SAAS,CAAC9D,IAAI,EAAE8D,SAAS,GAAGD,OAAO,CAAC/D,IAAI,CAAC,CAAC,EAAE;QAC3G,IAAIiE,IAAI,GAAGD,SAAS,CAAC/D,KAAK;QAC1B+C,MAAM,GAAGA,MAAM,CAACiB,IAAI,CAAC;MACvB;IACF,CAAC,CAAC,OAAOC,KAAK,EAAE;MACdJ,GAAG,GAAG;QACJvD,KAAK,EAAE2D;MACT,CAAC;IACH,CAAC,SAAS;MACR,IAAI;QACF,IAAIF,SAAS,IAAI,CAACA,SAAS,CAAC9D,IAAI,KAAKmD,EAAE,GAAGU,OAAO,CAACL,MAAM,CAAC,EAAEL,EAAE,CAACjE,IAAI,CAAC2E,OAAO,CAAC;MAC7E,CAAC,SAAS;QACR,IAAID,GAAG,EAAE,MAAMA,GAAG,CAACvD,KAAK;MAC1B;IACF;IAEA,OAAOyC,MAAM;EACf,CAAC;AACH,CAAC;AACD;AACA;AACA;AACA;AAHAxE,OAAA,CAAAmF,IAAA,GAAAA,IAAA;AAMA,SAASQ,UAAUA,CAACP,KAAK,EAAEQ,YAAY,EAAE;EACvC,OAAO,UAAUP,MAAM,EAAE;IACvB,IAAIQ,GAAG,EAAEhB,EAAE;IAEX,IAAIL,MAAM,GAAGa,MAAM;IAEnB,IAAI;MACF,KAAK,IAAIS,OAAO,GAAG,IAAA3E,eAAQ,EAACiE,KAAK,CAAC,EAAEW,SAAS,GAAGD,OAAO,CAACtE,IAAI,CAAC,CAAC,EAAE,CAACuE,SAAS,CAACrE,IAAI,EAAEqE,SAAS,GAAGD,OAAO,CAACtE,IAAI,CAAC,CAAC,EAAE;QAC3G,IAAIiE,IAAI,GAAGM,SAAS,CAACtE,KAAK;QAC1B+C,MAAM,GAAGA,MAAM,CAACoB,YAAY,CAAC,CAACH,IAAI,CAAC;MACrC;IACF,CAAC,CAAC,OAAOO,KAAK,EAAE;MACdH,GAAG,GAAG;QACJ9D,KAAK,EAAEiE;MACT,CAAC;IACH,CAAC,SAAS;MACR,IAAI;QACF,IAAID,SAAS,IAAI,CAACA,SAAS,CAACrE,IAAI,KAAKmD,EAAE,GAAGiB,OAAO,CAACZ,MAAM,CAAC,EAAEL,EAAE,CAACjE,IAAI,CAACkF,OAAO,CAAC;MAC7E,CAAC,SAAS;QACR,IAAID,GAAG,EAAE,MAAMA,GAAG,CAAC9D,KAAK;MAC1B;IACF;IAEA,OAAOyC,MAAM;EACf,CAAC;AACH;AAEA,SAASyB,YAAYA,CAAChC,UAAU,EAAE;EAChC,IAAI,CAACA,UAAU,EAAE;IACf,OAAO,CAAC,EAAE,CAAC;EACb;EAEA,IAAId,QAAQ,CAACc,UAAU,CAAC,EAAE;IACxB,OAAO,CAAC,CAACA,UAAU,CAAC,CAAC;EACvB;EAEA,IAAIO,MAAM,GAAG0B,OAAO,CAACvD,IAAI,CAACsB,UAAU,CAAC,CAACkC,GAAG,CAAC,UAAU9C,GAAG,EAAE;IACvD,IAAI+C,aAAa,GAAGnC,UAAU,CAACZ,GAAG,CAAC;IAEnC,IAAI,OAAO+C,aAAa,KAAK,QAAQ,KAAK,CAACA,aAAa,IAAI,CAACnG,MAAM,CAAC0C,IAAI,CAACyD,aAAa,CAAC,CAAC5F,MAAM,CAAC,EAAE;MAC/F,OAAO,CAAC,CAAC6C,GAAG,CAAC,CAAC;IAChB;IAEA,OAAO4C,YAAY,CAAChC,UAAU,CAACZ,GAAG,CAAC,CAAC,CAAC8C,GAAG,CAAC,UAAUE,OAAO,EAAE;MAC1D,OAAO,CAAChD,GAAG,CAAC,CAACpB,MAAM,CAACoE,OAAO,CAAC;IAC9B,CAAC,CAAC;EACJ,CAAC,CAAC,CAAC;EACH,OAAO7B,MAAM;AACf;AAEA,SAAS0B,OAAOA,CAACI,KAAK,EAAE;EACtB,IAAIzB,EAAE;EAEN,OAAO,CAACA,EAAE,GAAG,EAAE,EAAE5C,MAAM,CAACpB,KAAK,CAACgE,EAAE,EAAE,IAAA7C,eAAQ,EAACsE,KAAK,CAAC,CAAC;AACpD;AAEA,SAASC,aAAaA,CAAC9E,KAAK,EAAE;EAC5B,IAAImC,OAAO,CAACnC,KAAK,CAAC,EAAE;IAClB,OAAOA,KAAK;EACd;EAEA,OAAO,CAACA,KAAK,CAAC;AAChB;AAEA,SAAS+E,OAAOA,CAAC/E,KAAK,EAAE;EACtB,IAAIA,KAAK,KAAKgF,SAAS,EAAE;IACvB,OAAO,EAAE;EACX;EAEA,OAAOF,aAAa,CAAC9E,KAAK,CAAC;AAC7B;AAEA,SAASiF,UAAUA,CAACC,MAAM,EAAEC,OAAO,EAAEC,MAAM,EAAE;EAC3C,IAAIC,GAAG,EAAEjC,EAAE;EAEX,IAAIkC,UAAU,CAACJ,MAAM,CAAC,EAAE;IACtB,OAAOA,MAAM,CAACC,OAAO,EAAEC,MAAM,CAACG,IAAI,CAAC;EACrC;EAEA,IAAIxC,MAAM,GAAG,CAAC,CAAC;EAEf,IAAI;IACF,KAAK,IAAIM,EAAE,GAAG,IAAA3D,eAAQ,EAACwB,IAAI,CAACgE,MAAM,CAAC,CAAC,EAAE5B,EAAE,GAAGD,EAAE,CAACtD,IAAI,CAAC,CAAC,EAAE,CAACuD,EAAE,CAACrD,IAAI,EAAEqD,EAAE,GAAGD,EAAE,CAACtD,IAAI,CAAC,CAAC,EAAE;MAC9E,IAAI6B,GAAG,GAAG0B,EAAE,CAACtD,KAAK;MAClB,IAAIwF,SAAS,GAAGN,MAAM,CAACtD,GAAG,CAAC;MAE3B,IAAI0D,UAAU,CAACE,SAAS,CAAC,EAAE;QACzBzC,MAAM,CAACnB,GAAG,CAAC,GAAG4D,SAAS,CAACL,OAAO,EAAEC,MAAM,CAACG,IAAI,CAAC;MAC/C,CAAC,MAAM;QACLxC,MAAM,CAACnB,GAAG,CAAC,GAAG4D,SAAS;MACzB;IACF;EACF,CAAC,CAAC,OAAOC,KAAK,EAAE;IACdJ,GAAG,GAAG;MACJ/E,KAAK,EAAEmF;IACT,CAAC;EACH,CAAC,SAAS;IACR,IAAI;MACF,IAAInC,EAAE,IAAI,CAACA,EAAE,CAACrD,IAAI,KAAKmD,EAAE,GAAGC,EAAE,CAACI,MAAM,CAAC,EAAEL,EAAE,CAACjE,IAAI,CAACkE,EAAE,CAAC;IACrD,CAAC,SAAS;MACR,IAAIgC,GAAG,EAAE,MAAMA,GAAG,CAAC/E,KAAK;IAC1B;EACF;EAEA,OAAOyC,MAAM;AACf;AAEA,SAAS2C,cAAcA,CAACC,SAAS,EAAE;EACjC,OAAO,iBAAiB,CAACC,IAAI,CAACD,SAAS,CAAC;AAC1C;AAEA,SAASE,aAAaA,CAAC7F,KAAK,EAAE;EAC5B,IAAIA,KAAK,YAAY8F,OAAO,EAAE;IAC5B,OAAO,IAAI;EACb,CAAC,CAAC;;EAGF,IAAI9F,KAAK,KAAK,IAAI,KAAKsF,UAAU,CAACtF,KAAK,CAAC,IAAI,OAAOA,KAAK,KAAK,QAAQ,CAAC,IAAIsF,UAAU,CAACtF,KAAK,CAAC+F,IAAI,CAAC,EAAE;IAChG,OAAO,IAAI;EACb;EAEA,OAAO,KAAK;AACd;AAEA,SAASC,SAASA,CAACC,KAAK,EAAE/C,SAAS,EAAE;EACnC,IAAIgD,GAAG,EAAE9C,EAAE;EAEX,IAAIC,EAAE,GAAG,IAAAnD,aAAM,EAAC,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC;IACxBiG,MAAM,GAAG9C,EAAE,CAAC,CAAC,CAAC;IACd+C,KAAK,GAAG/C,EAAE,CAAC,CAAC,CAAC;EAEjB,IAAI;IACF,KAAK,IAAIgD,OAAO,GAAG,IAAA3G,eAAQ,EAACuG,KAAK,CAAC,EAAEK,SAAS,GAAGD,OAAO,CAACtG,IAAI,CAAC,CAAC,EAAE,CAACuG,SAAS,CAACrG,IAAI,EAAEqG,SAAS,GAAGD,OAAO,CAACtG,IAAI,CAAC,CAAC,EAAE;MAC3G,IAAIwD,IAAI,GAAG+C,SAAS,CAACtG,KAAK;MAE1B,IAAIkD,SAAS,CAACK,IAAI,CAAC,EAAE;QACnB4C,MAAM,CAAC9F,IAAI,CAACkD,IAAI,CAAC;MACnB,CAAC,MAAM;QACL6C,KAAK,CAAC/F,IAAI,CAACkD,IAAI,CAAC;MAClB;IACF;EACF,CAAC,CAAC,OAAOgD,KAAK,EAAE;IACdL,GAAG,GAAG;MACJ5F,KAAK,EAAEiG;IACT,CAAC;EACH,CAAC,SAAS;IACR,IAAI;MACF,IAAID,SAAS,IAAI,CAACA,SAAS,CAACrG,IAAI,KAAKmD,EAAE,GAAGiD,OAAO,CAAC5C,MAAM,CAAC,EAAEL,EAAE,CAACjE,IAAI,CAACkH,OAAO,CAAC;IAC7E,CAAC,SAAS;MACR,IAAIH,GAAG,EAAE,MAAMA,GAAG,CAAC5F,KAAK;IAC1B;EACF;EAEA,OAAO,CAAC6F,MAAM,EAAEC,KAAK,CAAC;AACxB;AAEA,SAASI,mBAAmBA,CAACC,IAAI,EAAEjE,UAAU,EAAE;EAC7C,OAAOI,SAAS,CAAC6D,IAAI,CAACC,MAAM,EAAE,UAAUC,OAAO,EAAE/E,GAAG,EAAE;IACpD,IAAI,CAAC+E,OAAO,EAAE;MACZ,OAAO3B,SAAS;IAClB;IAEA,IAAIL,aAAa,GAAG,CAACjD,QAAQ,CAACc,UAAU,CAAC,GAAGwC,SAAS,GAAGxC,UAAU,CAACZ,GAAG,CAAC,MAAM+E,OAAO,GAAGA,OAAO,CAACC,OAAO,GAAG5B,SAAS,CAAC;IAEnH,IAAI,CAACL,aAAa,EAAE;MAClB,OAAOK,SAAS;IAClB;IAEA,OAAO;MACL4B,OAAO,EAAEjC,aAAa;MACtB+B,MAAM,EAAEF,mBAAmB,CAACG,OAAO,EAAEhC,aAAa;IACpD,CAAC;EACH,CAAC,CAAC;AACJ;AAEA,SAASkC,kBAAkBA,CAACJ,IAAI,EAAEjE,UAAU,EAAE;EAC5C,OAAO;IACLoE,OAAO,EAAEpE,UAAU;IACnBkE,MAAM,EAAEF,mBAAmB,CAACC,IAAI,EAAEjE,UAAU;EAC9C,CAAC;AACH;AAEA,SAASsE,aAAaA,CAAC3B,OAAO,EAAEC,MAAM,EAAE2B,aAAa,EAAExE,KAAK,EAAE;EAC5D,IAAI,CAAC1B,0BAAa,EAAE;IAClBmG,IAAI,CAAC,CAAC,CAAC7B,OAAO,EAAE,wCAAwC,CAAC;EAC3D;EAEA,IAAI8B,cAAc,GAAG9B,OAAO,GAAG4B,aAAa,CAACG,MAAM,CAAC,UAAUC,GAAG,EAAEC,YAAY,EAAE;IAC/E,IAAIC,GAAG,EAAEjE,EAAE;IAEX,IAAIkE,UAAU,GAAGF,YAAY,CAACE,UAAU;IACxC,IAAIC,IAAI,GAAG;MACThF,KAAK,EAAEA,KAAK;MACZiF,MAAM,EAAEJ,YAAY;MACpBhC,MAAM,EAAEA;IACV,CAAC;IACD,IAAIqC,aAAa,GAAG,CAAC,CAAC;IAEtB,IAAInC,UAAU,CAACgC,UAAU,CAAC,EAAE;MAC1BG,aAAa,GAAGH,UAAU,CAACH,GAAG,EAAE/B,MAAM,CAACG,IAAI,EAAEgC,IAAI,CAAC;IACpD,CAAC,MAAM;MACL,IAAI;QACF,KAAK,IAAIlE,EAAE,GAAG,IAAA3D,eAAQ,EAACwB,IAAI,CAACoG,UAAU,CAAC,CAAC,EAAEhE,EAAE,GAAGD,EAAE,CAACtD,IAAI,CAAC,CAAC,EAAE,CAACuD,EAAE,CAACrD,IAAI,EAAEqD,EAAE,GAAGD,EAAE,CAACtD,IAAI,CAAC,CAAC,EAAE;UAClF,IAAI6B,GAAG,GAAG0B,EAAE,CAACtD,KAAK;UAClB,IAAI0H,cAAc,GAAGJ,UAAU,CAAC1F,GAAG,CAAC;UACpC6F,aAAa,CAAC7F,GAAG,CAAC,GAAG0D,UAAU,CAACoC,cAAc,CAAC,GAAGA,cAAc,CAACP,GAAG,EAAE/B,MAAM,CAACG,IAAI,EAAEgC,IAAI,CAAC,GAAGG,cAAc;QAC3G;MACF,CAAC,CAAC,OAAOC,KAAK,EAAE;QACdN,GAAG,GAAG;UACJ/G,KAAK,EAAEqH;QACT,CAAC;MACH,CAAC,SAAS;QACR,IAAI;UACF,IAAIrE,EAAE,IAAI,CAACA,EAAE,CAACrD,IAAI,KAAKmD,EAAE,GAAGC,EAAE,CAACI,MAAM,CAAC,EAAEL,EAAE,CAACjE,IAAI,CAACkE,EAAE,CAAC;QACrD,CAAC,SAAS;UACR,IAAIgE,GAAG,EAAE,MAAMA,GAAG,CAAC/G,KAAK;QAC1B;MACF;IACF;IAEA,OAAO9B,MAAM,CAACC,MAAM,CAAC,CAAC,CAAC,EAAE0I,GAAG,EAAEM,aAAa,CAAC;EAC9C,CAAC,EAAEtC,OAAO,CAAC,GAAGA,OAAO;EACrB,OAAO8B,cAAc;AACvB,CAAC,CAAC;;AAGF,IAAID,IAAI,GAAG,SAAAA,CAAA,EAAY,CAAC,CAAC;AAACzI,OAAA,CAAAyI,IAAA,GAAAA,IAAA;AAE1B,IAAI,CAACnG,0BAAa,EAAE;EAClBtC,OAAA,CAAAyI,IAAA,GAAAA,IAAI,GAAG,SAAAA,CAAUY,SAAS,EAAEC,OAAO,EAAE;IACnC,IAAIvH,KAAK,GAAGsH,SAAS,YAAY5F,KAAK,GAAG4F,SAAS,GAAG5C,SAAS;IAE9D,IAAI,CAAC1E,KAAK,IAAIsH,SAAS,EAAE;MACvB;IACF;IAEA,IAAIE,OAAO,KAAK9C,SAAS,EAAE;MACzB,IAAI+C,IAAI,GAAG,CAAC,WAAW,GAAGF,OAAO,CAAC;MAElC,IAAIvH,KAAK,EAAE;QACTyH,IAAI,CAAC1H,IAAI,CAACC,KAAK,CAAC;MAClB,CAAC,CAAC;;MAGFwH,OAAO,CAACd,IAAI,CAAC5H,KAAK,CAAC0I,OAAO,EAAEC,IAAI,CAAC;IACnC;EACF,CAAC;AACH;AAEA,SAAS5F,OAAOA,CAACnC,KAAK,EAAE;EACtB,OAAOgI,KAAK,CAAC7F,OAAO,CAACnC,KAAK,CAAC;AAC7B,CAAC,CAAC;;AAGF,SAASsF,UAAUA,CAACtF,KAAK,EAAE;EACzB,OAAO,OAAOA,KAAK,KAAK,UAAU;AACpC;AAEA,SAAS0B,QAAQA,CAAC1B,KAAK,EAAE;EACvB,OAAO,OAAOA,KAAK,KAAK,QAAQ;AAClC,CAAC,CAAC;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAGA,SAASiI,OAAOA,CAACL,SAAS,EAAEM,QAAQ,EAAE;EACpC,IAAI,CAACN,SAAS,EAAE;IACd,OAAO5C,SAAS;EAClB;EAEA,IAAItD,QAAQ,CAACkG,SAAS,CAAC,EAAE;IACvB,OAAO;MACL7F,IAAI,EAAEpB,6BAAkB;MACxBwH,IAAI,EAAEP,SAAS;MACf1E,SAAS,EAAEgF,QAAQ,GAAGA,QAAQ,CAACN,SAAS,CAAC,GAAG5C;IAC9C,CAAC;EACH;EAEA,IAAIM,UAAU,CAACsC,SAAS,CAAC,EAAE;IACzB,OAAO;MACL7F,IAAI,EAAEpB,6BAAkB;MACxBwH,IAAI,EAAEP,SAAS,CAACO,IAAI;MACpBjF,SAAS,EAAE0E;IACb,CAAC;EACH;EAEA,OAAOA,SAAS;AAClB;AAEA,SAASQ,YAAYA,CAACpI,KAAK,EAAE;EAC3B,IAAI;IACF,OAAO,WAAW,IAAIA,KAAK,IAAIsF,UAAU,CAACtF,KAAK,CAACqI,SAAS,CAAC;EAC5D,CAAC,CAAC,OAAO/I,CAAC,EAAE;IACV,OAAO,KAAK;EACd;AACF;AAEA,IAAIgJ,gBAAgB,GAAA/J,OAAA,CAAA+J,gBAAA,GACpB;AACA,YAAY;EACV,OAAO,OAAOzI,MAAM,KAAK,UAAU,IAAIA,MAAM,CAAC0I,UAAU,IAAI,cAAc;AAC5E,CAAC,CAAC,CAAC;AAEH,SAASC,SAASA,CAACxI,KAAK,EAAE;EACxB,IAAI;IACF,OAAO,cAAc,IAAIA,KAAK;EAChC,CAAC,CAAC,OAAOV,CAAC,EAAE;IACV,OAAO,KAAK;EACd;AACF;AAEA,IAAImJ,QAAQ,GAAAlK,OAAA,CAAAkK,QAAA,GACZ;AACA,YAAY;EACV,IAAIC,SAAS,GAAG,CAAC;EACjB,OAAO,YAAY;IACjBA,SAAS,EAAE;IACX,OAAOA,SAAS,CAACtG,QAAQ,CAAC,EAAE,CAAC;EAC/B,CAAC;AACH,CAAC,CAAC,CAAC;AAEH,SAASuG,aAAaA,CAAC7G,KAAK,EAAE8G,OAAO,CAAC;AAAA,EACpC;EACA,IAAIlH,QAAQ,CAACI,KAAK,CAAC,IAAI,OAAOA,KAAK,KAAK,QAAQ,EAAE;IAChD,OAAO,IAAAxD,eAAQ,EAAC;MACdyD,IAAI,EAAED;IACR,CAAC,EAAE8G,OAAO,CAAC;EACb;EAEA,OAAO9G,KAAK;AACd;AAEA,SAAS+G,YAAYA,CAAC/G,KAAK,EAAEgH,UAAU,EAAE;EACvC,IAAI,CAACpH,QAAQ,CAACI,KAAK,CAAC,IAAI,QAAQ,IAAIA,KAAK,IAAIA,KAAK,CAACiH,MAAM,KAAK,OAAO,EAAE;IACrE,OAAOjH,KAAK;EACd;EAEA,IAAIkH,WAAW,GAAGL,aAAa,CAAC7G,KAAK,CAAC;EACtC,OAAO,IAAAxD,eAAQ,EAAC;IACd6J,IAAI,EAAEa,WAAW,CAACjH,IAAI;IACtBwD,IAAI,EAAEyD,WAAW;IACjBD,MAAM,EAAE,OAAO;IACfhH,IAAI,EAAE;EACR,CAAC,EAAE+G,UAAU,CAAC;AAChB;AAEA,SAASG,uBAAuBA,CAACnH,KAAK,EAAEoH,UAAU,EAAE;EAClD,IAAIC,WAAW,GAAGrE,aAAa,CAACoE,UAAU,CAAC,CAACxE,GAAG,CAAC,UAAU0E,cAAc,EAAE;IACxE,IAAI,OAAOA,cAAc,KAAK,WAAW,IAAI,OAAOA,cAAc,KAAK,QAAQ,IAAIZ,SAAS,CAACY,cAAc,CAAC,EAAE;MAC5G;MACA,OAAO;QACLC,MAAM,EAAED,cAAc;QACtBtH,KAAK,EAAEA;MACT,CAAC;IACH;IAEA,OAAO,IAAAxD,eAAQ,EAAC,IAAAA,eAAQ,EAAC,CAAC,CAAC,EAAE8K,cAAc,CAAC,EAAE;MAC5CtH,KAAK,EAAEA;IACT,CAAC,CAAC;EACJ,CAAC,CAAC;EACF,OAAOqH,WAAW;AACpB;AAEA,SAASG,eAAeA,CAACD,MAAM,EAAE;EAC/B,IAAIA,MAAM,KAAKrE,SAAS,IAAIqE,MAAM,KAAKzI,yBAAc,EAAE;IACrD,OAAOoE,SAAS;EAClB;EAEA,OAAOD,OAAO,CAACsE,MAAM,CAAC;AACxB;AAEA,SAASE,oCAAoCA,CAACC,aAAa,EAAEC,YAAY,EAAEC,EAAE,EAAE;EAC7E,IAAI,CAAC7I,0BAAa,EAAE;IAClB,IAAI8I,kBAAkB,GAAGH,aAAa,CAACI,KAAK,GAAG,mBAAmB,GAAGJ,aAAa,CAACI,KAAK,GAAG,GAAG,GAAG,EAAE;IAEnG,IAAIJ,aAAa,KAAKC,YAAY,EAAE;MAClC;MACA3B,OAAO,CAACxH,KAAK,CAAC,0CAA0C,GAAGoJ,EAAE,GAAG,gBAAgB,GAAGF,aAAa,GAAG,IAAI,GAAGG,kBAAkB,CAAC;IAC/H,CAAC,MAAM;MACL,IAAIE,UAAU,GAAGJ,YAAY,CAACG,KAAK,GAAG,mBAAmB,GAAGH,YAAY,CAACG,KAAK,GAAG,GAAG,GAAG,EAAE,CAAC,CAAC;;MAE3F9B,OAAO,CAACxH,KAAK,CAAC,uFAAuF,GAAGoJ,EAAE,GAAG,KAAK,IAAI,mBAAmB,GAAGF,aAAa,GAAG,KAAK,GAAGG,kBAAkB,GAAG,qBAAqB,GAAGF,YAAY,GAAG,IAAI,GAAGI,UAAU,CAAC,CAAC;IACrP;EACF;AACF;;;;;;;;AC3jBA,IAAA/I,MAAA,GAAAC,OAAA;AACA,IAAA+I,MAAA,GAAA/I,OAAA;AAEA,SAASgJ,QAAQA,CAACC,QAAQ,EAAE9H,OAAO,EAAE;EACnC,IAAIiB,GAAG,EAAEC,EAAE;EAEX,IAAI6G,YAAY;EAEhB,IAAI;IACF,KAAK,IAAI5G,EAAE,GAAG,IAAA3D,eAAQ,EAAC,IAAAwB,WAAI,EAAC8I,QAAQ,CAAC,CAAC,EAAE1G,EAAE,GAAGD,EAAE,CAACtD,IAAI,CAAC,CAAC,EAAE,CAACuD,EAAE,CAACrD,IAAI,EAAEqD,EAAE,GAAGD,EAAE,CAACtD,IAAI,CAAC,CAAC,EAAE;MAChF,IAAImK,aAAa,GAAG5G,EAAE,CAACtD,KAAK;MAE5B,IAAI,IAAAmB,mBAAY,EAAC+I,aAAa,EAAEhI,OAAO,CAAC,KAAK,CAAC+H,YAAY,IAAI/H,OAAO,CAACnD,MAAM,GAAGkL,YAAY,CAAClL,MAAM,CAAC,EAAE;QACnGkL,YAAY,GAAGC,aAAa;MAC9B;IACF;EACF,CAAC,CAAC,OAAO1G,KAAK,EAAE;IACdL,GAAG,GAAG;MACJ7C,KAAK,EAAEkD;IACT,CAAC;EACH,CAAC,SAAS;IACR,IAAI;MACF,IAAIF,EAAE,IAAI,CAACA,EAAE,CAACrD,IAAI,KAAKmD,EAAE,GAAGC,EAAE,CAACI,MAAM,CAAC,EAAEL,EAAE,CAACjE,IAAI,CAACkE,EAAE,CAAC;IACrD,CAAC,SAAS;MACR,IAAIF,GAAG,EAAE,MAAMA,GAAG,CAAC7C,KAAK;IAC1B;EACF;EAEA,OAAO0J,QAAQ,CAACC,YAAY,CAAC;AAC/B;;;;;;;;AC7BA,IAAIE,WAAW;AAEf,CAAC,UAAUA,WAAW,EAAE;EACtBA,WAAW,CAAC,OAAO,CAAC,GAAG,cAAc;EACrCA,WAAW,CAAC,MAAM,CAAC,GAAG,aAAa;EACnCA,WAAW,CAAC,OAAO,CAAC,GAAG,cAAc;EACrCA,WAAW,CAAC,MAAM,CAAC,GAAG,aAAa;EACnCA,WAAW,CAAC,QAAQ,CAAC,GAAG,eAAe;EACvCA,WAAW,CAAC,WAAW,CAAC,GAAG,EAAE;EAC7BA,WAAW,CAAC,QAAQ,CAAC,GAAG,eAAe;EACvCA,WAAW,CAAC,OAAO,CAAC,GAAG,cAAc;EACrCA,WAAW,CAAC,WAAW,CAAC,GAAG,YAAY;EACvCA,WAAW,CAAC,YAAY,CAAC,GAAG,aAAa;EACzCA,WAAW,CAAC,KAAK,CAAC,GAAG,YAAY;EACjCA,WAAW,CAAC,MAAM,CAAC,GAAG,aAAa;EACnCA,WAAW,CAAC,QAAQ,CAAC,GAAG,eAAe;EACvCA,WAAW,CAAC,gBAAgB,CAAC,GAAG,iBAAiB;EACjDA,WAAW,CAAC,oBAAoB,CAAC,GAAG,qBAAqB;EACzDA,WAAW,CAAC,eAAe,CAAC,GAAG,gBAAgB;EAC/CA,WAAW,CAAC,aAAa,CAAC,GAAG,cAAc;EAC3CA,WAAW,CAAC,QAAQ,CAAC,GAAG,eAAe;EACvCA,WAAW,CAAC,MAAM,CAAC,GAAG,aAAa;AACrC,CAAC,EAAEA,WAAW,KAAA5L,OAAA,CAAA4L,WAAA,GAAKA,WAAW,GAAG,CAAC,CAAC,CAAC,CAAC;AAErC,IAAIC,cAAc;AAElB,CAAC,UAAUA,cAAc,EAAE;EACzBA,cAAc,CAAC,QAAQ,CAAC,GAAG,UAAU;EACrCA,cAAc,CAAC,UAAU,CAAC,GAAG,YAAY;AAC3C,CAAC,EAAEA,cAAc,KAAA7L,OAAA,CAAA6L,cAAA,GAAKA,cAAc,GAAG,CAAC,CAAC,CAAC,CAAC;;;;;;;;AC7B3C,IAAAC,MAAA,GAAAtJ,OAAA;AAA0C;;AAE1C,IAAIuJ,KAAK,GAAA/L,OAAA,CAAA+L,KAAA,GAAGH,kBAAW,CAACI,KAAK;AAC7B,IAAIC,IAAI,GAAAjM,OAAA,CAAAiM,IAAA,GAAGL,kBAAW,CAACM,IAAI;AAC3B,IAAIC,KAAK,GAAAnM,OAAA,CAAAmM,KAAA,GAAGP,kBAAW,CAACQ,KAAK;AAC7B,IAAIC,IAAI,GAAArM,OAAA,CAAAqM,IAAA,GAAGT,kBAAW,CAACU,IAAI;AAC3B,IAAIC,MAAM,GAAAvM,OAAA,CAAAuM,MAAA,GAAGX,kBAAW,CAACY,MAAM;AAC/B,IAAIC,SAAS,GAAAzM,OAAA,CAAAyM,SAAA,GAAGb,kBAAW,CAACc,SAAS;AACrC,IAAIxM,MAAM,GAAAF,OAAA,CAAAE,MAAA,GAAG0L,kBAAW,CAACe,MAAM;AAC/B,IAAIC,KAAK,GAAA5M,OAAA,CAAA4M,KAAA,GAAGhB,kBAAW,CAACiB,KAAK;AAC7B,IAAIC,SAAS,GAAA9M,OAAA,CAAA8M,SAAA,GAAGlB,kBAAW,CAACmB,SAAS;AACrC,IAAIC,GAAG,GAAAhN,OAAA,CAAAgN,GAAA,GAAGpB,kBAAW,CAACqB,GAAG;AACzB,IAAIC,IAAI,GAAAlN,OAAA,CAAAkN,IAAA,GAAGtB,kBAAW,CAACuB,IAAI;AAC3B,IAAIC,MAAM,GAAApN,OAAA,CAAAoN,MAAA,GAAGxB,kBAAW,CAACyB,MAAM;AAC/B,IAAIC,cAAc,GAAAtN,OAAA,CAAAsN,cAAA,GAAG1B,kBAAW,CAAC2B,cAAc;AAC/C,IAAIC,aAAa,GAAAxN,OAAA,CAAAwN,aAAA,GAAG5B,kBAAW,CAAC6B,aAAa;AAC7C,IAAI1L,KAAK,GAAA/B,OAAA,CAAA+B,KAAA,GAAG6J,kBAAW,CAAC8B,WAAW;AACnC,IAAIC,MAAM,GAAA3N,OAAA,CAAA2N,MAAA,GAAG/B,kBAAW,CAACgC,MAAM;AAC/B,IAAIC,IAAI,GAAA7N,OAAA,CAAA6N,IAAA,GAAGjC,kBAAW,CAACkC,IAAI;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AClB3B,IAAAvL,MAAA,GAAAC,OAAA;AACA,IAAA+I,MAAA,GAAA/I,OAAA;AACA,IAAAsJ,MAAA,GAAAtJ,OAAA;AACA,IAAAuL,YAAA,GAAAvL,OAAA;AACA,IAAIwL,SAAS,GAAAhO,OAAA,CAAAgO,SAAA,GACb;AACA,IAAA1D,mBAAY,EAAC;EACX9G,IAAI,EAAE0J;AACR,CAAC,CAAC;AAEF,SAASe,iBAAiBA,CAACC,UAAU,EAAEC,iBAAiB,EAAE;EACxD,OAAOA,iBAAiB,GAAGA,iBAAiB,CAACD,UAAU,CAAC,IAAIzH,SAAS,GAAGA,SAAS;AACnF;AAEA,SAAS2H,cAAcA,CAACnF,MAAM,EAAEkF,iBAAiB,EAAE;EACjD,IAAIE,YAAY;EAEhB,IAAI,IAAAlL,eAAQ,EAAC8F,MAAM,CAAC,IAAI,OAAOA,MAAM,KAAK,QAAQ,EAAE;IAClD,IAAIqF,IAAI,GAAGL,iBAAiB,CAAChF,MAAM,EAAEkF,iBAAiB,CAAC;IAEvD,IAAI,IAAApH,iBAAU,EAACuH,IAAI,CAAC,EAAE;MACpBD,YAAY,GAAG;QACb7K,IAAI,EAAEyF,MAAM;QACZqF,IAAI,EAAEA;MACR,CAAC;IACH,CAAC,MAAM,IAAIA,IAAI,EAAE;MACfD,YAAY,GAAGC,IAAI;IACrB,CAAC,MAAM;MACLD,YAAY,GAAG;QACb7K,IAAI,EAAEyF,MAAM;QACZqF,IAAI,EAAE7H;MACR,CAAC;IACH;EACF,CAAC,MAAM,IAAI,IAAAM,iBAAU,EAACkC,MAAM,CAAC,EAAE;IAC7BoF,YAAY,GAAG;MACb;MACA7K,IAAI,EAAEyF,MAAM,CAACW,IAAI,IAAIX,MAAM,CAACpF,QAAQ,CAAC,CAAC;MACtCyK,IAAI,EAAErF;IACR,CAAC;EACH,CAAC,MAAM;IACL,IAAIqF,IAAI,GAAGL,iBAAiB,CAAChF,MAAM,CAACzF,IAAI,EAAE2K,iBAAiB,CAAC;IAE5D,IAAI,IAAApH,iBAAU,EAACuH,IAAI,CAAC,EAAE;MACpBD,YAAY,GAAG,IAAAtO,eAAQ,EAAC,IAAAA,eAAQ,EAAC,CAAC,CAAC,EAAEkJ,MAAM,CAAC,EAAE;QAC5CqF,IAAI,EAAEA;MACR,CAAC,CAAC;IACJ,CAAC,MAAM,IAAIA,IAAI,EAAE;MACf,IAAI9K,IAAI,GAAGyF,MAAM,CAACzF,IAAI;QAClB+K,KAAK,GAAG,IAAAzN,aAAM,EAACmI,MAAM,EAAE,CAAC,MAAM,CAAC,CAAC;MAEpCoF,YAAY,GAAG,IAAAtO,eAAQ,EAAC,IAAAA,eAAQ,EAAC;QAC/ByD,IAAI,EAAEA;MACR,CAAC,EAAE8K,IAAI,CAAC,EAAEC,KAAK,CAAC;IAClB,CAAC,MAAM;MACLF,YAAY,GAAGpF,MAAM;IACvB;EACF;EAEAhJ,MAAM,CAACuO,cAAc,CAACH,YAAY,EAAE,UAAU,EAAE;IAC9C5M,KAAK,EAAE,SAAAA,CAAA,EAAY;MACjB,OAAO4M,YAAY,CAAC7K,IAAI;IAC1B,CAAC;IACDiL,UAAU,EAAE,KAAK;IACjBC,YAAY,EAAE;EAChB,CAAC,CAAC;EACF,OAAOL,YAAY;AACrB;AAEA,IAAIM,eAAe,GAAG,SAAAA,CAAU1F,MAAM,EAAEkF,iBAAiB,EAAE;EACzD,IAAI,CAAClF,MAAM,EAAE;IACX,OAAO,EAAE;EACX;EAEA,IAAI2F,OAAO,GAAG,IAAAhL,cAAO,EAACqF,MAAM,CAAC,GAAGA,MAAM,GAAG,CAACA,MAAM,CAAC;EACjD,OAAO2F,OAAO,CAACzI,GAAG,CAAC,UAAU0I,SAAS,EAAE;IACtC,OAAOT,cAAc,CAACS,SAAS,EAAEV,iBAAiB,CAAC;EACrD,CAAC,CAAC;AACJ,CAAC;AAACnO,OAAA,CAAA2O,eAAA,GAAAA,eAAA;AAEF,SAASG,oBAAoBA,CAAC7F,MAAM,EAAE;EACpC,IAAIoF,YAAY,GAAGD,cAAc,CAACnF,MAAM,CAAC;EACzC,OAAO,IAAAlJ,eAAQ,EAAC,IAAAA,eAAQ,EAAC;IACvBoL,EAAE,EAAE,IAAAhI,eAAQ,EAAC8F,MAAM,CAAC,GAAGA,MAAM,GAAGoF,YAAY,CAAClD;EAC/C,CAAC,EAAEkD,YAAY,CAAC,EAAE;IAChB7K,IAAI,EAAE6K,YAAY,CAAC7K;EACrB,CAAC,CAAC;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;;AAGA,SAAS2I,KAAKA,CAAC5I,KAAK,EAAE;EACpB,IAAI,CAAC,IAAAJ,eAAQ,EAACI,KAAK,CAAC,EAAE;IACpB,OAAO8I,IAAI,CAAC9I,KAAK,EAAE;MACjBwL,EAAE,EAAElD,qBAAc,CAACmD;IACrB,CAAC,CAAC;EACJ;EAEA,OAAO;IACLxL,IAAI,EAAEyL,kBAAO;IACb1L,KAAK,EAAEA;EACT,CAAC;AACH;AAEA,SAAS2L,YAAYA,CAACjG,MAAM,EAAE;EAC5B,OAAO;IACLzF,IAAI,EAAEyL,kBAAO;IACbpI,MAAM,EAAE,IAAAyD,mBAAY,EAACrB,MAAM,CAAC1F,KAAK;EACnC,CAAC;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAGA,SAAS8I,IAAIA,CAAC9I,KAAK,EAAE4L,OAAO,EAAE;EAC5B,OAAO;IACLJ,EAAE,EAAEI,OAAO,GAAGA,OAAO,CAACJ,EAAE,GAAGtI,SAAS;IACpCjD,IAAI,EAAE4L,iBAAM;IACZ7L,KAAK,EAAE,IAAAwD,iBAAU,EAACxD,KAAK,CAAC,GAAGA,KAAK,GAAG,IAAA6G,oBAAa,EAAC7G,KAAK,CAAC;IACvD8L,KAAK,EAAEF,OAAO,GAAGA,OAAO,CAACE,KAAK,GAAG5I,SAAS;IAC1C0E,EAAE,EAAEgE,OAAO,IAAIA,OAAO,CAAChE,EAAE,KAAK1E,SAAS,GAAG0I,OAAO,CAAChE,EAAE,GAAG,IAAApE,iBAAU,EAACxD,KAAK,CAAC,GAAGA,KAAK,CAACqG,IAAI,GAAG,IAAAtG,mBAAY,EAACC,KAAK;EAC5G,CAAC;AACH;AAEA,SAAS+L,WAAWA,CAACrG,MAAM,EAAEsG,GAAG,EAAE1I,MAAM,EAAE2I,SAAS,EAAE;EACnD,IAAIxG,IAAI,GAAG;IACTnC,MAAM,EAAEA;EACV,CAAC,CAAC,CAAC;;EAEH,IAAI4I,aAAa,GAAG,IAAAnF,mBAAY,EAAC,IAAAvD,iBAAU,EAACkC,MAAM,CAAC1F,KAAK,CAAC,GAAG0F,MAAM,CAAC1F,KAAK,CAACgM,GAAG,EAAE1I,MAAM,CAACG,IAAI,EAAEgC,IAAI,CAAC,GAAGC,MAAM,CAAC1F,KAAK,CAAC;EAChH,IAAImM,aAAa;EAEjB,IAAI,IAAAvM,eAAQ,EAAC8F,MAAM,CAACoG,KAAK,CAAC,EAAE;IAC1B,IAAIM,WAAW,GAAGH,SAAS,IAAIA,SAAS,CAACvG,MAAM,CAACoG,KAAK,CAAC;IACtDK,aAAa,GAAG,IAAA3I,iBAAU,EAAC4I,WAAW,CAAC,GAAGA,WAAW,CAACJ,GAAG,EAAE1I,MAAM,CAACG,IAAI,EAAEgC,IAAI,CAAC,GAAG2G,WAAW;EAC7F,CAAC,MAAM;IACLD,aAAa,GAAG,IAAA3I,iBAAU,EAACkC,MAAM,CAACoG,KAAK,CAAC,GAAGpG,MAAM,CAACoG,KAAK,CAACE,GAAG,EAAE1I,MAAM,CAACG,IAAI,EAAEgC,IAAI,CAAC,GAAGC,MAAM,CAACoG,KAAK;EAChG;EAEA,IAAIO,cAAc,GAAG,IAAA7I,iBAAU,EAACkC,MAAM,CAAC8F,EAAE,CAAC,GAAG9F,MAAM,CAAC8F,EAAE,CAACQ,GAAG,EAAE1I,MAAM,CAACG,IAAI,EAAEgC,IAAI,CAAC,GAAGC,MAAM,CAAC8F,EAAE;EAC1F,OAAO,IAAAhP,eAAQ,EAAC,IAAAA,eAAQ,EAAC,CAAC,CAAC,EAAEkJ,MAAM,CAAC,EAAE;IACpC8F,EAAE,EAAEa,cAAc;IAClB/I,MAAM,EAAE4I,aAAa;IACrBlM,KAAK,EAAEkM,aAAa,CAACzI,IAAI;IACzBqI,KAAK,EAAEK;EACT,CAAC,CAAC;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;;AAGA,SAASG,UAAUA,CAACtM,KAAK,EAAE4L,OAAO,EAAE;EAClC,OAAO9C,IAAI,CAAC9I,KAAK,EAAE,IAAAxD,eAAQ,EAAC,IAAAA,eAAQ,EAAC,CAAC,CAAC,EAAEoP,OAAO,CAAC,EAAE;IACjDJ,EAAE,EAAElD,qBAAc,CAACiE;EACrB,CAAC,CAAC,CAAC;AACL;AACA;AACA;AACA;;AAGA,SAASC,UAAUA,CAAA,EAAG;EACpB,OAAOF,UAAU,CAAClC,mBAAM,CAAC;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;;AAGA,SAASqC,OAAOA,CAACzM,KAAK,EAAE4L,OAAO,EAAE;EAC/B,OAAO9C,IAAI,CAAC9I,KAAK,EAAE,IAAAxD,eAAQ,EAAC,IAAAA,eAAQ,EAAC,CAAC,CAAC,EAAEoP,OAAO,CAAC,EAAE;IACjDJ,EAAE,EAAE,SAAAA,CAAUkB,CAAC,EAAEC,EAAE,EAAErL,EAAE,EAAE;MACvB,IAAIgC,MAAM,GAAGhC,EAAE,CAACgC,MAAM;MACtB,OAAOA,MAAM,CAACsJ,MAAM,CAAC,CAAC;IACxB;EACF,CAAC,CAAC,CAAC;AACL;;AAEA,IAAIC,cAAc,GAAG,SAAAA,CAAUxJ,OAAO,EAAErD,KAAK,EAAE;EAC7C,OAAO;IACLqD,OAAO,EAAEA,OAAO;IAChBrD,KAAK,EAAEA;EACT,CAAC;AACH,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAGA,SAASyJ,GAAGA,CAACqD,IAAI,EAAEC,KAAK,EAAE;EACxB,IAAID,IAAI,KAAK,KAAK,CAAC,EAAE;IACnBA,IAAI,GAAGD,cAAc;EACvB;EAEA,OAAO;IACL5M,IAAI,EAAE+M,gBAAK;IACXD,KAAK,EAAEA,KAAK;IACZD,IAAI,EAAEA;EACR,CAAC;AACH;AAEA,IAAIG,UAAU,GAAG,SAAAA,CAAUvH,MAAM,EAAEsG,GAAG,EAAE1I,MAAM,EAAE;EAC9C,OAAO,IAAA9G,eAAQ,EAAC,IAAAA,eAAQ,EAAC,CAAC,CAAC,EAAEkJ,MAAM,CAAC,EAAE;IACpCxH,KAAK,EAAE,IAAA0B,eAAQ,EAAC8F,MAAM,CAACoH,IAAI,CAAC,GAAGpH,MAAM,CAACoH,IAAI,GAAGpH,MAAM,CAACoH,IAAI,CAACd,GAAG,EAAE1I,MAAM,CAACG,IAAI,EAAE;MACzEH,MAAM,EAAEA;IACV,CAAC;EACH,CAAC,CAAC;AACJ,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AANA7G,OAAA,CAAAwQ,UAAA,GAAAA,UAAA;AASA,IAAIjE,MAAM,GAAG,SAAAA,CAAUkE,MAAM,EAAE;EAC7B,OAAO;IACLjN,IAAI,EAAEkN,mBAAQ;IACdD,MAAM,EAAEA;EACV,CAAC;AACH,CAAC;AACD;AACA;AACA;AACA;AACA;AAJAzQ,OAAA,CAAAuM,MAAA,GAAAA,MAAA;AAOA,SAASR,KAAKA,CAAC4E,QAAQ,EAAE;EACvB,IAAIC,WAAW,GAAG9B,oBAAoB,CAAC6B,QAAQ,CAAC;EAChD,OAAO;IACLnN,IAAI,EAAEoI,kBAAW,CAACI,KAAK;IACvB2E,QAAQ,EAAEC,WAAW;IACrBtC,IAAI,EAAE7H;EACR,CAAC;AACH;AACA;AACA;AACA;AACA;AACA;;AAGA,SAASwF,IAAIA,CAAC0E,QAAQ,EAAE;EACtB,IAAIC,WAAW,GAAG9B,oBAAoB,CAAC6B,QAAQ,CAAC;EAChD,OAAO;IACLnN,IAAI,EAAEoI,kBAAW,CAACM,IAAI;IACtByE,QAAQ,EAAEC,WAAW;IACrBtC,IAAI,EAAE7H;EACR,CAAC;AACH;AACA;AACA;AACA;AACA;AACA;;AAGA,IAAIvG,MAAM,GAAG,SAAAA,CAAU6I,UAAU,EAAE;EACjC,OAAO;IACLvF,IAAI,EAAEqN,mBAAQ;IACd9H,UAAU,EAAEA;EACd,CAAC;AACH,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AANA/I,OAAA,CAAAE,MAAA,GAAAA,MAAA;AASA,SAAS0M,KAAKA,CAACkE,QAAQ,EAAE3F,EAAE,EAAE;EAC3B,IAAI4F,QAAQ,GAAG5F,EAAE,GAAG,GAAG,GAAGA,EAAE,GAAG,EAAE;EACjC,OAAOS,kBAAW,CAACiB,KAAK,GAAG,GAAG,GAAGiE,QAAQ,GAAG,GAAG,GAAGC,QAAQ;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAGA,SAASrP,IAAIA,CAACyJ,EAAE,EAAEnE,IAAI,EAAE;EACtB,IAAIxD,IAAI,GAAGoI,kBAAW,CAACmB,SAAS,GAAG,GAAG,GAAG5B,EAAE;EAC3C,IAAIV,WAAW,GAAG;IAChBjH,IAAI,EAAEA,IAAI;IACVwD,IAAI,EAAEA;EACR,CAAC;EAEDyD,WAAW,CAAC5G,QAAQ,GAAG,YAAY;IACjC,OAAOL,IAAI;EACb,CAAC;EAED,OAAOiH,WAAW;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAGA,SAASuG,UAAUA,CAAC7F,EAAE,EAAEnE,IAAI,EAAE;EAC5B,IAAIxD,IAAI,GAAGoI,kBAAW,CAACqF,UAAU,GAAG,GAAG,GAAG9F,EAAE;EAC5C,IAAIV,WAAW,GAAG;IAChBjH,IAAI,EAAEA,IAAI;IACVwD,IAAI,EAAEA;EACR,CAAC;EAEDyD,WAAW,CAAC5G,QAAQ,GAAG,YAAY;IACjC,OAAOL,IAAI;EACb,CAAC;EAED,OAAOiH,WAAW;AACpB;AAEA,SAAS1I,KAAKA,CAACoJ,EAAE,EAAEnE,IAAI,EAAE;EACvB,IAAIxD,IAAI,GAAGoI,kBAAW,CAAC6B,aAAa,GAAG,GAAG,GAAGtC,EAAE;EAC/C,IAAIV,WAAW,GAAG;IAChBjH,IAAI,EAAEA,IAAI;IACVwD,IAAI,EAAEA;EACR,CAAC;EAEDyD,WAAW,CAAC5G,QAAQ,GAAG,YAAY;IACjC,OAAOL,IAAI;EACb,CAAC;EAED,OAAOiH,WAAW;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;;AAGA,SAASyG,SAASA,CAACpG,MAAM,EAAEqE,OAAO,EAAE;EAClC,OAAO9C,IAAI,CAAC,UAAU4D,CAAC,EAAE1M,KAAK,EAAE;IAC9B,OAAOA,KAAK;EACd,CAAC,EAAE,IAAAxD,eAAQ,EAAC,IAAAA,eAAQ,EAAC,CAAC,CAAC,EAAEoP,OAAO,CAAC,EAAE;IACjCJ,EAAE,EAAEjE;EACN,CAAC,CAAC,CAAC;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAGA,SAASqG,QAAQA,CAACC,SAAS,EAAEjC,OAAO,EAAE;EACpC,OAAOU,UAAU,CAAC,UAAUjJ,OAAO,EAAErD,KAAK,EAAEyF,IAAI,EAAE;IAChD,OAAO;MACLxF,IAAI,EAAE6N,kBAAO;MACbrK,IAAI,EAAE,IAAAD,iBAAU,EAACqK,SAAS,CAAC,GAAGA,SAAS,CAACxK,OAAO,EAAErD,KAAK,EAAEyF,IAAI,CAAC,GAAGoI;IAClE,CAAC;EACH,CAAC,EAAE,IAAArR,eAAQ,EAAC,IAAAA,eAAQ,EAAC,CAAC,CAAC,EAAEoP,OAAO,CAAC,EAAE;IACjCJ,EAAE,EAAElD,qBAAc,CAACiE;EACrB,CAAC,CAAC,CAAC;AACL;;;;;;;;;;;;;;;;AC5YA,IAAAvN,MAAA,GAAAC,OAAA;AACA,IAAA+I,MAAA,GAAA/I,OAAA;AAEA,IAAI8O,UAAU,GAAG,SAAAA,CAAUC,SAAS,EAAE;EACpC,OAAOA,SAAS,CAAC/N,IAAI,KAAK,QAAQ,IAAI+N,SAAS,CAAC/N,IAAI,KAAK,OAAO;AAClE,CAAC;AAACxD,OAAA,CAAAsR,UAAA,GAAAA,UAAA;AAEF,SAASE,WAAWA,CAACD,SAAS,EAAE;EAC9B,OAAO,IAAA5O,WAAI,EAAC4O,SAAS,CAACpJ,MAAM,CAAC,CAAChC,GAAG,CAAC,UAAU9C,GAAG,EAAE;IAC/C,OAAOkO,SAAS,CAACpJ,MAAM,CAAC9E,GAAG,CAAC;EAC9B,CAAC,CAAC;AACJ;AAEA,SAASoO,gBAAgBA,CAACF,SAAS,EAAE;EACnC,IAAIG,UAAU,GAAG,CAACH,SAAS,CAAC;EAE5B,IAAID,UAAU,CAACC,SAAS,CAAC,EAAE;IACzB,OAAOG,UAAU;EACnB;EAEA,OAAOA,UAAU,CAACzP,MAAM,CAAC,IAAAiE,cAAO,EAACsL,WAAW,CAACD,SAAS,CAAC,CAACpL,GAAG,CAACsL,gBAAgB,CAAC,CAAC,CAAC;AACjF;AAEA,SAASE,gBAAgBA,CAACC,cAAc,EAAEF,UAAU,EAAE;EACpD,IAAI9M,GAAG,EAAEC,EAAE,EAAES,GAAG,EAAER,EAAE,EAAEe,GAAG,EAAEd,EAAE,EAAE8M,GAAG,EAAEC,EAAE;EAEtC,IAAIC,iBAAiB,GAAG,IAAIC,GAAG,CAACJ,cAAc,CAAC;EAC/C,IAAIK,WAAW,GAAGC,UAAU,CAACH,iBAAiB,CAAC;EAC/C,IAAII,aAAa,GAAG,IAAIH,GAAG,CAACN,UAAU,CAAC;EAEvC,IAAI;IACF;IACA,KAAK,IAAIU,eAAe,GAAG,IAAAjR,eAAQ,EAACgR,aAAa,CAAC,EAAEE,iBAAiB,GAAGD,eAAe,CAAC5Q,IAAI,CAAC,CAAC,EAAE,CAAC6Q,iBAAiB,CAAC3Q,IAAI,EAAE2Q,iBAAiB,GAAGD,eAAe,CAAC5Q,IAAI,CAAC,CAAC,EAAE;MACnK,IAAIpB,CAAC,GAAGiS,iBAAiB,CAAC5Q,KAAK;MAC/B,IAAIJ,CAAC,GAAGjB,CAAC,CAACkS,MAAM;MAEhB,OAAOjR,CAAC,IAAI,CAAC8Q,aAAa,CAACI,GAAG,CAAClR,CAAC,CAAC,EAAE;QACjC8Q,aAAa,CAACK,GAAG,CAACnR,CAAC,CAAC;QACpBA,CAAC,GAAGA,CAAC,CAACiR,MAAM;MACd;IACF;EACF,CAAC,CAAC,OAAOrN,KAAK,EAAE;IACdL,GAAG,GAAG;MACJ7C,KAAK,EAAEkD;IACT,CAAC;EACH,CAAC,SAAS;IACR,IAAI;MACF,IAAIoN,iBAAiB,IAAI,CAACA,iBAAiB,CAAC3Q,IAAI,KAAKmD,EAAE,GAAGuN,eAAe,CAAClN,MAAM,CAAC,EAAEL,EAAE,CAACjE,IAAI,CAACwR,eAAe,CAAC;IAC7G,CAAC,SAAS;MACR,IAAIxN,GAAG,EAAE,MAAMA,GAAG,CAAC7C,KAAK;IAC1B;EACF;EAEA,IAAI0Q,OAAO,GAAGP,UAAU,CAACC,aAAa,CAAC;EAEvC,IAAI;IACF;IACA,KAAK,IAAIO,eAAe,GAAG,IAAAvR,eAAQ,EAACgR,aAAa,CAAC,EAAEQ,iBAAiB,GAAGD,eAAe,CAAClR,IAAI,CAAC,CAAC,EAAE,CAACmR,iBAAiB,CAACjR,IAAI,EAAEiR,iBAAiB,GAAGD,eAAe,CAAClR,IAAI,CAAC,CAAC,EAAE;MACnK,IAAIpB,CAAC,GAAGuS,iBAAiB,CAAClR,KAAK,CAAC,CAAC;;MAEjC,IAAIrB,CAAC,CAACoD,IAAI,KAAK,UAAU,KAAK,CAACiP,OAAO,CAACG,GAAG,CAACxS,CAAC,CAAC,IAAI,CAACqS,OAAO,CAACG,GAAG,CAACxS,CAAC,CAAC,CAACI,MAAM,CAAC,EAAE;QACxE,IAAIyR,WAAW,CAACW,GAAG,CAACxS,CAAC,CAAC,EAAE;UACtB6R,WAAW,CAACW,GAAG,CAACxS,CAAC,CAAC,CAACyS,OAAO,CAAC,UAAUC,EAAE,EAAE;YACvC,OAAOX,aAAa,CAACK,GAAG,CAACM,EAAE,CAAC;UAC9B,CAAC,CAAC;QACJ,CAAC,MAAM;UACL1S,CAAC,CAAC2S,iBAAiB,CAACF,OAAO,CAAC,UAAUC,EAAE,EAAE;YACxC,OAAOX,aAAa,CAACK,GAAG,CAACM,EAAE,CAAC;UAC9B,CAAC,CAAC;QACJ;MACF,CAAC,MAAM;QACL,IAAI1S,CAAC,CAACoD,IAAI,KAAK,UAAU,EAAE;UACzB,IAAI;YACF,KAAK,IAAIwP,EAAE,IAAInN,GAAG,GAAG,KAAK,CAAC,EAAE,IAAA1E,eAAQ,EAACqQ,WAAW,CAACpR,CAAC,CAAC,CAAC,CAAC,EAAE6S,EAAE,GAAGD,EAAE,CAACxR,IAAI,CAAC,CAAC,EAAE,CAACyR,EAAE,CAACvR,IAAI,EAAEuR,EAAE,GAAGD,EAAE,CAACxR,IAAI,CAAC,CAAC,EAAE;cAChG,IAAI0R,KAAK,GAAGD,EAAE,CAACxR,KAAK;cAEpB,IAAIyR,KAAK,CAAC1P,IAAI,KAAK,SAAS,EAAE;gBAC5B;cACF;cAEA,IAAI,CAAC2O,aAAa,CAACI,GAAG,CAACW,KAAK,CAAC,EAAE;gBAC7Bf,aAAa,CAACK,GAAG,CAACU,KAAK,CAAC;gBAExB,IAAIjB,WAAW,CAACW,GAAG,CAACM,KAAK,CAAC,EAAE;kBAC1BjB,WAAW,CAACW,GAAG,CAACM,KAAK,CAAC,CAACL,OAAO,CAAC,UAAUC,EAAE,EAAE;oBAC3C,OAAOX,aAAa,CAACK,GAAG,CAACM,EAAE,CAAC;kBAC9B,CAAC,CAAC;gBACJ,CAAC,MAAM;kBACLI,KAAK,CAACH,iBAAiB,CAACF,OAAO,CAAC,UAAUC,EAAE,EAAE;oBAC5C,OAAOX,aAAa,CAACK,GAAG,CAACM,EAAE,CAAC;kBAC9B,CAAC,CAAC;gBACJ;cACF;YACF;UACF,CAAC,CAAC,OAAO9M,KAAK,EAAE;YACdH,GAAG,GAAG;cACJ9D,KAAK,EAAEiE;YACT,CAAC;UACH,CAAC,SAAS;YACR,IAAI;cACF,IAAIiN,EAAE,IAAI,CAACA,EAAE,CAACvR,IAAI,KAAKqD,EAAE,GAAGiO,EAAE,CAAC9N,MAAM,CAAC,EAAEH,EAAE,CAACnE,IAAI,CAACoS,EAAE,CAAC;YACrD,CAAC,SAAS;cACR,IAAInN,GAAG,EAAE,MAAMA,GAAG,CAAC9D,KAAK;YAC1B;UACF;QACF;MACF;IACF;EACF,CAAC,CAAC,OAAO2D,KAAK,EAAE;IACdJ,GAAG,GAAG;MACJvD,KAAK,EAAE2D;IACT,CAAC;EACH,CAAC,SAAS;IACR,IAAI;MACF,IAAIiN,iBAAiB,IAAI,CAACA,iBAAiB,CAACjR,IAAI,KAAKoD,EAAE,GAAG4N,eAAe,CAACxN,MAAM,CAAC,EAAEJ,EAAE,CAAClE,IAAI,CAAC8R,eAAe,CAAC;IAC7G,CAAC,SAAS;MACR,IAAIpN,GAAG,EAAE,MAAMA,GAAG,CAACvD,KAAK;IAC1B;EACF;EAEA,IAAI;IACF;IACA,KAAK,IAAIoR,eAAe,GAAG,IAAAhS,eAAQ,EAACgR,aAAa,CAAC,EAAEiB,iBAAiB,GAAGD,eAAe,CAAC3R,IAAI,CAAC,CAAC,EAAE,CAAC4R,iBAAiB,CAAC1R,IAAI,EAAE0R,iBAAiB,GAAGD,eAAe,CAAC3R,IAAI,CAAC,CAAC,EAAE;MACnK,IAAIpB,CAAC,GAAGgT,iBAAiB,CAAC3R,KAAK;MAC/B,IAAIJ,CAAC,GAAGjB,CAAC,CAACkS,MAAM;MAEhB,OAAOjR,CAAC,IAAI,CAAC8Q,aAAa,CAACI,GAAG,CAAClR,CAAC,CAAC,EAAE;QACjC8Q,aAAa,CAACK,GAAG,CAACnR,CAAC,CAAC;QACpBA,CAAC,GAAGA,CAAC,CAACiR,MAAM;MACd;IACF;EACF,CAAC,CAAC,OAAOe,KAAK,EAAE;IACdxB,GAAG,GAAG;MACJ9P,KAAK,EAAEsR;IACT,CAAC;EACH,CAAC,SAAS;IACR,IAAI;MACF,IAAID,iBAAiB,IAAI,CAACA,iBAAiB,CAAC1R,IAAI,KAAKoQ,EAAE,GAAGqB,eAAe,CAACjO,MAAM,CAAC,EAAE4M,EAAE,CAAClR,IAAI,CAACuS,eAAe,CAAC;IAC7G,CAAC,SAAS;MACR,IAAItB,GAAG,EAAE,MAAMA,GAAG,CAAC9P,KAAK;IAC1B;EACF;EAEA,OAAOoQ,aAAa;AACtB;AAEA,SAASmB,eAAeA,CAACC,QAAQ,EAAEd,OAAO,EAAE;EAC1C,IAAIe,eAAe,GAAGf,OAAO,CAACG,GAAG,CAACW,QAAQ,CAAC;EAE3C,IAAI,CAACC,eAAe,EAAE;IACpB,OAAO,CAAC,CAAC,CAAC,CAAC;EACb;;EAEA,IAAID,QAAQ,CAAC/P,IAAI,KAAK,UAAU,EAAE;IAChC,IAAIiQ,cAAc,GAAGD,eAAe,CAAC,CAAC,CAAC;IAEvC,IAAIC,cAAc,EAAE;MAClB,IAAInC,UAAU,CAACmC,cAAc,CAAC,EAAE;QAC9B,OAAOA,cAAc,CAACpQ,GAAG;MAC3B;IACF,CAAC,MAAM;MACL,OAAO,CAAC,CAAC;IACX;EACF;EAEA,IAAIY,UAAU,GAAG,CAAC,CAAC;EACnBuP,eAAe,CAACX,OAAO,CAAC,UAAUa,GAAG,EAAE;IACrCzP,UAAU,CAACyP,GAAG,CAACrQ,GAAG,CAAC,GAAGiQ,eAAe,CAACI,GAAG,EAAEjB,OAAO,CAAC;EACrD,CAAC,CAAC;EACF,OAAOxO,UAAU;AACnB;AAEA,SAASiO,UAAUA,CAACC,aAAa,EAAE;EACjC,IAAIrL,GAAG,EAAEjC,EAAE;EAEX,IAAI4N,OAAO,GAAG,IAAIkB,GAAG,CAAC,CAAC;EAEvB,IAAI;IACF,KAAK,IAAIC,eAAe,GAAG,IAAAzS,eAAQ,EAACgR,aAAa,CAAC,EAAE0B,iBAAiB,GAAGD,eAAe,CAACpS,IAAI,CAAC,CAAC,EAAE,CAACqS,iBAAiB,CAACnS,IAAI,EAAEmS,iBAAiB,GAAGD,eAAe,CAACpS,IAAI,CAAC,CAAC,EAAE;MACnK,IAAIpB,CAAC,GAAGyT,iBAAiB,CAACpS,KAAK;MAE/B,IAAI,CAACgR,OAAO,CAACF,GAAG,CAACnS,CAAC,CAAC,EAAE;QACnBqS,OAAO,CAACqB,GAAG,CAAC1T,CAAC,EAAE,EAAE,CAAC;MACpB;MAEA,IAAIA,CAAC,CAACkS,MAAM,EAAE;QACZ,IAAI,CAACG,OAAO,CAACF,GAAG,CAACnS,CAAC,CAACkS,MAAM,CAAC,EAAE;UAC1BG,OAAO,CAACqB,GAAG,CAAC1T,CAAC,CAACkS,MAAM,EAAE,EAAE,CAAC;QAC3B;QAEAG,OAAO,CAACG,GAAG,CAACxS,CAAC,CAACkS,MAAM,CAAC,CAACxQ,IAAI,CAAC1B,CAAC,CAAC;MAC/B;IACF;EACF,CAAC,CAAC,OAAO8G,KAAK,EAAE;IACdJ,GAAG,GAAG;MACJ/E,KAAK,EAAEmF;IACT,CAAC;EACH,CAAC,SAAS;IACR,IAAI;MACF,IAAI2M,iBAAiB,IAAI,CAACA,iBAAiB,CAACnS,IAAI,KAAKmD,EAAE,GAAG+O,eAAe,CAAC1O,MAAM,CAAC,EAAEL,EAAE,CAACjE,IAAI,CAACgT,eAAe,CAAC;IAC7G,CAAC,SAAS;MACR,IAAI9M,GAAG,EAAE,MAAMA,GAAG,CAAC/E,KAAK;IAC1B;EACF;EAEA,OAAO0Q,OAAO;AAChB;AAEA,SAASsB,QAAQA,CAACC,QAAQ,EAAE7B,aAAa,EAAE;EACzC,IAAI8B,MAAM,GAAGtC,gBAAgB,CAAC,CAACqC,QAAQ,CAAC,EAAE7B,aAAa,CAAC;EACxD,OAAOmB,eAAe,CAACU,QAAQ,EAAE9B,UAAU,CAAC+B,MAAM,CAAC,CAAC;AACtD;AAEA,SAAS1B,GAAGA,CAAC2B,QAAQ,EAAElP,IAAI,EAAE;EAC3B,IAAIyE,KAAK,CAAC7F,OAAO,CAACsQ,QAAQ,CAAC,EAAE;IAC3B,OAAOA,QAAQ,CAACC,IAAI,CAAC,UAAUC,MAAM,EAAE;MACrC,OAAOA,MAAM,KAAKpP,IAAI;IACxB,CAAC,CAAC;EACJ;EAEA,IAAIkP,QAAQ,YAAYlC,GAAG,EAAE;IAC3B,OAAOkC,QAAQ,CAAC3B,GAAG,CAACvN,IAAI,CAAC;EAC3B;EAEA,OAAO,KAAK,CAAC,CAAC;AAChB;;AAEA,SAASqP,UAAUA,CAAClC,aAAa,EAAE;EACjC,OAAO,IAAAjM,cAAO,EAAC,IAAAlE,eAAQ,EAAC,IAAIgQ,GAAG,CAACG,aAAa,CAAChM,GAAG,CAAC,UAAU2M,EAAE,EAAE;IAC9D,OAAOA,EAAE,CAACwB,SAAS;EACrB,CAAC,CAAC,CAAC,CAAC,CAAC;AACP;AAEA,SAASC,cAAcA,CAACpC,aAAa,EAAEZ,SAAS,EAAE;EAChD,IAAIA,SAAS,CAAC/N,IAAI,KAAK,UAAU,EAAE;IACjC,OAAOgO,WAAW,CAACD,SAAS,CAAC,CAAC4C,IAAI,CAAC,UAAU/T,CAAC,EAAE;MAC9C,OAAOA,CAAC,CAACoD,IAAI,KAAK,OAAO,IAAI+O,GAAG,CAACJ,aAAa,EAAE/R,CAAC,CAAC;IACpD,CAAC,CAAC;EACJ;EAEA,IAAImR,SAAS,CAAC/N,IAAI,KAAK,UAAU,EAAE;IACjC,OAAOgO,WAAW,CAACD,SAAS,CAAC,CAACnO,KAAK,CAAC,UAAU0P,EAAE,EAAE;MAChD,OAAOyB,cAAc,CAACpC,aAAa,EAAEW,EAAE,CAAC;IAC1C,CAAC,CAAC;EACJ;EAEA,OAAO,KAAK;AACd;;;;;;;;;;;ACvPA,IAAAvQ,MAAA,GAAAC,OAAA;AACA,IAAAC,UAAA,GAAAD,OAAA;AACA,IAAA+I,MAAA,GAAA/I,OAAA;AACA,IAAAgS,WAAA,GAAAhS,OAAA;AACA,IAAAiS,QAAA,GAAAjS,OAAA;AAEA,SAASkS,gBAAgBA,CAACC,CAAC,EAAEC,CAAC,EAAE;EAC9B,IAAID,CAAC,KAAKC,CAAC,EAAE;IACX,OAAO,IAAI;EACb;EAEA,IAAID,CAAC,KAAKlO,SAAS,IAAImO,CAAC,KAAKnO,SAAS,EAAE;IACtC,OAAO,KAAK;EACd;EAEA,IAAI,IAAAtD,eAAQ,EAACwR,CAAC,CAAC,IAAI,IAAAxR,eAAQ,EAACyR,CAAC,CAAC,EAAE;IAC9B,OAAOD,CAAC,KAAKC,CAAC;EAChB;EAEA,IAAIC,KAAK,GAAG,IAAAlS,WAAI,EAACgS,CAAC,CAAC;EACnB,IAAIG,KAAK,GAAG,IAAAnS,WAAI,EAACiS,CAAC,CAAC;EACnB,OAAOC,KAAK,CAACrU,MAAM,KAAKsU,KAAK,CAACtU,MAAM,IAAIqU,KAAK,CAACzR,KAAK,CAAC,UAAUC,GAAG,EAAE;IACjE,OAAOqR,gBAAgB,CAACC,CAAC,CAACtR,GAAG,CAAC,EAAEuR,CAAC,CAACvR,GAAG,CAAC,CAAC;EACzC,CAAC,CAAC;AACJ;AAEA,SAAS0R,OAAOA,CAAC/Q,KAAK,EAAE;EACtB,IAAI,IAAAb,eAAQ,EAACa,KAAK,CAAC,EAAE;IACnB,OAAO,KAAK;EACd;EAEA,OAAO,OAAO,IAAIA,KAAK,IAAI,SAAS,IAAIA,KAAK;AAC/C;AAEA,SAASgR,iBAAiBA,CAAC/L,MAAM,EAAEjF,KAAK,EAAE;EACxC,IAAIsK,IAAI,GAAGrF,MAAM,CAACqF,IAAI;EAEtB,IAAI2G,WAAW,GAAG,IAAAlV,eAAQ,EAAC,IAAAA,eAAQ,EAAC,CAAC,CAAC,EAAEkJ,MAAM,CAAC,EAAE;IAC/CqF,IAAI,EAAEA,IAAI,KAAK7H,SAAS,GAAG,YAAY;MACrC,OAAO6H,IAAI,CAACtK,KAAK,CAAC4C,OAAO,EAAE5C,KAAK,CAACT,KAAK,EAAE;QACtC0F,MAAM,EAAEA,MAAM;QACdjF,KAAK,EAAEA,KAAK;QACZ6C,MAAM,EAAE7C,KAAK,CAAC6C;MAChB,CAAC,CAAC;IACJ,CAAC,GAAGJ;EACN,CAAC,CAAC;EAEF,OAAOwO,WAAW;AACpB;AAEA,IAAIC,KAAK,GAAAlV,OAAA,CAAAkV,KAAA,GACT;;AAEA;AACA,YAAY;EACV;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACE,SAASA,KAAKA,CAACjB,MAAM,EAAE;IACrB,IAAIkB,KAAK,GAAG,IAAI;IAEhB,IAAI,CAACvG,OAAO,GAAG,EAAE;IACjB,IAAI,CAACwG,UAAU,GAAGjT,6BAAkB;IACpC,IAAI,CAAC6G,IAAI,GAAG,CAAC,CAAC;IACd,IAAI,CAACqM,MAAM,GAAG,EAAE;IAChB,IAAI,CAAC5T,KAAK,GAAGwS,MAAM,CAACxS,KAAK;IACzB,IAAI,CAACmF,OAAO,GAAGqN,MAAM,CAACrN,OAAO;IAC7B,IAAI,CAACC,MAAM,GAAGoN,MAAM,CAACpN,MAAM;IAC3B,IAAI,CAACyO,UAAU,GAAGrB,MAAM,CAACqB,UAAU;IACnC,IAAI,CAAC/R,KAAK,GAAG,IAAI,CAACsD,MAAM,CAACG,IAAI;IAC7B,IAAI,CAACuO,YAAY,GAAGtB,MAAM,CAACsB,YAAY;IACvC,IAAI,CAACC,OAAO,GAAGvB,MAAM,CAACuB,OAAO;IAC7B,IAAI,CAAC5G,OAAO,GAAGqF,MAAM,CAACrF,OAAO,IAAI,EAAE;IACnC,IAAI,CAACwG,UAAU,GAAGnB,MAAM,CAACmB,UAAU,IAAIjT,6BAAkB;IACzD,IAAI,CAAC6G,IAAI,GAAGiL,MAAM,CAACjL,IAAI,IAAI,CAAC,CAAC;IAC7B,IAAI,CAACqM,MAAM,GAAGpB,MAAM,CAACoB,MAAM,IAAI,EAAE;IACjC,IAAI,CAACI,OAAO,GAAG,IAAI,CAACA,OAAO,CAACC,IAAI,CAAC,IAAI,CAAC;IACtC,IAAI,CAACC,SAAS,GAAG,IAAI,CAACA,SAAS,CAACD,IAAI,CAAC,IAAI,CAAC;IAC1C,IAAI,CAACvD,aAAa,GAAG8B,MAAM,CAAC9B,aAAa;IACzC,IAAI,CAACvH,WAAW,GAAGqJ,MAAM,CAACrJ,WAAW;IACrC,IAAI,CAACgL,QAAQ,GAAG3B,MAAM,CAAC2B,QAAQ;IAC/B,IAAI,CAAClU,IAAI,GAAG,CAAC,CAACuS,MAAM,CAACvS,IAAI;IACzBzB,MAAM,CAACuO,cAAc,CAAC,IAAI,EAAE,YAAY,EAAE;MACxCoE,GAAG,EAAE,SAAAA,CAAA,EAAY;QACf,OAAO,IAAAyB,sBAAU,EAACc,KAAK,CAAChD,aAAa,CAAC;MACxC;IACF,CAAC,CAAC;EACJ;EACA;AACF;AACA;AACA;AACA;;EAGE+C,KAAK,CAACW,IAAI,GAAG,UAAU5R,UAAU,EAAE2C,OAAO,EAAE;IAC1C,IAAI3C,UAAU,YAAYiR,KAAK,EAAE;MAC/B,IAAIjR,UAAU,CAAC2C,OAAO,KAAKA,OAAO,EAAE;QAClC,OAAO,IAAIsO,KAAK,CAAC;UACfzT,KAAK,EAAEwC,UAAU,CAACxC,KAAK;UACvBmF,OAAO,EAAEA,OAAO;UAChBC,MAAM,EAAE5C,UAAU,CAAC4C,MAAM;UACzByO,UAAU,EAAE,IAAI;UAChBC,YAAY,EAAEtR,UAAU,CAACsR,YAAY;UACrCC,OAAO,EAAEvR,UAAU,CAACuR,OAAO;UAC3B5G,OAAO,EAAE,EAAE;UACXwG,UAAU,EAAEnR,UAAU,CAACmR,UAAU;UACjCpM,IAAI,EAAE,CAAC,CAAC;UACRqM,MAAM,EAAE,EAAE;UACVlD,aAAa,EAAE,EAAE;UACjBvH,WAAW,EAAE,EAAE;UACfgL,QAAQ,EAAE,CAAC;QACb,CAAC,CAAC;MACJ;MAEA,OAAO3R,UAAU;IACnB;IAEA,IAAI4C,MAAM,GAAGmH,kBAAS;IACtB,OAAO,IAAIkH,KAAK,CAAC;MACfzT,KAAK,EAAEwC,UAAU;MACjB2C,OAAO,EAAEA,OAAO;MAChBC,MAAM,EAAEA,MAAM;MACdyO,UAAU,EAAE,IAAI;MAChBC,YAAY,EAAE9O,SAAS;MACvB+O,OAAO,EAAE/O,SAAS;MAClBmI,OAAO,EAAE,EAAE;MACXwG,UAAU,EAAE3O,SAAS;MACrBuC,IAAI,EAAEvC,SAAS;MACf4O,MAAM,EAAE,EAAE;MACVlD,aAAa,EAAE,EAAE;MACjBvH,WAAW,EAAE,EAAE;MACfgL,QAAQ,EAAE,CAAC;IACb,CAAC,CAAC;EACJ,CAAC;EACD;AACF;AACA;AACA;;EAGEV,KAAK,CAACY,MAAM,GAAG,UAAU7B,MAAM,EAAE;IAC/B,OAAO,IAAIiB,KAAK,CAACjB,MAAM,CAAC;EAC1B,CAAC;EACD;AACF;AACA;AACA;AACA;;EAGEiB,KAAK,CAACa,KAAK,GAAG,UAAU9R,UAAU,EAAE2C,OAAO,EAAE;IAC3C,IAAI3C,UAAU,YAAYiR,KAAK,EAAE;MAC/B,IAAI,CAACjR,UAAU,CAAC2K,OAAO,CAACpO,MAAM,EAAE;QAC9B,OAAOyD,UAAU;MACnB;MAEA,IAAI4C,MAAM,GAAGmH,kBAAS;MACtB,OAAO,IAAIkH,KAAK,CAAC;QACfzT,KAAK,EAAEwC,UAAU,CAACxC,KAAK;QACvBmF,OAAO,EAAEA,OAAO;QAChBC,MAAM,EAAEA,MAAM;QACdyO,UAAU,EAAE,IAAI;QAChBC,YAAY,EAAEtR,UAAU,CAACsR,YAAY;QACrCC,OAAO,EAAEvR,UAAU,CAACuR,OAAO;QAC3BJ,UAAU,EAAEnR,UAAU,CAACmR,UAAU;QACjCjD,aAAa,EAAElO,UAAU,CAACkO,aAAa;QACvCvH,WAAW,EAAE,EAAE;QACfgL,QAAQ,EAAE,CAAC;MACb,CAAC,CAAC;IACJ;IAEA,OAAOV,KAAK,CAACW,IAAI,CAAC5R,UAAU,EAAE2C,OAAO,CAAC;EACxC,CAAC;EACD;AACF;AACA;AACA;AACA;;EAGEsO,KAAK,CAACxU,SAAS,CAACiV,SAAS,GAAG,UAAU1R,UAAU,EAAElB,SAAS,EAAE;IAC3D,IAAIoS,KAAK,GAAG,IAAI;IAEhB,IAAIlR,UAAU,KAAK,KAAK,CAAC,EAAE;MACzBA,UAAU,GAAG,IAAI,CAACxC,KAAK;IACzB;IAEA,IAAIsB,SAAS,KAAK,KAAK,CAAC,EAAE;MACxBA,SAAS,GAAG,GAAG;IACjB;IAEA,IAAI,IAAAI,eAAQ,EAACc,UAAU,CAAC,EAAE;MACxB,OAAO,CAACA,UAAU,CAAC;IACrB;IAEA,IAAI+R,SAAS,GAAG,IAAArT,WAAI,EAACsB,UAAU,CAAC;IAChC,OAAO+R,SAAS,CAAC/T,MAAM,CAACpB,KAAK,CAACmV,SAAS,EAAE,IAAAhU,eAAQ,EAACgU,SAAS,CAAC7P,GAAG,CAAC,UAAU9C,GAAG,EAAE;MAC7E,OAAO8R,KAAK,CAACQ,SAAS,CAAC1R,UAAU,CAACZ,GAAG,CAAC,EAAEN,SAAS,CAAC,CAACoD,GAAG,CAAC,UAAU/F,CAAC,EAAE;QAClE,OAAOiD,GAAG,GAAGN,SAAS,GAAG3C,CAAC;MAC5B,CAAC,CAAC;IACJ,CAAC,CAAC,CAAC,CAAC;EACN,CAAC;EAED8U,KAAK,CAACxU,SAAS,CAACuV,MAAM,GAAG,YAAY;IACnC,IAAIpR,EAAE,GAAG,IAAI;MACTsN,aAAa,GAAGtN,EAAE,CAACsN,aAAa;MAChCvH,WAAW,GAAG/F,EAAE,CAAC+F,WAAW;MAC5BsL,UAAU,GAAG,IAAApV,aAAM,EAAC+D,EAAE,EAAE,CAAC,eAAe,EAAE,aAAa,CAAC,CAAC;IAE7D,OAAOqR,UAAU;EACnB,CAAC;EACD;AACF;AACA;AACA;;EAGEhB,KAAK,CAACxU,SAAS,CAAC+U,OAAO,GAAG,UAAUzS,gBAAgB,EAAE;IACpD,OAAO,IAAAJ,mBAAY,EAACI,gBAAgB,EAAE,IAAI,CAACvB,KAAK,CAAC;EACnD,CAAC;EAED,OAAOyT,KAAK;AACd,CAAC,CAAC,CAAC;;;;;;;;;;ACxOH,SAASiB,eAAeA,CAAChL,EAAE,EAAE;EAC3B,OAAO;IACLA,EAAE,EAAEA,EAAE;IACNkB,IAAI,EAAE,SAAAA,CAAA,EAAY;MAChB,OAAO,KAAK,CAAC;IACf,CAAC;IACDvC,SAAS,EAAE,SAAAA,CAAA,EAAY;MACrB,OAAO;QACLsM,WAAW,EAAE,SAAAA,CAAA,EAAY;UACvB,OAAO,KAAK,CAAC;QACf;MACF,CAAC;IACH,CAAC;IACDH,MAAM,EAAE,SAAAA,CAAA,EAAY;MAClB,OAAO;QACL9K,EAAE,EAAEA;MACN,CAAC;IACH;EACF,CAAC;AACH;AACA;AACA;AACA;AACA;AACA;AACA;;AAGA,SAASkL,oBAAoBA,CAACC,gBAAgB,EAAE;EAC9C,IAAIC,SAAS,GAAGJ,eAAe,CAACG,gBAAgB,CAACnL,EAAE,CAAC;EACpDoL,SAAS,CAACvN,IAAI,GAAGsN,gBAAgB;EACjC,OAAOC,SAAS;AAClB;AAEA,SAASC,OAAOA,CAACxR,IAAI,EAAE;EACrB,IAAI;IACF,OAAO,OAAOA,IAAI,CAACqH,IAAI,KAAK,UAAU;EACxC,CAAC,CAAC,OAAOtL,CAAC,EAAE;IACV,OAAO,KAAK;EACd;AACF;;;;;;;;ACxCA,IAAAwB,MAAA,GAAAC,OAAA;AACA,IAAAC,UAAA,GAAAD,OAAA;AACA,IAAAE,YAAA,GAAAF,OAAA;AACA,IAAA+I,MAAA,GAAA/I,OAAA;AACA,IAAAsJ,MAAA,GAAAtJ,OAAA;AACA,IAAAgS,WAAA,GAAAhS,OAAA;AACA,IAAAuL,YAAA,GAAAvL,OAAA;AACA,IAAAiS,QAAA,GAAAjS,OAAA;AACA,IAAAiU,MAAA,GAAAjU,OAAA;AACA,IAAAkU,MAAA,GAAAlU,OAAA;AACA,IAAImU,UAAU,GAAG,EAAE;AACnB,IAAIC,gBAAgB,GAAG,GAAG;AAC1B,IAAIC,QAAQ,GAAG,GAAG;AAClB,IAAIC,YAAY,GAAG,CAAC,CAAC;AAErB,IAAIC,SAAS,GAAG,SAAAA,CAAUC,GAAG,EAAE;EAC7B,OAAOA,GAAG,CAAC,CAAC,CAAC,KAAKJ,gBAAgB;AACpC,CAAC;AAED,IAAIK,oBAAoB,GAAG,SAAAA,CAAA,EAAY;EACrC,OAAO;IACLrI,OAAO,EAAE,CAAC,CAAC;IACXsI,MAAM,EAAE,CAAC,CAAC;IACVC,QAAQ,EAAE,CAAC,CAAC;IACZ/B,UAAU,EAAE,CAAC,CAAC;IACdgC,MAAM,EAAE,CAAC;EACX,CAAC;AACH,CAAC;AAED,IAAIC,6BAA6B,GAAG,SAAAA,CAAU9F,SAAS,EAAEhO,KAAK,EAAEqH,WAAW,EAAE;EAC3E,IAAI0M,yBAAyB,GAAG1M,WAAW,CAAC2M,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAACpD,IAAI,CAAC,UAAUqD,UAAU,EAAE;IAClF,OAAO,EAAE,MAAM,IAAIA,UAAU,CAAC,IAAI,EAAE,IAAI,IAAIA,UAAU,CAAC,KAAK,IAAArU,eAAQ,EAACqU,UAAU,CAAC1M,MAAM,CAAC,IAAI,IAAAb,gBAAS,EAACuN,UAAU,CAAC1M,MAAM,CAAC,CAAC;EAC1H,CAAC,CAAC;EACF,IAAI2M,SAAS,GAAGlU,KAAK,KAAKoT,UAAU,GAAG,qBAAqB,GAAG,SAAS,GAAGpT,KAAK,GAAG,GAAG;EACtF,IAAAkF,WAAI,EAAC,CAAC6O,yBAAyB,EAAE,8BAA8B,GAAGG,SAAS,GAAG,aAAa,GAAGlG,SAAS,CAACpG,EAAE,GAAG,qBAAqB,GAAG,gEAAgE,CAAC;AACxM,CAAC;AAED,IAAIuM,SAAS,GAAA1X,OAAA,CAAA0X,SAAA,GACb;;AAEA;AACA,YAAY;EACV,SAASA,SAASA;EAClB;AACF;AACA;EACEzD,MAAM,EAAE9E,OAAO;EACf;AACF;AACA;EACEvI,OAAO,EAAE;IACP,IAAIuO,KAAK,GAAG,IAAI;IAEhB,IAAI,CAAClB,MAAM,GAAGA,MAAM;IACpB,IAAI,CAACrN,OAAO,GAAGA,OAAO;IACtB;AACJ;AACA;;IAEI,IAAI,CAAC+Q,KAAK,GAAG,CAAC,CAAC;IACf,IAAI,CAACC,YAAY,GAAG,IAAI;IACxB,IAAI,CAACC,OAAO,GAAG;MACbxC,MAAM,EAAE5O,SAAS;MACjBqR,aAAa,EAAE,IAAInE,GAAG,CAAC,CAAC;MACxBoE,iBAAiB,EAAEtR,SAAS;MAC5BuR,YAAY,EAAEvR,SAAS;MACvBwR,EAAE,EAAExR,SAAS;MACbmE,WAAW,EAAEnE,SAAS;MACtByR,UAAU,EAAE,CAAC,CAAC;MACdC,kBAAkB,EAAE1R;IACtB,CAAC;IACD,IAAI,CAAC2R,KAAK,GAAG,CAAC,CAAC;IACf,IAAI,CAACjJ,OAAO,GAAGlP,MAAM,CAACC,MAAM,CAAC+W,oBAAoB,CAAC,CAAC,EAAE9H,OAAO,CAAC;IAC7D,IAAI,CAACmD,MAAM,GAAG,IAAI,CAACnD,OAAO,CAACkJ,OAAO;IAClC,IAAI,CAAChV,GAAG,GAAG,IAAI,CAAC4Q,MAAM,CAAC5Q,GAAG,IAAI,IAAI,CAAC8L,OAAO,CAACmJ,IAAI,IAAI,IAAI,CAACrE,MAAM,CAAC9I,EAAE,IAAI,WAAW;IAChF,IAAI,CAACoN,OAAO,GAAG,IAAI,CAACjG,MAAM,GAAG,IAAI,CAACA,MAAM,CAACiG,OAAO,GAAG,IAAI;IACvD,IAAI,CAACpT,IAAI,GAAG,IAAI,CAACmN,MAAM,GAAG,IAAI,CAACA,MAAM,CAACnN,IAAI,CAAClD,MAAM,CAAC,IAAI,CAACoB,GAAG,CAAC,GAAG,EAAE;IAChE,IAAI,CAACN,SAAS,GAAG,IAAI,CAACkR,MAAM,CAAClR,SAAS,KAAK,IAAI,CAACuP,MAAM,GAAG,IAAI,CAACA,MAAM,CAACvP,SAAS,GAAGb,0BAAe,CAAC;IACjG,IAAI,CAACiJ,EAAE,GAAG,IAAI,CAAC8I,MAAM,CAAC9I,EAAE,IAAI,IAAAnJ,eAAQ,EAAC,CAAC,IAAI,CAACuW,OAAO,CAAClV,GAAG,CAAC,EAAE,IAAI,CAAC8B,IAAI,CAAC,CAACqT,IAAI,CAAC,IAAI,CAACzV,SAAS,CAAC;IACxF,IAAI,CAAC0V,OAAO,GAAG,IAAI,CAACnG,MAAM,GAAG,IAAI,CAACA,MAAM,CAACmG,OAAO,GAAG,IAAI,CAACxE,MAAM,CAACwE,OAAO;IACtE,IAAI,CAACjV,IAAI,GAAG,IAAI,CAACyQ,MAAM,CAACzQ,IAAI,KAAK,IAAI,CAACyQ,MAAM,CAACyE,QAAQ,GAAG,UAAU,GAAG,IAAI,CAACzE,MAAM,CAAC9L,MAAM,IAAI,IAAAxF,WAAI,EAAC,IAAI,CAACsR,MAAM,CAAC9L,MAAM,CAAC,CAAC3H,MAAM,GAAG,UAAU,GAAG,IAAI,CAACyT,MAAM,CAACuB,OAAO,GAAG,SAAS,GAAG,QAAQ,CAAC;IAErL,IAAI,CAAClT,0BAAa,EAAE;MAClB,IAAAmG,WAAI,EAAC,EAAE,UAAU,IAAI,IAAI,CAACwL,MAAM,CAAC,EAAE,8EAA8E,IAAI,IAAI,CAACA,MAAM,CAACyE,QAAQ,GAAG,iCAAiC,GAAG,cAAc,GAAG,IAAI,CAAClV,IAAI,GAAG,IAAI,CAAC,GAAG,iCAAiC,GAAG,IAAI,CAAC2H,EAAE,GAAG,YAAY,CAAC;IAClR;IAEA,IAAI,CAACwN,OAAO,GAAG,IAAI,CAAC1E,MAAM,CAAC0E,OAAO;IAClC,IAAI,CAACxQ,MAAM,GAAG,IAAI,CAAC8L,MAAM,CAAC9L,MAAM,GAAG,IAAA9D,gBAAS,EAAC,IAAI,CAAC4P,MAAM,CAAC9L,MAAM,EAAE,UAAUyQ,WAAW,EAAEvV,GAAG,EAAE;MAC3F,IAAIwB,EAAE;MAEN,IAAI0M,SAAS,GAAG,IAAImG,SAAS,CAACkB,WAAW,EAAE;QACzCP,OAAO,EAAElD,KAAK;QACdmD,IAAI,EAAEjV;MACR,CAAC,CAAC;MACFpD,MAAM,CAACC,MAAM,CAACiV,KAAK,CAACiD,KAAK,EAAE,IAAArY,eAAQ,GAAE8E,EAAE,GAAG,CAAC,CAAC,EAAEA,EAAE,CAAC0M,SAAS,CAACpG,EAAE,CAAC,GAAGoG,SAAS,EAAE1M,EAAE,GAAG0M,SAAS,CAAC6G,KAAK,CAAC,CAAC;MAClG,OAAO7G,SAAS;IAClB,CAAC,CAAC,GAAGuF,YAAY,CAAC,CAAC;;IAEnB,IAAIa,KAAK,GAAG,CAAC;IAEb,SAASkB,GAAGA,CAACtH,SAAS,EAAE;MACtB,IAAI3M,GAAG,EAAEC,EAAE;MAEX0M,SAAS,CAACoG,KAAK,GAAGA,KAAK,EAAE;MAEzB,IAAI;QACF,KAAK,IAAI7S,EAAE,GAAG,IAAA3D,eAAQ,EAAC,IAAAqQ,uBAAW,EAACD,SAAS,CAAC,CAAC,EAAExM,EAAE,GAAGD,EAAE,CAACtD,IAAI,CAAC,CAAC,EAAE,CAACuD,EAAE,CAACrD,IAAI,EAAEqD,EAAE,GAAGD,EAAE,CAACtD,IAAI,CAAC,CAAC,EAAE;UACxF,IAAI0R,KAAK,GAAGnO,EAAE,CAACtD,KAAK;UACpBoX,GAAG,CAAC3F,KAAK,CAAC;QACZ;MACF,CAAC,CAAC,OAAOjO,KAAK,EAAE;QACdL,GAAG,GAAG;UACJ7C,KAAK,EAAEkD;QACT,CAAC;MACH,CAAC,SAAS;QACR,IAAI;UACF,IAAIF,EAAE,IAAI,CAACA,EAAE,CAACrD,IAAI,KAAKmD,EAAE,GAAGC,EAAE,CAACI,MAAM,CAAC,EAAEL,EAAE,CAACjE,IAAI,CAACkE,EAAE,CAAC;QACrD,CAAC,SAAS;UACR,IAAIF,GAAG,EAAE,MAAMA,GAAG,CAAC7C,KAAK;QAC1B;MACF;IACF;IAEA8W,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC;;IAEX,IAAI,CAACrD,OAAO,GAAG,IAAI,CAACvB,MAAM,CAACuB,OAAO,KAAK,IAAI,GAAG,SAAS,GAAG,IAAI,CAACvB,MAAM,CAACuB,OAAO,IAAI,KAAK;IACtF,IAAI,CAACsD,UAAU,GAAG,CAAC,IAAI,CAAC7E,MAAM,CAACgE,EAAE,GAAG,KAAK,GAAGxO,KAAK,CAAC7F,OAAO,CAAC,IAAI,CAACqQ,MAAM,CAACgE,EAAE,CAAC,GAAG,IAAI,CAAChE,MAAM,CAACgE,EAAE,CAAC9D,IAAI,CAAC,UAAUtP,EAAE,EAAE;MAC5G,IAAItB,KAAK,GAAGsB,EAAE,CAACtB,KAAK;MACpB,OAAOA,KAAK,KAAKoT,UAAU;IAC7B,CAAC,CAAC,GAAGA,UAAU,IAAI,IAAI,CAAC1C,MAAM,CAACgE,EAAE;IACjC,IAAI,CAACc,MAAM,GAAG,CAAC,CAAC,IAAI,CAAC9E,MAAM,CAAC8E,MAAM,CAAC,CAAC;;IAEpC,IAAI,CAACC,OAAO,GAAG,IAAAxS,cAAO,EAAC,IAAI,CAACyN,MAAM,CAACgF,KAAK,IAAI,IAAI,CAAChF,MAAM,CAAC+E,OAAO,CAAC,CAAC7S,GAAG,CAAC,UAAU8C,MAAM,EAAE;MACrF,OAAO,IAAAmF,uBAAc,EAACnF,MAAM,CAAC;IAC/B,CAAC,CAAC,CAAC,CAAC;;IAEJ,IAAI,CAACiQ,MAAM,GAAG,IAAA1S,cAAO,EAAC,IAAI,CAACyN,MAAM,CAACkF,IAAI,IAAI,IAAI,CAAClF,MAAM,CAACiF,MAAM,CAAC,CAAC/S,GAAG,CAAC,UAAU8C,MAAM,EAAE;MAClF,OAAO,IAAAmF,uBAAc,EAACnF,MAAM,CAAC;IAC/B,CAAC,CAAC;IACF,IAAI,CAACD,IAAI,GAAG,IAAI,CAACiL,MAAM,CAACjL,IAAI;IAC5B,IAAI,CAAChC,IAAI,GAAG,IAAI,CAACxD,IAAI,KAAK,OAAO,GAAG,IAAI,CAACyQ,MAAM,CAACjN,IAAI,GAAGP,SAAS;IAChE,IAAI,CAAC2G,MAAM,GAAG,IAAA5G,cAAO,EAAC,IAAI,CAACyN,MAAM,CAAC7G,MAAM,CAAC,CAACjH,GAAG,CAAC,UAAUiT,YAAY,EAAE/Y,CAAC,EAAE;MACvE,IAAIwE,EAAE,EAAEC,EAAE;MAEV,IAAI,IAAAmF,gBAAS,EAACmP,YAAY,CAAC,EAAE;QAC3BjE,KAAK,CAACoD,OAAO,CAACpJ,OAAO,CAACgI,QAAQ,GAAG,IAAApX,eAAQ,GAAE8E,EAAE,GAAG,CAAC,CAAC,EAAEA,EAAE,CAACuU,YAAY,CAACjO,EAAE,CAAC,GAAGiO,YAAY,EAAEvU,EAAE,GAAGsQ,KAAK,CAACoD,OAAO,CAACpJ,OAAO,CAACgI,QAAQ,CAAC;QAC5H,OAAO;UACL3T,IAAI,EAAE4J,mBAAM;UACZiM,GAAG,EAAED,YAAY,CAACjO,EAAE;UACpBA,EAAE,EAAEiO,YAAY,CAACjO;QACnB,CAAC;MACH,CAAC,MAAM,IAAI,OAAOiO,YAAY,CAACC,GAAG,KAAK,QAAQ,EAAE;QAC/C,IAAIC,SAAS,GAAGnE,KAAK,CAAChK,EAAE,GAAG,cAAc,GAAG9K,CAAC,GAAG,GAAG,CAAC,CAAC;;QAErD8U,KAAK,CAACoD,OAAO,CAACpJ,OAAO,CAACgI,QAAQ,GAAG,IAAApX,eAAQ,GAAE+E,EAAE,GAAG,CAAC,CAAC,EAAEA,EAAE,CAACwU,SAAS,CAAC,GAAGF,YAAY,CAACC,GAAG,EAAEvU,EAAE,GAAGqQ,KAAK,CAACoD,OAAO,CAACpJ,OAAO,CAACgI,QAAQ,CAAC;QAC1H,OAAO,IAAApX,eAAQ,EAAC,IAAAA,eAAQ,EAAC;UACvByD,IAAI,EAAE4J,mBAAM;UACZjC,EAAE,EAAEmO;QACN,CAAC,EAAEF,YAAY,CAAC,EAAE;UAChBC,GAAG,EAAEC;QACP,CAAC,CAAC;MACJ,CAAC,MAAM;QACL,OAAO,IAAAvZ,eAAQ,EAAC,IAAAA,eAAQ,EAAC,CAAC,CAAC,EAAEqZ,YAAY,CAAC,EAAE;UAC1C5V,IAAI,EAAE4J,mBAAM;UACZjC,EAAE,EAAEiO,YAAY,CAACjO,EAAE,IAAIiO,YAAY,CAACC,GAAG;UACvCA,GAAG,EAAED,YAAY,CAACC;QACpB,CAAC,CAAC;MACJ;IACF,CAAC,CAAC;IACF,IAAI,CAACjE,UAAU,GAAG,IAAA5O,cAAO,EAAC,IAAI,CAACyN,MAAM,CAACmB,UAAU,CAAC,CAACnT,MAAM,CAAC,IAAI,CAACmL,MAAM,CAAC,CAACjH,GAAG,CAAC,UAAUwK,QAAQ,EAAE;MAC5F,OAAO,IAAA7B,6BAAoB,EAAC6B,QAAQ,CAAC;IACvC,CAAC,CAAC;IACF,IAAI,CAAC6G,UAAU,GAAG,IAAI,CAACA,UAAU,CAAC9B,IAAI,CAAC,IAAI,CAAC;EAC9C;EAEAgC,SAAS,CAAChX,SAAS,CAAC6Y,KAAK,GAAG,YAAY;IACtC,IAAI,IAAI,CAAC1B,OAAO,CAACjN,WAAW,EAAE;MAC5B;IACF;IAEA,IAAA6G,4BAAgB,EAAC,IAAI,CAAC,CAACoB,OAAO,CAAC,UAAUtB,SAAS,EAAE;MAClD,OAAOA,SAAS,CAAC0G,EAAE;IACrB,CAAC,CAAC;EACJ,CAAC;EACD;AACF;AACA;AACA;AACA;AACA;;EAGEP,SAAS,CAAChX,SAAS,CAAC8Y,UAAU,GAAG,UAAUrK,OAAO,EAAEvI,OAAO,EAAE;IAC3D,IAAIA,OAAO,KAAK,KAAK,CAAC,EAAE;MACtBA,OAAO,GAAG,IAAI,CAACA,OAAO;IACxB;IAEA,IAAI/B,EAAE,GAAG,IAAI,CAACsK,OAAO;MACjBP,OAAO,GAAG/J,EAAE,CAAC+J,OAAO;MACpBwG,UAAU,GAAGvQ,EAAE,CAACuQ,UAAU;MAC1B8B,MAAM,GAAGrS,EAAE,CAACqS,MAAM;MAClBC,QAAQ,GAAGtS,EAAE,CAACsS,QAAQ;MACtBC,MAAM,GAAGvS,EAAE,CAACuS,MAAM;IACtB,OAAO,IAAIM,SAAS,CAAC,IAAI,CAACzD,MAAM,EAAE;MAChCrF,OAAO,EAAE,IAAA7O,eAAQ,EAAC,IAAAA,eAAQ,EAAC,CAAC,CAAC,EAAE6O,OAAO,CAAC,EAAEO,OAAO,CAACP,OAAO,CAAC;MACzDwG,UAAU,EAAE,IAAArV,eAAQ,EAAC,IAAAA,eAAQ,EAAC,CAAC,CAAC,EAAEqV,UAAU,CAAC,EAAEjG,OAAO,CAACiG,UAAU,CAAC;MAClE8B,MAAM,EAAE,IAAAnX,eAAQ,EAAC,IAAAA,eAAQ,EAAC,CAAC,CAAC,EAAEmX,MAAM,CAAC,EAAE/H,OAAO,CAAC+H,MAAM,CAAC;MACtDC,QAAQ,EAAE,IAAApX,eAAQ,EAAC,IAAAA,eAAQ,EAAC,CAAC,CAAC,EAAEoX,QAAQ,CAAC,EAAEhI,OAAO,CAACgI,QAAQ,CAAC;MAC5DC,MAAM,EAAE,IAAArX,eAAQ,EAAC,IAAAA,eAAQ,EAAC,CAAC,CAAC,EAAEqX,MAAM,CAAC,EAAEjI,OAAO,CAACiI,MAAM;IACvD,CAAC,EAAExQ,OAAO,CAAC;EACb,CAAC;EACD;AACF;AACA;AACA;AACA;;EAGE8Q,SAAS,CAAChX,SAAS,CAAC+Y,WAAW,GAAG,UAAU7S,OAAO,EAAE;IACnD,OAAO,IAAI8Q,SAAS,CAAC,IAAI,CAACzD,MAAM,EAAE,IAAI,CAAC9E,OAAO,EAAEvI,OAAO,CAAC;EAC1D,CAAC;EAED3G,MAAM,CAACuO,cAAc,CAACkJ,SAAS,CAAChX,SAAS,EAAE,YAAY,EAAE;IACvD;AACJ;AACA;IACIkS,GAAG,EAAE,SAAAA,CAAA,EAAY;MACf,OAAO;QACLzH,EAAE,EAAE,IAAI,CAACA,EAAE;QACX9H,GAAG,EAAE,IAAI,CAACA,GAAG;QACboV,OAAO,EAAE,IAAI,CAACA,OAAO;QACrB7R,OAAO,EAAE,IAAI,CAACA,OAAO;QACrBpD,IAAI,EAAE,IAAI,CAACA,IAAI;QACfmV,OAAO,EAAE,IAAI,CAACA,OAAO;QACrBnD,OAAO,EAAE,IAAI,CAACA,OAAO;QACrBrN,MAAM,EAAE,IAAA9D,gBAAS,EAAC,IAAI,CAAC8D,MAAM,EAAE,UAAUnE,KAAK,EAAE;UAC9C,OAAOA,KAAK,CAAC0V,UAAU;QACzB,CAAC,CAAC;QACFzB,EAAE,EAAE,IAAI,CAACA,EAAE;QACXrN,WAAW,EAAE,IAAI,CAACA,WAAW;QAC7BqO,KAAK,EAAE,IAAI,CAACD,OAAO;QACnBG,IAAI,EAAE,IAAI,CAACD,MAAM;QACjB9D,UAAU,EAAE,IAAI,CAACA,UAAU,IAAI,EAAE;QACjCpM,IAAI,EAAE,IAAI,CAACA,IAAI;QACf2O,KAAK,EAAE,IAAI,CAACA,KAAK,IAAI,CAAC,CAAC;QACvB3Q,IAAI,EAAE,IAAI,CAACA,IAAI;QACfoG,MAAM,EAAE,IAAI,CAACA;MACf,CAAC;IACH,CAAC;IACDqB,UAAU,EAAE,IAAI;IAChBC,YAAY,EAAE;EAChB,CAAC,CAAC;EAEFgJ,SAAS,CAAChX,SAAS,CAACuV,MAAM,GAAG,YAAY;IACvC,OAAO,IAAI,CAACyD,UAAU;EACxB,CAAC;EAEDzZ,MAAM,CAACuO,cAAc,CAACkJ,SAAS,CAAChX,SAAS,EAAE,IAAI,EAAE;IAC/C;AACJ;AACA;IACIkS,GAAG,EAAE,SAAAA,CAAA,EAAY;MACf,IAAI,IAAI,CAACiF,OAAO,CAACI,EAAE,EAAE;QACnB,OAAO,IAAI,CAACJ,OAAO,CAACI,EAAE;MACxB;MAEA,IAAIrN,WAAW,GAAG,IAAI,CAACA,WAAW;MAClC,OAAO,IAAI,CAACiN,OAAO,CAACI,EAAE,GAAGrN,WAAW,CAACjC,MAAM,CAAC,UAAUxC,GAAG,EAAEqR,UAAU,EAAE;QACrErR,GAAG,CAACqR,UAAU,CAACpQ,SAAS,CAAC,GAAGjB,GAAG,CAACqR,UAAU,CAACpQ,SAAS,CAAC,IAAI,EAAE;QAC3DjB,GAAG,CAACqR,UAAU,CAACpQ,SAAS,CAAC,CAACtF,IAAI,CAAC0V,UAAU,CAAC;QAC1C,OAAOrR,GAAG;MACZ,CAAC,EAAE,CAAC,CAAC,CAAC;IACR,CAAC;IACDsI,UAAU,EAAE,IAAI;IAChBC,YAAY,EAAE;EAChB,CAAC,CAAC;EACFzO,MAAM,CAACuO,cAAc,CAACkJ,SAAS,CAAChX,SAAS,EAAE,OAAO,EAAE;IAClDkS,GAAG,EAAE,SAAAA,CAAA,EAAY;MACf,OAAO,IAAI,CAACiF,OAAO,CAACM,kBAAkB,KAAK,IAAI,CAACN,OAAO,CAACM,kBAAkB,GAAG,IAAI,CAACwB,qBAAqB,CAAC,CAAC,EAAE,IAAI,CAAC9B,OAAO,CAACM,kBAAkB,CAAC;IAC7I,CAAC;IACD1J,UAAU,EAAE,IAAI;IAChBC,YAAY,EAAE;EAChB,CAAC,CAAC;EACFzO,MAAM,CAACuO,cAAc,CAACkJ,SAAS,CAAChX,SAAS,EAAE,aAAa,EAAE;IACxD;AACJ;AACA;IACIkS,GAAG,EAAE,SAAAA,CAAA,EAAY;MACf,OAAO,IAAI,CAACiF,OAAO,CAACjN,WAAW,KAAK,IAAI,CAACiN,OAAO,CAACjN,WAAW,GAAG,IAAI,CAACgP,iBAAiB,CAAC,CAAC,EAAE,IAAI,CAAC/B,OAAO,CAACjN,WAAW,CAAC;IACpH,CAAC;IACD6D,UAAU,EAAE,IAAI;IAChBC,YAAY,EAAE;EAChB,CAAC,CAAC;EAEFgJ,SAAS,CAAChX,SAAS,CAACmZ,aAAa,GAAG,UAAUC,SAAS,EAAE;IACvD,IAAI,IAAI,CAACjC,OAAO,CAACK,UAAU,CAAC4B,SAAS,CAAC,EAAE;MACtC,OAAO,IAAI,CAACjC,OAAO,CAACK,UAAU,CAAC4B,SAAS,CAAC;IAC3C;IAEA,IAAIC,SAAS,GAAGD,SAAS,KAAKnD,UAAU;IACxC,IAAIuB,UAAU,GAAG,IAAI,CAACtN,WAAW,CAACoP,MAAM,CAAC,UAAUxC,UAAU,EAAE;MAC7D,IAAIyC,aAAa,GAAGzC,UAAU,CAACpQ,SAAS,KAAK0S,SAAS,CAAC,CAAC;;MAExD,OAAOC,SAAS,GAAGE,aAAa,GAAGA,aAAa,IAAIzC,UAAU,CAACpQ,SAAS,KAAKyP,QAAQ;IACvF,CAAC,CAAC;IACF,IAAI,CAACgB,OAAO,CAACK,UAAU,CAAC4B,SAAS,CAAC,GAAG5B,UAAU;IAC/C,OAAOA,UAAU;EACnB,CAAC;EACD;AACF;AACA;;EAGER,SAAS,CAAChX,SAAS,CAACiZ,qBAAqB,GAAG,YAAY;IACtD,IAAIxE,KAAK,GAAG,IAAI;IAEhB,IAAI+E,WAAW,GAAG,IAAI,CAACjG,MAAM,CAACrH,KAAK;IAEnC,IAAI,CAACsN,WAAW,EAAE;MAChB,OAAO,EAAE;IACX;IAEA,IAAIC,eAAe,GAAG,SAAAA,CAAU9K,KAAK,EAAEhP,CAAC,EAAE;MACxC,IAAIyQ,QAAQ,GAAG,IAAA/J,iBAAU,EAACsI,KAAK,CAAC,GAAG8F,KAAK,CAAChK,EAAE,GAAG,SAAS,GAAG9K,CAAC,GAAG,GAAG,GAAGgP,KAAK;MACzE,IAAIjI,SAAS,GAAG,IAAAwF,cAAK,EAACkE,QAAQ,EAAEqE,KAAK,CAAChK,EAAE,CAAC;MAEzCgK,KAAK,CAAC6D,OAAO,CAAClX,IAAI,CAAC,IAAAsN,aAAM,EAAChI,SAAS,EAAE;QACnCiI,KAAK,EAAEA;MACT,CAAC,CAAC,CAAC;MAEH8F,KAAK,CAAC+D,MAAM,CAACpX,IAAI,CAAC,IAAAyK,eAAM,EAACnF,SAAS,CAAC,CAAC;MAEpC,OAAOA,SAAS;IAClB,CAAC;IAED,IAAI+Q,kBAAkB,GAAG,IAAAvU,cAAO,EAACsW,WAAW,CAAC,GAAGA,WAAW,CAAC/T,GAAG,CAAC,UAAUqR,UAAU,EAAEnX,CAAC,EAAE;MACvF,IAAI+G,SAAS,GAAG+S,eAAe,CAAC3C,UAAU,CAACnI,KAAK,EAAEhP,CAAC,CAAC;MACpD,OAAO,IAAAN,eAAQ,EAAC,IAAAA,eAAQ,EAAC,CAAC,CAAC,EAAEyX,UAAU,CAAC,EAAE;QACxCjU,KAAK,EAAE6D;MACT,CAAC,CAAC;IACJ,CAAC,CAAC,GAAG,IAAAlB,cAAO,EAAC,IAAAvD,WAAI,EAACuX,WAAW,CAAC,CAAC/T,GAAG,CAAC,UAAUkJ,KAAK,EAAEhP,CAAC,EAAE;MACrD,IAAI+Z,gBAAgB,GAAGF,WAAW,CAAC7K,KAAK,CAAC;MACzC,IAAIgL,kBAAkB,GAAG,IAAAlX,eAAQ,EAACiX,gBAAgB,CAAC,GAAG;QACpDtP,MAAM,EAAEsP;MACV,CAAC,GAAGA,gBAAgB;MACpB,IAAI1K,aAAa,GAAG,CAAC4K,KAAK,CAAC,CAACjL,KAAK,CAAC,GAAG,CAACA,KAAK,GAAGA,KAAK;MACnD,IAAIjI,SAAS,GAAG+S,eAAe,CAACzK,aAAa,EAAErP,CAAC,CAAC;MACjD,OAAO,IAAAmG,cAAO,EAAC6T,kBAAkB,CAAC,CAAClU,GAAG,CAAC,UAAUqR,UAAU,EAAE;QAC3D,OAAO,IAAAzX,eAAQ,EAAC,IAAAA,eAAQ,EAAC,CAAC,CAAC,EAAEyX,UAAU,CAAC,EAAE;UACxCjU,KAAK,EAAE6D,SAAS;UAChBiI,KAAK,EAAEK;QACT,CAAC,CAAC;MACJ,CAAC,CAAC;IACJ,CAAC,CAAC,CAAC;IACH,OAAOyI,kBAAkB,CAAChS,GAAG,CAAC,UAAUoU,iBAAiB,EAAE;MACzD,IAAIlL,KAAK,GAAGkL,iBAAiB,CAAClL,KAAK;MACnC,OAAO,IAAAtP,eAAQ,EAAC,IAAAA,eAAQ,EAAC,CAAC,CAAC,EAAEoV,KAAK,CAACqF,gBAAgB,CAACD,iBAAiB,CAAC,CAAC,EAAE;QACvElL,KAAK,EAAEA;MACT,CAAC,CAAC;IACJ,CAAC,CAAC;EACJ,CAAC;EACD;AACF;AACA;AACA;AACA;;EAGEqI,SAAS,CAAChX,SAAS,CAAC+Z,aAAa,GAAG,UAAUzW,KAAK,EAAE;IACnD,IAAIa,EAAE;IAEN,IAAIsQ,KAAK,GAAG,IAAI;IAEhB,IAAI,CAACnR,KAAK,EAAE;MACV,OAAO,EAAE;IACX;IAEA,IAAIC,UAAU,GAAGD,KAAK,YAAYkR,YAAK,GAAGlR,KAAK,CAACvC,KAAK,GAAG,IAAAwB,mBAAY,EAACe,KAAK,EAAE,IAAI,CAACjB,SAAS,CAAC;IAE3F,IAAI,IAAAI,eAAQ,EAACc,UAAU,CAAC,EAAE;MACxB,IAAI8T,iBAAiB,GAAG,IAAI,CAAC2C,YAAY,CAACzW,UAAU,CAAC,CAAC0U,OAAO;MAC7D,OAAOZ,iBAAiB,KAAKtR,SAAS,GAAG,IAAI,CAACgU,aAAa,EAAE5V,EAAE,GAAG,CAAC,CAAC,EAAEA,EAAE,CAACZ,UAAU,CAAC,GAAG8T,iBAAiB,EAAElT,EAAE,CAAC,CAAC,GAAG,CAAC,IAAI,CAACsD,MAAM,CAAClE,UAAU,CAAC,CAAC;IAC5I;IAEA,IAAI0W,YAAY,GAAG,IAAAhY,WAAI,EAACsB,UAAU,CAAC;IACnC,IAAI2W,aAAa,GAAGD,YAAY,CAACxU,GAAG,CAAC,UAAU0U,WAAW,EAAE;MAC1D,OAAO1F,KAAK,CAACuF,YAAY,CAACG,WAAW,CAAC;IACxC,CAAC,CAAC;IACF,OAAOD,aAAa,CAAC3Y,MAAM,CAAC0Y,YAAY,CAAChS,MAAM,CAAC,UAAUmS,gBAAgB,EAAED,WAAW,EAAE;MACvF,IAAIE,YAAY,GAAG5F,KAAK,CAACuF,YAAY,CAACG,WAAW,CAAC,CAACJ,aAAa,CAACxW,UAAU,CAAC4W,WAAW,CAAC,CAAC;MAEzF,OAAOC,gBAAgB,CAAC7Y,MAAM,CAAC8Y,YAAY,CAAC;IAC9C,CAAC,EAAE,EAAE,CAAC,CAAC;EACT,CAAC;EACD;AACF;AACA;AACA;AACA;;EAGErD,SAAS,CAAChX,SAAS,CAACsa,OAAO,GAAG,UAAUzX,KAAK,EAAE;IAC7C,IAAI6D,SAAS,GAAG,IAAA9D,mBAAY,EAACC,KAAK,CAAC;IACnC,OAAO,IAAI,CAAC8R,MAAM,CAAC4F,QAAQ,CAAC7T,SAAS,CAAC;EACxC,CAAC;EACD;AACF;AACA;AACA;AACA;AACA;AACA;;EAGEsQ,SAAS,CAAChX,SAAS,CAACwa,YAAY,GAAG,UAAUlX,KAAK,EAAE;IAClD,IAAImO,aAAa,GAAG1I,KAAK,CAACoM,IAAI,CAAC,IAAAlE,4BAAgB,EAAC,EAAE,EAAE,IAAI,CAAC8I,aAAa,CAACzW,KAAK,CAACvC,KAAK,CAAC,CAAC,CAAC;IACrF,OAAO,IAAIyT,YAAK,CAAC,IAAAnV,eAAQ,EAAC,IAAAA,eAAQ,EAAC,CAAC,CAAC,EAAEiE,KAAK,CAAC,EAAE;MAC7CvC,KAAK,EAAE,IAAI,CAAC0Z,OAAO,CAACnX,KAAK,CAACvC,KAAK,CAAC;MAChC0Q,aAAa,EAAEA;IACjB,CAAC,CAAC,CAAC;EACL,CAAC;EAEDuF,SAAS,CAAChX,SAAS,CAAC0a,kBAAkB,GAAG,UAAUnX,UAAU,EAAED,KAAK,EAAE6C,MAAM,EAAE;IAC5E,IAAI0K,SAAS,GAAG,IAAI,CAACmJ,YAAY,CAACzW,UAAU,CAAC;IAC7C,IAAIzC,IAAI,GAAG+P,SAAS,CAAC/P,IAAI,CAACwC,KAAK,EAAE6C,MAAM,CAAC;IAExC,IAAI,CAACrF,IAAI,IAAI,CAACA,IAAI,CAACoJ,WAAW,CAACpK,MAAM,EAAE;MACrC,OAAO,IAAI,CAACgB,IAAI,CAACwC,KAAK,EAAE6C,MAAM,CAAC;IACjC;IAEA,OAAOrF,IAAI;EACb,CAAC;EAEDkW,SAAS,CAAChX,SAAS,CAAC2a,sBAAsB,GAAG,UAAUpX,UAAU,EAAED,KAAK,EAAE6C,MAAM,EAAE;IAChF,IAAI8T,YAAY,GAAG,IAAAhY,WAAI,EAACsB,UAAU,CAAC;IACnC,IAAIsN,SAAS,GAAG,IAAI,CAACmJ,YAAY,CAACC,YAAY,CAAC,CAAC,CAAC,CAAC;IAElD,IAAInZ,IAAI,GAAG+P,SAAS,CAAC+J,WAAW,CAACrX,UAAU,CAAC0W,YAAY,CAAC,CAAC,CAAC,CAAC,EAAE3W,KAAK,EAAE6C,MAAM,CAAC;IAE5E,IAAI,CAACrF,IAAI,IAAI,CAACA,IAAI,CAACoJ,WAAW,CAACpK,MAAM,EAAE;MACrC,OAAO,IAAI,CAACgB,IAAI,CAACwC,KAAK,EAAE6C,MAAM,CAAC;IACjC;IAEA,OAAOrF,IAAI;EACb,CAAC;EAEDkW,SAAS,CAAChX,SAAS,CAAC6a,sBAAsB,GAAG,UAAUtX,UAAU,EAAED,KAAK,EAAE6C,MAAM,EAAE;IAChF,IAAIvB,GAAG,EAAET,EAAE;IAEX,IAAI2W,aAAa,GAAG,CAAC,CAAC;IAEtB,IAAI;MACF,KAAK,IAAI1W,EAAE,GAAG,IAAA3D,eAAQ,EAAC,IAAAwB,WAAI,EAACsB,UAAU,CAAC,CAAC,EAAEc,EAAE,GAAGD,EAAE,CAACtD,IAAI,CAAC,CAAC,EAAE,CAACuD,EAAE,CAACrD,IAAI,EAAEqD,EAAE,GAAGD,EAAE,CAACtD,IAAI,CAAC,CAAC,EAAE;QAClF,IAAIqZ,WAAW,GAAG9V,EAAE,CAACtD,KAAK;QAC1B,IAAI2E,aAAa,GAAGnC,UAAU,CAAC4W,WAAW,CAAC;QAE3C,IAAI,CAACzU,aAAa,EAAE;UAClB;QACF;QAEA,IAAI2U,YAAY,GAAG,IAAI,CAACL,YAAY,CAACG,WAAW,CAAC;QAEjD,IAAIrZ,IAAI,GAAGuZ,YAAY,CAACO,WAAW,CAAClV,aAAa,EAAEpC,KAAK,EAAE6C,MAAM,CAAC;QAEjE,IAAIrF,IAAI,EAAE;UACRga,aAAa,CAACX,WAAW,CAAC,GAAGrZ,IAAI;QACnC;MACF;IACF,CAAC,CAAC,OAAOkE,KAAK,EAAE;MACdJ,GAAG,GAAG;QACJvD,KAAK,EAAE2D;MACT,CAAC;IACH,CAAC,SAAS;MACR,IAAI;QACF,IAAIX,EAAE,IAAI,CAACA,EAAE,CAACrD,IAAI,KAAKmD,EAAE,GAAGC,EAAE,CAACI,MAAM,CAAC,EAAEL,EAAE,CAACjE,IAAI,CAACkE,EAAE,CAAC;MACrD,CAAC,SAAS;QACR,IAAIQ,GAAG,EAAE,MAAMA,GAAG,CAACvD,KAAK;MAC1B;IACF;IAEA,IAAI0Z,gBAAgB,GAAG,IAAA9Y,WAAI,EAAC6Y,aAAa,CAAC,CAACrV,GAAG,CAAC,UAAU9C,GAAG,EAAE;MAC5D,OAAOmY,aAAa,CAACnY,GAAG,CAAC;IAC3B,CAAC,CAAC;IACF,IAAIqY,kBAAkB,GAAG,IAAAxV,cAAO,EAACuV,gBAAgB,CAACtV,GAAG,CAAC,UAAUwV,EAAE,EAAE;MAClE,OAAOA,EAAE,CAAC/Q,WAAW;IACvB,CAAC,CAAC,CAAC;IACH,IAAIgR,cAAc,GAAGH,gBAAgB,CAACtH,IAAI,CAAC,UAAUwH,EAAE,EAAE;MACvD,OAAOA,EAAE,CAAC/Q,WAAW,CAACpK,MAAM,GAAG,CAAC;IAClC,CAAC,CAAC;IAEF,IAAI,CAACob,cAAc,EAAE;MACnB,OAAO,IAAI,CAACpa,IAAI,CAACwC,KAAK,EAAE6C,MAAM,CAAC;IACjC;IAEA,IAAIgV,UAAU,GAAG,IAAA3V,cAAO,EAACuV,gBAAgB,CAACtV,GAAG,CAAC,UAAUhG,CAAC,EAAE;MACzD,OAAOA,CAAC,CAAC2b,QAAQ;IACnB,CAAC,CAAC,CAAC;IACH,IAAI3J,aAAa,GAAG,IAAAjM,cAAO,EAAC,IAAAvD,WAAI,EAAC6Y,aAAa,CAAC,CAACrV,GAAG,CAAC,UAAU9C,GAAG,EAAE;MACjE,OAAOmY,aAAa,CAACnY,GAAG,CAAC,CAAC8O,aAAa;IACzC,CAAC,CAAC,CAAC;IACH,OAAO;MACLvH,WAAW,EAAE8Q,kBAAkB;MAC/BI,QAAQ,EAAED,UAAU;MACpBE,OAAO,EAAE,IAAA7V,cAAO,EAACuV,gBAAgB,CAACtV,GAAG,CAAC,UAAUhG,CAAC,EAAE;QACjD,OAAOA,CAAC,CAAC4b,OAAO;MAClB,CAAC,CAAC,CAAC;MACH5J,aAAa,EAAEA,aAAa;MAC5B6J,MAAM,EAAEhY,KAAK;MACb4K,OAAO,EAAE,IAAA1I,cAAO,EAAC,IAAAvD,WAAI,EAAC6Y,aAAa,CAAC,CAACrV,GAAG,CAAC,UAAU9C,GAAG,EAAE;QACtD,OAAOmY,aAAa,CAACnY,GAAG,CAAC,CAACuL,OAAO;MACnC,CAAC,CAAC;IACJ,CAAC;EACH,CAAC;EAED8I,SAAS,CAAChX,SAAS,CAAC4a,WAAW,GAAG,UAAUrX,UAAU,EAAED,KAAK,EAAE6C,MAAM,EAAE;IACrE;IACA,IAAI,IAAA1D,eAAQ,EAACc,UAAU,CAAC,EAAE;MACxB,OAAO,IAAI,CAACmX,kBAAkB,CAACnX,UAAU,EAAED,KAAK,EAAE6C,MAAM,CAAC;IAC3D,CAAC,CAAC;;IAGF,IAAI,IAAAlE,WAAI,EAACsB,UAAU,CAAC,CAACzD,MAAM,KAAK,CAAC,EAAE;MACjC,OAAO,IAAI,CAAC6a,sBAAsB,CAACpX,UAAU,EAAED,KAAK,EAAE6C,MAAM,CAAC;IAC/D,CAAC,CAAC;;IAGF,OAAO,IAAI,CAAC0U,sBAAsB,CAACtX,UAAU,EAAED,KAAK,EAAE6C,MAAM,CAAC;EAC/D,CAAC;EAED6Q,SAAS,CAAChX,SAAS,CAACc,IAAI,GAAG,UAAUwC,KAAK,EAAE6C,MAAM,EAAE;IAClD,IAAIhB,GAAG,EAAEhB,EAAE;IAEX,IAAIsQ,KAAK,GAAG,IAAI;IAEhB,IAAI2E,SAAS,GAAGjT,MAAM,CAAC+C,IAAI;IAC3B,IAAIgF,OAAO,GAAG,EAAE;IAChB,IAAIqN,cAAc,GAAG,EAAE;IACvB,IAAIC,kBAAkB;IAEtB,IAAI;MACF,KAAK,IAAIpX,EAAE,GAAG,IAAA3D,eAAQ,EAAC,IAAI,CAAC0Y,aAAa,CAACC,SAAS,CAAC,CAAC,EAAE/U,EAAE,GAAGD,EAAE,CAACtD,IAAI,CAAC,CAAC,EAAE,CAACuD,EAAE,CAACrD,IAAI,EAAEqD,EAAE,GAAGD,EAAE,CAACtD,IAAI,CAAC,CAAC,EAAE;QAC/F,IAAI2a,SAAS,GAAGpX,EAAE,CAACtD,KAAK;QACxB,IAAI2a,IAAI,GAAGD,SAAS,CAACC,IAAI;UACrBC,OAAO,GAAGF,SAAS,CAACG,EAAE;QAC1B,IAAIC,eAAe,GAAGvY,KAAK,CAAC4C,OAAO;QACnC,IAAI4V,SAAS,GAAGH,OAAO,GAAG,IAAAlZ,eAAQ,EAACkZ,OAAO,CAAC,IAAItF,SAAS,CAACsF,OAAO,CAAC;QAAG;QACpErY,KAAK,CAACyR,OAAO,CAAC,IAAAxS,mBAAY,EAAC,IAAI,CAACwZ,gBAAgB,CAACJ,OAAO,CAAC,CAAClX,IAAI,EAAE,IAAI,CAACpC,SAAS,CAAC,CAAC;QAAG;QACnF,IAAAH,mBAAY,EAAC,IAAAK,mBAAY,EAACoZ,OAAO,EAAE,IAAI,CAACtZ,SAAS,CAAC,EAAE,IAAAoC,WAAI,EAAC,IAAI,CAACA,IAAI,CAACoS,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAACvT,KAAK,CAACvC,KAAK,CAAC,CAAC,GAAG,IAAI;QACrG,IAAIib,WAAW,GAAG,KAAK;QAEvB,IAAI;UACFA,WAAW,GAAG,CAACN,IAAI,IAAI,IAAI,CAACO,aAAa,CAACP,IAAI,EAAEG,eAAe,EAAE1V,MAAM,EAAE7C,KAAK,CAAC;QACjF,CAAC,CAAC,OAAO4Y,GAAG,EAAE;UACZ,MAAM,IAAInZ,KAAK,CAAC,4BAA4B,IAAI2Y,IAAI,CAACxS,IAAI,IAAIwS,IAAI,CAAC5Y,IAAI,CAAC,GAAG,6BAA6B,GAAGsW,SAAS,GAAG,mBAAmB,GAAG,IAAI,CAAC3O,EAAE,GAAG,MAAM,GAAGyR,GAAG,CAACtT,OAAO,CAAC;QAC7K;QAEA,IAAIoT,WAAW,IAAIF,SAAS,EAAE;UAC5B,IAAIL,SAAS,CAACrR,MAAM,KAAKrE,SAAS,EAAE;YAClCwV,cAAc,GAAGE,SAAS,CAACrR,MAAM;UACnC;UAEA8D,OAAO,CAAC9M,IAAI,CAACjB,KAAK,CAAC+N,OAAO,EAAE,IAAA5M,eAAQ,EAACma,SAAS,CAACvN,OAAO,CAAC,CAAC;UACxDsN,kBAAkB,GAAGC,SAAS;UAC9B;QACF;MACF;IACF,CAAC,CAAC,OAAOnW,KAAK,EAAE;MACdH,GAAG,GAAG;QACJ9D,KAAK,EAAEiE;MACT,CAAC;IACH,CAAC,SAAS;MACR,IAAI;QACF,IAAIjB,EAAE,IAAI,CAACA,EAAE,CAACrD,IAAI,KAAKmD,EAAE,GAAGC,EAAE,CAACI,MAAM,CAAC,EAAEL,EAAE,CAACjE,IAAI,CAACkE,EAAE,CAAC;MACrD,CAAC,SAAS;QACR,IAAIe,GAAG,EAAE,MAAMA,GAAG,CAAC9D,KAAK;MAC1B;IACF;IAEA,IAAI,CAACma,kBAAkB,EAAE;MACvB,OAAOzV,SAAS;IAClB;IAEA,IAAI,CAACwV,cAAc,CAACzb,MAAM,EAAE;MAC1B,OAAO;QACLoK,WAAW,EAAE,CAACsR,kBAAkB,CAAC;QACjCJ,QAAQ,EAAE,EAAE;QACZC,OAAO,EAAE,EAAE;QACX5J,aAAa,EAAEnO,KAAK,CAACvC,KAAK,GAAG,CAAC,IAAI,CAAC,GAAG,EAAE;QACxCua,MAAM,EAAEhY,KAAK;QACb4K,OAAO,EAAEA;MACX,CAAC;IACH;IAEA,IAAIiO,iBAAiB,GAAG,IAAA3W,cAAO,EAAC+V,cAAc,CAAC9V,GAAG,CAAC,UAAUoL,SAAS,EAAE;MACtE,OAAO4D,KAAK,CAAC2H,qBAAqB,CAACvL,SAAS,EAAEvN,KAAK,CAACuR,YAAY,CAAC;IACnE,CAAC,CAAC,CAAC;IACH,IAAIwH,UAAU,GAAG,CAAC,CAACb,kBAAkB,CAACc,QAAQ;IAC9C,IAAIC,YAAY,GAAGF,UAAU,GAAG,EAAE,GAAG,IAAA7W,cAAO,EAAC2W,iBAAiB,CAAC1W,GAAG,CAAC,UAAU7F,CAAC,EAAE;MAC9E,OAAO6U,KAAK,CAAC+H,cAAc,CAAC5c,CAAC,CAAC;IAChC,CAAC,CAAC,CAAC;IACH,OAAO;MACLsK,WAAW,EAAE,CAACsR,kBAAkB,CAAC;MACjCJ,QAAQ,EAAEmB,YAAY;MACtBlB,OAAO,EAAEgB,UAAU,GAAG,EAAE,GAAG,CAAC,IAAI,CAAC;MACjC5K,aAAa,EAAE0K,iBAAiB;MAChCb,MAAM,EAAEhY,KAAK;MACb4K,OAAO,EAAEA;IACX,CAAC;EACH,CAAC;EAED8I,SAAS,CAAChX,SAAS,CAACwc,cAAc,GAAG,UAAUzJ,cAAc,EAAE;IAC7D,IAAIA,cAAc,CAAC0J,OAAO,CAAC,IAAI,CAAC,EAAE;MAChC,OAAO,EAAE;IACX;IAEA,IAAIC,KAAK,GAAG,EAAE;IACd,IAAIhZ,MAAM,GAAGqP,cAAc;IAE3B,OAAOrP,MAAM,IAAIA,MAAM,KAAK,IAAI,EAAE;MAChCgZ,KAAK,CAACtb,IAAI,CAACsC,MAAM,CAAC;MAClBA,MAAM,GAAGA,MAAM,CAACkO,MAAM;IACxB;IAEA8K,KAAK,CAACtb,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;;IAElB,OAAOsb,KAAK;EACd,CAAC;EACD;AACF;AACA;AACA;;EAGE1F,SAAS,CAAChX,SAAS,CAACyc,OAAO,GAAG,UAAU5L,SAAS,EAAE;IACjD,IAAI,IAAI,KAAKA,SAAS,EAAE;MACtB,OAAO,KAAK;IACd;IAEA,IAAIe,MAAM,GAAG,IAAI,CAACA,MAAM;IAExB,OAAOA,MAAM,EAAE;MACb,IAAIA,MAAM,KAAKf,SAAS,EAAE;QACxB,OAAO,KAAK;MACd;MAEAe,MAAM,GAAGA,MAAM,CAACA,MAAM;IACxB;IAEA,OAAO,IAAI;EACb,CAAC;EAEDoF,SAAS,CAAChX,SAAS,CAACic,aAAa,GAAG,UAAUU,KAAK,EAAEzW,OAAO,EAAEC,MAAM,EAAE7C,KAAK,EAAE;IAC3E,IAAIkT,MAAM,GAAG,IAAI,CAACqB,OAAO,CAACpJ,OAAO,CAAC+H,MAAM;IACxC,IAAIoG,SAAS,GAAG;MACdtZ,KAAK,EAAEA,KAAK;MACZoY,IAAI,EAAEiB,KAAK;MACXxW,MAAM,EAAEA;IACV,CAAC,CAAC,CAAC;;IAEH,IAAIwW,KAAK,CAAC7Z,IAAI,KAAKpB,6BAAkB,EAAE;MACrC,OAAOib,KAAK,CAAC1Y,SAAS,CAACiC,OAAO,EAAEC,MAAM,CAACG,IAAI,EAAEsW,SAAS,CAAC;IACzD;IAEA,IAAIC,MAAM,GAAGrG,MAAM,CAACmG,KAAK,CAAC7Z,IAAI,CAAC;IAE/B,IAAI,CAAC+Z,MAAM,EAAE;MACX,MAAM,IAAI9Z,KAAK,CAAC,SAAS,GAAG4Z,KAAK,CAAC7Z,IAAI,GAAG,mCAAmC,GAAG,IAAI,CAAC+U,OAAO,CAACpN,EAAE,GAAG,IAAI,CAAC;IACxG;IAEA,OAAOoS,MAAM,CAAC3W,OAAO,EAAEC,MAAM,CAACG,IAAI,EAAEsW,SAAS,CAAC;EAChD,CAAC;EAED5F,SAAS,CAAChX,SAAS,CAAC8c,UAAU,GAAG,UAAUhG,UAAU,EAAEiG,cAAc,EAAE5W,MAAM,EAAE6W,SAAS,EAAE;IACxF,IAAI7L,GAAG,EAAEhN,EAAE,EAAEiC,GAAG,EAAEhC,EAAE;IAEpB,IAAI6Y,UAAU,GAAG,IAAAhM,4BAAgB,EAAC,EAAE,EAAE+L,SAAS,GAAG,IAAI,CAACjD,aAAa,CAACiD,SAAS,CAACjc,KAAK,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;IAC/F,IAAImc,cAAc,GAAGpG,UAAU,CAACrF,aAAa,CAAC3R,MAAM,GAAG,IAAAmR,4BAAgB,EAACgM,UAAU,EAAEnG,UAAU,CAACrF,aAAa,CAAC,GAAGwL,UAAU;IAE1H,IAAI;MACF,KAAK,IAAIE,gBAAgB,GAAG,IAAA1c,eAAQ,EAACyc,cAAc,CAAC,EAAEE,kBAAkB,GAAGD,gBAAgB,CAACrc,IAAI,CAAC,CAAC,EAAE,CAACsc,kBAAkB,CAACpc,IAAI,EAAEoc,kBAAkB,GAAGD,gBAAgB,CAACrc,IAAI,CAAC,CAAC,EAAE;QAC1K,IAAIsR,EAAE,GAAGgL,kBAAkB,CAACrc,KAAK;QAEjC,IAAI,CAAC,IAAA8Q,eAAG,EAACoL,UAAU,EAAE7K,EAAE,CAAC,EAAE;UACxB0E,UAAU,CAACsE,QAAQ,CAACha,IAAI,CAACgR,EAAE,CAAC;QAC9B;MACF;IACF,CAAC,CAAC,OAAOO,KAAK,EAAE;MACdxB,GAAG,GAAG;QACJ9P,KAAK,EAAEsR;MACT,CAAC;IACH,CAAC,SAAS;MACR,IAAI;QACF,IAAIyK,kBAAkB,IAAI,CAACA,kBAAkB,CAACpc,IAAI,KAAKmD,EAAE,GAAGgZ,gBAAgB,CAAC3Y,MAAM,CAAC,EAAEL,EAAE,CAACjE,IAAI,CAACid,gBAAgB,CAAC;MACjH,CAAC,SAAS;QACR,IAAIhM,GAAG,EAAE,MAAMA,GAAG,CAAC9P,KAAK;MAC1B;IACF;IAEA,IAAI;MACF,KAAK,IAAIgc,YAAY,GAAG,IAAA5c,eAAQ,EAACwc,UAAU,CAAC,EAAEK,cAAc,GAAGD,YAAY,CAACvc,IAAI,CAAC,CAAC,EAAE,CAACwc,cAAc,CAACtc,IAAI,EAAEsc,cAAc,GAAGD,YAAY,CAACvc,IAAI,CAAC,CAAC,EAAE;QAC9I,IAAIsR,EAAE,GAAGkL,cAAc,CAACvc,KAAK;QAE7B,IAAI,CAAC,IAAA8Q,eAAG,EAACqL,cAAc,EAAE9K,EAAE,CAAC,IAAI,IAAAP,eAAG,EAACiF,UAAU,CAACuE,OAAO,EAAEjJ,EAAE,CAACR,MAAM,CAAC,EAAE;UAClEkF,UAAU,CAACuE,OAAO,CAACja,IAAI,CAACgR,EAAE,CAAC;QAC7B;MACF;IACF,CAAC,CAAC,OAAO5L,KAAK,EAAE;MACdJ,GAAG,GAAG;QACJ/E,KAAK,EAAEmF;MACT,CAAC;IACH,CAAC,SAAS;MACR,IAAI;QACF,IAAI8W,cAAc,IAAI,CAACA,cAAc,CAACtc,IAAI,KAAKoD,EAAE,GAAGiZ,YAAY,CAAC7Y,MAAM,CAAC,EAAEJ,EAAE,CAAClE,IAAI,CAACmd,YAAY,CAAC;MACjG,CAAC,SAAS;QACR,IAAIjX,GAAG,EAAE,MAAMA,GAAG,CAAC/E,KAAK;MAC1B;IACF;IAEA,IAAI,CAACyV,UAAU,CAACwE,MAAM,EAAE;MACtBxE,UAAU,CAACuE,OAAO,GAAG,EAAE,CAAC,CAAC;;MAEzBvE,UAAU,CAACsE,QAAQ,CAACha,IAAI,CAAC,IAAI,CAAC;IAChC;IAEA,IAAImc,UAAU,GAAG,IAAA/X,cAAO,EAACsR,UAAU,CAACsE,QAAQ,CAAC3V,GAAG,CAAC,UAAU2M,EAAE,EAAE;MAC7D,IAAIuC,MAAM,GAAG,EAAE;MAEf,IAAIvC,EAAE,CAACtP,IAAI,KAAK,OAAO,EAAE;QACvB,OAAO6R,MAAM;MACf;MAEA,IAAI/C,MAAM,GAAGQ,EAAE,CAACR,MAAM;MACtB+C,MAAM,CAACvT,IAAI,CAAC,IAAAJ,aAAI,EAACoR,EAAE,CAAC3H,EAAE,EAAE2H,EAAE,CAAC9L,IAAI,CAAC;MAAE;MAClC,IAAAtF,aAAI,EAAC4Q,MAAM,CAACnH,EAAE,EAAE2H,EAAE,CAAC9L,IAAI,GAAG,IAAAN,iBAAU,EAACoM,EAAE,CAAC9L,IAAI,EAAEyW,cAAc,EAAE5W,MAAM,CAAC,GAAGJ,SAAS,CAAC,CAAC;MAEnF,IAAI6L,MAAM,CAACA,MAAM,EAAE;QACjB,IAAI4L,WAAW,GAAG5L,MAAM,CAACA,MAAM;QAE/B,IAAI4L,WAAW,CAAC1a,IAAI,KAAK,UAAU,EAAE;UACnC,IAAI,IAAAgO,uBAAW,EAAC0M,WAAW,CAAC,CAAC9a,KAAK,CAAC,UAAU+a,UAAU,EAAE;YACvD,OAAO,IAAA5J,0BAAc,EAACiD,UAAU,CAACrF,aAAa,EAAEgM,UAAU,CAAC;UAC7D,CAAC,CAAC,EAAE;YACF9I,MAAM,CAACvT,IAAI,CAAC,IAAAJ,aAAI,EAACwc,WAAW,CAAC/S,EAAE,EAAE+S,WAAW,CAAClX,IAAI,CAAC,CAAC;UACrD;QACF;MACF;MAEA,OAAOqO,MAAM;IACf,CAAC,CAAC,CAAC;IACHmC,UAAU,CAACuE,OAAO,CAACqC,IAAI,CAAC,UAAUzJ,CAAC,EAAEC,CAAC,EAAE;MACtC,OAAOA,CAAC,CAAC+C,KAAK,GAAGhD,CAAC,CAACgD,KAAK;IAC1B,CAAC,CAAC;IACFH,UAAU,CAACsE,QAAQ,CAACsC,IAAI,CAAC,UAAUzJ,CAAC,EAAEC,CAAC,EAAE;MACvC,OAAOD,CAAC,CAACgD,KAAK,GAAG/C,CAAC,CAAC+C,KAAK;IAC1B,CAAC,CAAC;IACF,IAAI0G,WAAW,GAAG,IAAIrM,GAAG,CAACwF,UAAU,CAACsE,QAAQ,CAAC;IAC9C,IAAIwC,UAAU,GAAG,IAAItM,GAAG,CAACwF,UAAU,CAACuE,OAAO,CAAC;IAE5C,IAAIhX,EAAE,GAAG,IAAApD,aAAM,EAAC,CAAC,IAAAuE,cAAO,EAACuD,KAAK,CAACoM,IAAI,CAACwI,WAAW,CAAC,CAAClY,GAAG,CAAC,UAAUoL,SAAS,EAAE;QACxE,OAAO,IAAAvP,eAAQ,EAACuP,SAAS,CAAC6D,UAAU,CAACjP,GAAG,CAAC,UAAUwK,QAAQ,EAAE;UAC3D,OAAO,IAAA5E,cAAK,EAAC4E,QAAQ,CAAC;QACxB,CAAC,CAAC,EAAEY,SAAS,CAACyH,OAAO,CAAC;MACxB,CAAC,CAAC,CAAC,CAAC/W,MAAM,CAACgc,UAAU,CAAC9X,GAAG,CAACgG,cAAK,CAAC,CAAC,EAAE,IAAAjG,cAAO,EAACuD,KAAK,CAACoM,IAAI,CAACyI,UAAU,CAAC,CAACnY,GAAG,CAAC,UAAUoL,SAAS,EAAE;QACzF,OAAO,IAAAvP,eAAQ,EAACuP,SAAS,CAAC2H,MAAM,EAAE3H,SAAS,CAAC6D,UAAU,CAACjP,GAAG,CAAC,UAAUwK,QAAQ,EAAE;UAC7E,OAAO,IAAA1E,aAAI,EAAC0E,QAAQ,CAAC;QACvB,CAAC,CAAC,CAAC;MACL,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC;MACJ4N,YAAY,GAAGxZ,EAAE,CAAC,CAAC,CAAC;MACpByZ,WAAW,GAAGzZ,EAAE,CAAC,CAAC,CAAC;IAEvB,IAAI6J,OAAO,GAAG,IAAAD,wBAAe,EAAC6P,WAAW,CAACvc,MAAM,CAACuV,UAAU,CAAC5I,OAAO,CAAC,CAAC3M,MAAM,CAACsc,YAAY,CAAC,EAAE,IAAI,CAAChG,OAAO,CAACpJ,OAAO,CAACP,OAAO,CAAC;IACxH,OAAOA,OAAO;EAChB,CAAC;EACD;AACF;AACA;AACA;AACA;AACA;AACA;;EAGE8I,SAAS,CAAChX,SAAS,CAAC8W,UAAU,GAAG,UAAUxT,KAAK,EAAET,KAAK,EAAEqD,OAAO,EAAE;IAChE,IAAI5C,KAAK,KAAK,KAAK,CAAC,EAAE;MACpBA,KAAK,GAAG,IAAI,CAACgU,YAAY;IAC3B;IAEA,IAAInR,MAAM,GAAG,IAAAyD,mBAAY,EAAC/G,KAAK,CAAC;IAEhC,IAAIkb,YAAY;IAEhB,IAAIza,KAAK,YAAYkR,YAAK,EAAE;MAC1BuJ,YAAY,GAAG7X,OAAO,KAAKH,SAAS,GAAGzC,KAAK,GAAG,IAAI,CAACkX,YAAY,CAAChG,YAAK,CAACW,IAAI,CAAC7R,KAAK,EAAE4C,OAAO,CAAC,CAAC;IAC9F,CAAC,MAAM;MACL,IAAI8X,kBAAkB,GAAG,IAAAvb,eAAQ,EAACa,KAAK,CAAC,GAAG,IAAI,CAACmX,OAAO,CAAC,IAAAjX,uBAAgB,EAAC,IAAI,CAACya,eAAe,CAAC3a,KAAK,CAAC,CAAC,CAAC,GAAG,IAAI,CAACmX,OAAO,CAACnX,KAAK,CAAC;MAC5H,IAAIuY,eAAe,GAAG3V,OAAO,GAAGA,OAAO,GAAG,IAAI,CAAC2R,OAAO,CAAC3R,OAAO;MAC9D6X,YAAY,GAAG,IAAI,CAACvD,YAAY,CAAChG,YAAK,CAACW,IAAI,CAAC6I,kBAAkB,EAAEnC,eAAe,CAAC,CAAC;IACnF;IAEA,IAAI,CAACja,0BAAa,IAAIuE,MAAM,CAAC+C,IAAI,KAAKiN,QAAQ,EAAE;MAC9C,MAAM,IAAIpT,KAAK,CAAC,2CAA2C,GAAGoT,QAAQ,GAAG,IAAI,CAAC;IAChF;IAEA,IAAI,IAAI,CAACkC,MAAM,EAAE;MACf,IAAI,CAAC,IAAI,CAAC1D,MAAM,CAAC4F,QAAQ,CAACpU,MAAM,CAAC+C,IAAI,CAAC,IAAI,CAAC,IAAAzC,qBAAc,EAACN,MAAM,CAAC+C,IAAI,CAAC,EAAE;QACtE,MAAM,IAAInG,KAAK,CAAC,WAAW,GAAG,IAAI,CAAC0H,EAAE,GAAG,2BAA2B,GAAGtE,MAAM,CAAC+C,IAAI,GAAG,GAAG,CAAC;MAC1F;IACF;IAEA,IAAIgV,eAAe,GAAG,IAAI,CAACtD,WAAW,CAACmD,YAAY,CAAChd,KAAK,EAAEgd,YAAY,EAAE5X,MAAM,CAAC,IAAI;MAClF+D,WAAW,EAAE,EAAE;MACfuH,aAAa,EAAE,EAAE;MACjB2J,QAAQ,EAAE,EAAE;MACZC,OAAO,EAAE,EAAE;MACXC,MAAM,EAAEyC,YAAY;MACpB7P,OAAO,EAAE;IACX,CAAC;IACD,IAAI+O,UAAU,GAAG,IAAAhM,4BAAgB,EAAC,EAAE,EAAE,IAAI,CAAC8I,aAAa,CAACgE,YAAY,CAAChd,KAAK,CAAC,CAAC;IAC7E,IAAImc,cAAc,GAAGgB,eAAe,CAACzM,aAAa,CAAC3R,MAAM,GAAG,IAAAmR,4BAAgB,EAACgM,UAAU,EAAEiB,eAAe,CAACzM,aAAa,CAAC,GAAGwL,UAAU;IACpIiB,eAAe,CAACzM,aAAa,GAAG,IAAAnQ,eAAQ,EAAC4b,cAAc,CAAC;IACxD,OAAO,IAAI,CAACiB,iBAAiB,CAACD,eAAe,EAAEH,YAAY,EAAE5X,MAAM,CAAC;EACtE,CAAC;EAED6Q,SAAS,CAAChX,SAAS,CAACoe,uBAAuB,GAAG,UAAU9a,KAAK,EAAE6C,MAAM,EAAEkY,aAAa,EAAE;IACpF,IAAIla,EAAE;IAEN,IAAIma,cAAc,GAAGhb,KAAK,CAAC4K,OAAO;IAClC5K,KAAK,GAAG,IAAI,CAACwT,UAAU,CAACxT,KAAK,EAAE6C,MAAM,CAAC,CAAC,CAAC;;IAExC7C,KAAK,CAAC6C,MAAM,GAAGkY,aAAa;IAC5B/a,KAAK,CAACT,KAAK,GAAGwb,aAAa,CAAC/X,IAAI;IAEhC,CAACnC,EAAE,GAAGb,KAAK,CAAC4K,OAAO,EAAEqQ,OAAO,CAACpe,KAAK,CAACgE,EAAE,EAAE,IAAA7C,eAAQ,EAACgd,cAAc,CAAC,CAAC;IAEhE,OAAOhb,KAAK;EACd,CAAC;EAED0T,SAAS,CAAChX,SAAS,CAACme,iBAAiB,GAAG,UAAUD,eAAe,EAAEH,YAAY,EAAE5X,MAAM,EAAED,OAAO,EAAE;IAChG,IAAIe,GAAG,EAAE9C,EAAE;IAEX,IAAIsQ,KAAK,GAAG,IAAI;IAEhB,IAAItO,MAAM,KAAK,KAAK,CAAC,EAAE;MACrBA,MAAM,GAAGmH,kBAAS;IACpB;IAEA,IAAIpH,OAAO,KAAK,KAAK,CAAC,EAAE;MACtBA,OAAO,GAAG,IAAI,CAAC2R,OAAO,CAAC3R,OAAO;IAChC;IAEA,IAAIuL,aAAa,GAAGyM,eAAe,CAACzM,aAAa,CAAC,CAAC;IACnD;IACA;;IAEA,IAAIyJ,cAAc,GAAG,CAAC6C,YAAY,IAAIG,eAAe,CAAChU,WAAW,CAACpK,MAAM,GAAG,CAAC;IAC5E,IAAIke,kBAAkB,GAAG9C,cAAc,GAAG,IAAA7H,oBAAQ,EAAC,IAAI,CAACwE,OAAO,EAAEpG,aAAa,CAAC,GAAG1L,SAAS;IAC3F,IAAI8O,YAAY,GAAGkJ,YAAY,GAAGA,YAAY,CAAClJ,YAAY,GAAGkJ,YAAY,CAAClJ,YAAY,GAAGqJ,eAAe,CAAC5C,MAAM,GAAG,IAAI,CAACzD,OAAO,CAAChD,YAAY,CAACkJ,YAAY,CAAChd,KAAK,CAAC,GAAGgF,SAAS,GAAGA,SAAS;IACxL,IAAIgX,cAAc,GAAGgB,YAAY,GAAGA,YAAY,CAAC7X,OAAO,GAAGA,OAAO;IAClE,IAAIgI,OAAO,GAAG,IAAI,CAAC4O,UAAU,CAACoB,eAAe,EAAEnB,cAAc,EAAE5W,MAAM,EAAE4X,YAAY,CAAC;IACpF,IAAIrJ,UAAU,GAAGqJ,YAAY,GAAG,IAAA1e,eAAQ,EAAC,CAAC,CAAC,EAAE0e,YAAY,CAACrJ,UAAU,CAAC,GAAG,CAAC,CAAC;IAE1E,IAAI;MACF,KAAK,IAAI8J,SAAS,GAAG,IAAA/d,eAAQ,EAACyN,OAAO,CAAC,EAAEuQ,WAAW,GAAGD,SAAS,CAAC1d,IAAI,CAAC,CAAC,EAAE,CAAC2d,WAAW,CAACzd,IAAI,EAAEyd,WAAW,GAAGD,SAAS,CAAC1d,IAAI,CAAC,CAAC,EAAE;QACzH,IAAIyH,MAAM,GAAGkW,WAAW,CAAC1d,KAAK;QAE9B,IAAIwH,MAAM,CAACzF,IAAI,KAAK4b,kBAAO,EAAE;UAC3BhK,UAAU,CAACnM,MAAM,CAAC0H,QAAQ,CAACnN,IAAI,CAAC,GAAGyF,MAAM;QAC3C,CAAC,MAAM,IAAIA,MAAM,CAACzF,IAAI,KAAK6b,iBAAM,EAAE;UACjCjK,UAAU,CAACnM,MAAM,CAAC0H,QAAQ,CAACnN,IAAI,CAAC,GAAG,KAAK;QAC1C;MACF;IACF,CAAC,CAAC,OAAOwE,KAAK,EAAE;MACdL,GAAG,GAAG;QACJ5F,KAAK,EAAEiG;MACT,CAAC;IACH,CAAC,SAAS;MACR,IAAI;QACF,IAAImX,WAAW,IAAI,CAACA,WAAW,CAACzd,IAAI,KAAKmD,EAAE,GAAGqa,SAAS,CAACha,MAAM,CAAC,EAAEL,EAAE,CAACjE,IAAI,CAACse,SAAS,CAAC;MACrF,CAAC,SAAS;QACR,IAAIvX,GAAG,EAAE,MAAMA,GAAG,CAAC5F,KAAK;MAC1B;IACF;IAEA,IAAI+C,EAAE,GAAG,IAAAnD,aAAM,EAAC,IAAA8F,gBAAS,EAACmH,OAAO,EAAE,UAAU3F,MAAM,EAAE;QACnD,OAAOA,MAAM,CAACzF,IAAI,KAAKtD,mBAAM;MAC/B,CAAC,CAAC,EAAE,CAAC,CAAC;MACFsI,aAAa,GAAG1D,EAAE,CAAC,CAAC,CAAC;MACrBwa,YAAY,GAAGxa,EAAE,CAAC,CAAC,CAAC;IAExB,IAAI4D,cAAc,GAAGF,aAAa,CAAChI,MAAM,GAAG,IAAA+H,oBAAa,EAACkV,cAAc,EAAE5W,MAAM,EAAE2B,aAAa,EAAEiW,YAAY,CAAC,GAAGhB,cAAc;IAC/H,IAAI8B,eAAe,GAAG,IAAArZ,cAAO,EAACoZ,YAAY,CAACnZ,GAAG,CAAC,UAAUkI,YAAY,EAAE;MACrE,QAAQA,YAAY,CAAC7K,IAAI;QACvB,KAAKyL,kBAAO;UACV,OAAO,IAAAC,qBAAY,EAACb,YAAY,CAAC;QAEnC,KAAKhC,iBAAI;UACP,IAAImT,UAAU,GAAG,IAAAlQ,oBAAW,EAACjB,YAAY,EAAE3F,cAAc,EAAE7B,MAAM,EAAEsO,KAAK,CAACoD,OAAO,CAACpJ,OAAO,CAACiI,MAAM,CAAC,CAAC,CAAC;;UAElG,IAAI,CAAC9U,0BAAa,EAAE;YAClB;YACA,IAAAmG,WAAI,EAAC,CAAC,IAAAtF,eAAQ,EAACkL,YAAY,CAACgB,KAAK,CAAC,IAAI,OAAOmQ,UAAU,CAACnQ,KAAK,KAAK,QAAQ;YAAE;YAC5E,2CAA2C,GAAGhB,YAAY,CAACgB,KAAK,GAAG,0BAA0B,GAAG8F,KAAK,CAACoD,OAAO,CAACpN,EAAE,GAAG,GAAG,CAAC;UACzH;UAEA,OAAOqU,UAAU;QAEnB,KAAKxS,gBAAG;UACN,OAAO,IAAAwD,mBAAU,EAACnC,YAAY,EAAE3F,cAAc,EAAE7B,MAAM,CAAC;QAEzD,KAAKgH,iBAAI;UACP,OAAOQ,YAAY,CAACuE,GAAG,CAAClK,cAAc,EAAE7B,MAAM,CAACG,IAAI,CAAC,IAAI,EAAE;QAE5D;UACE,OAAO,IAAAoH,uBAAc,EAACC,YAAY,EAAE8G,KAAK,CAAChG,OAAO,CAACP,OAAO,CAAC;MAC9D;IACF,CAAC,CAAC,CAAC;IAEH,IAAI7J,EAAE,GAAG,IAAApD,aAAM,EAAC,IAAA8F,gBAAS,EAAC8X,eAAe,EAAE,UAAUtW,MAAM,EAAE;QAC3D,OAAOA,MAAM,CAACzF,IAAI,KAAKyL,kBAAO,IAAIhG,MAAM,CAACzF,IAAI,KAAK6I,iBAAI,IAAIpD,MAAM,CAAC8F,EAAE,KAAKlD,qBAAc,CAACmD,QAAQ;MACjG,CAAC,CAAC,EAAE,CAAC,CAAC;MACFyQ,YAAY,GAAG1a,EAAE,CAAC,CAAC,CAAC;MACpB2a,gBAAgB,GAAG3a,EAAE,CAAC,CAAC,CAAC;IAE5B,IAAI4a,aAAa,GAAGJ,eAAe,CAACvF,MAAM,CAAC,UAAU/Q,MAAM,EAAE;MAC3D,OAAOA,MAAM,CAACzF,IAAI,KAAK4b,kBAAO,IAAInW,MAAM,CAAC0H,QAAQ,CAACnN,IAAI,KAAK4J,mBAAM;IACnE,CAAC,CAAC;IACF,IAAIwI,QAAQ,GAAG+J,aAAa,CAAChX,MAAM,CAAC,UAAUC,GAAG,EAAEK,MAAM,EAAE;MACzDL,GAAG,CAACK,MAAM,CAAC0H,QAAQ,CAACxF,EAAE,CAAC,GAAG,IAAAkL,2BAAoB,EAACpN,MAAM,CAAC0H,QAAQ,CAAC;MAC/D,OAAO/H,GAAG;IACZ,CAAC,EAAE6V,YAAY,GAAG,IAAA1e,eAAQ,EAAC,CAAC,CAAC,EAAE0e,YAAY,CAAC7I,QAAQ,CAAC,GAAG,CAAC,CAAC,CAAC;IAC3D,IAAIgK,qBAAqB,GAAGlB,kBAAkB,GAAGE,eAAe,CAACzM,aAAa,GAAGsM,YAAY,GAAGA,YAAY,CAACtM,aAAa,GAAG,EAAE;IAC/H,IAAInJ,IAAI,GAAG4W,qBAAqB,CAACjX,MAAM,CAAC,UAAUC,GAAG,EAAE2I,SAAS,EAAE;MAChE,IAAIA,SAAS,CAACvI,IAAI,KAAKvC,SAAS,EAAE;QAChCmC,GAAG,CAAC2I,SAAS,CAACpG,EAAE,CAAC,GAAGoG,SAAS,CAACvI,IAAI;MACpC;MAEA,OAAOJ,GAAG;IACZ,CAAC,EAAE,CAAC,CAAC,CAAC;IACN,IAAIiX,MAAM,GAAG,IAAAtL,0BAAc,EAACqL,qBAAqB,EAAE,IAAI,CAAC;IACxD,IAAIE,SAAS,GAAG,IAAI5K,YAAK,CAAC;MACxBzT,KAAK,EAAEid,kBAAkB,IAAID,YAAY,CAAChd,KAAK;MAC/CmF,OAAO,EAAE8B,cAAc;MACvB7B,MAAM,EAAEA,MAAM;MACd;MACAyO,UAAU,EAAEmJ,YAAY,GAAGA,YAAY,CAACnJ,UAAU,GAAG,IAAI;MACzDC,YAAY,EAAEmJ,kBAAkB,GAAGnJ,YAAY,GAAG,IAAAjN,yBAAkB,EAACiN,YAAY,EAAEmJ,kBAAkB,CAAC,GAAGjY,SAAS,GAAGgY,YAAY,GAAGA,YAAY,CAAClJ,YAAY,GAAG9O,SAAS;MACzK+O,OAAO,EAAE,CAACkJ,kBAAkB,IAAIE,eAAe,CAAC5C,MAAM,GAAGyC,YAAY,GAAGhY,SAAS;MACjFmI,OAAO,EAAE8P,kBAAkB,GAAGgB,gBAAgB,GAAG,EAAE;MACnDtK,UAAU,EAAEsJ,kBAAkB,GAAGtJ,UAAU,GAAGqJ,YAAY,GAAGA,YAAY,CAACrJ,UAAU,GAAG,CAAC,CAAC;MACzFpM,IAAI,EAAE0V,kBAAkB,GAAG1V,IAAI,GAAGyV,YAAY,GAAGA,YAAY,CAACzV,IAAI,GAAGvC,SAAS;MAC9E4O,MAAM,EAAE,EAAE;MACVlD,aAAa,EAAEyN,qBAAqB;MACpChV,WAAW,EAAEgU,eAAe,CAAChU,WAAW;MACxCgL,QAAQ,EAAEA,QAAQ;MAClBlU,IAAI,EAAEme;IACR,CAAC,CAAC;IACFC,SAAS,CAACC,OAAO,GAAGlZ,MAAM,CAAC+C,IAAI,KAAK+D,mBAAM,IAAI,CAAC,CAACnF,aAAa,CAAChI,MAAM,CAAC,CAAC;;IAEtE,IAAIgV,OAAO,GAAGsK,SAAS,CAACtK,OAAO;IAE/B,IAAIA,OAAO,EAAE;MACX,OAAOA,OAAO,CAACA,OAAO;IACxB;IAEA,IAAI,CAACkJ,kBAAkB,EAAE;MACvB,OAAOoB,SAAS;IAClB;IAEA,IAAIE,cAAc,GAAGF,SAAS;IAE9B,IAAI,CAACD,MAAM,EAAE;MACX,IAAII,WAAW,GAAG,IAAI,CAACnH,UAAU,IAAI3G,aAAa,CAACgC,IAAI,CAAC,UAAU5C,SAAS,EAAE;QAC3E,OAAOA,SAAS,CAACuH,UAAU;MAC7B,CAAC,CAAC;MAEF,IAAImH,WAAW,EAAE;QACfD,cAAc,GAAG,IAAI,CAAClB,uBAAuB,CAACkB,cAAc,EAAE;UAC5Dxc,IAAI,EAAEiJ;QACR,CAAC,EAAE5F,MAAM,CAAC;MACZ;MAEA,OAAO4Y,YAAY,CAACjf,MAAM,EAAE;QAC1B,IAAI0f,WAAW,GAAGT,YAAY,CAACU,KAAK,CAAC,CAAC;QACtCH,cAAc,GAAG,IAAI,CAAClB,uBAAuB,CAACkB,cAAc,EAAEE,WAAW,CAACrZ,MAAM,EAAEA,MAAM,CAAC;MAC3F;IACF,CAAC,CAAC;;IAGF,IAAIkZ,OAAO,GAAGC,cAAc,CAACD,OAAO,KAAKvK,OAAO,GAAG,CAAC,CAACwK,cAAc,CAACpR,OAAO,CAACpO,MAAM,IAAI,CAAC,CAACgI,aAAa,CAAChI,MAAM,IAAI,OAAOgV,OAAO,CAAC/T,KAAK,KAAK,OAAOue,cAAc,CAACve,KAAK,IAAI,CAAC,IAAAiT,uBAAgB,EAACsL,cAAc,CAACve,KAAK,EAAE+T,OAAO,CAAC/T,KAAK,CAAC,GAAGgF,SAAS,CAAC;IAC3OuZ,cAAc,CAACD,OAAO,GAAGA,OAAO,CAAC,CAAC;;IAElCC,cAAc,CAACzK,YAAY,GAAGuK,SAAS,CAACvK,YAAY;IACpDyK,cAAc,CAACxK,OAAO,GAAGA,OAAO;IAChC,OAAOwK,cAAc;EACvB,CAAC;EACD;AACF;AACA;;EAGEtI,SAAS,CAAChX,SAAS,CAACga,YAAY,GAAG,UAAU0F,QAAQ,EAAE;IACrD,IAAIrJ,SAAS,CAACqJ,QAAQ,CAAC,EAAE;MACvB,OAAO,IAAI,CAAC7H,OAAO,CAACkE,gBAAgB,CAAC2D,QAAQ,CAAC;IAChD;IAEA,IAAI,CAAC,IAAI,CAACjY,MAAM,EAAE;MAChB,MAAM,IAAI1E,KAAK,CAAC,kCAAkC,GAAG2c,QAAQ,GAAG,UAAU,GAAG,IAAI,CAACjV,EAAE,GAAG,2BAA2B,CAAC;IACrH;IAEA,IAAI3G,MAAM,GAAG,IAAI,CAAC2D,MAAM,CAACiY,QAAQ,CAAC;IAElC,IAAI,CAAC5b,MAAM,EAAE;MACX,MAAM,IAAIf,KAAK,CAAC,eAAe,GAAG2c,QAAQ,GAAG,uBAAuB,GAAG,IAAI,CAACjV,EAAE,GAAG,GAAG,CAAC;IACvF;IAEA,OAAO3G,MAAM;EACf,CAAC;EACD;AACF;AACA;AACA;AACA;;EAGEkT,SAAS,CAAChX,SAAS,CAAC+b,gBAAgB,GAAG,UAAU9Y,OAAO,EAAE;IACxD,IAAI0c,eAAe,GAAGtJ,SAAS,CAACpT,OAAO,CAAC,GAAGA,OAAO,CAAC4T,KAAK,CAACX,gBAAgB,CAACpW,MAAM,CAAC,GAAGmD,OAAO;IAE3F,IAAI0c,eAAe,KAAK,IAAI,CAAClV,EAAE,EAAE;MAC/B,OAAO,IAAI;IACb;IAEA,IAAIoG,SAAS,GAAG,IAAI,CAACgH,OAAO,CAACH,KAAK,CAACiI,eAAe,CAAC;IAEnD,IAAI,CAAC9O,SAAS,EAAE;MACd,MAAM,IAAI9N,KAAK,CAAC,qBAAqB,GAAG4c,eAAe,GAAG,+BAA+B,GAAG,IAAI,CAAClV,EAAE,GAAG,GAAG,CAAC;IAC5G;IAEA,OAAOoG,SAAS;EAClB,CAAC;EACD;AACF;AACA;AACA;AACA;;EAGEmG,SAAS,CAAChX,SAAS,CAAC4f,kBAAkB,GAAG,UAAUnc,SAAS,EAAE;IAC5D,IAAI,OAAOA,SAAS,KAAK,QAAQ,IAAI4S,SAAS,CAAC5S,SAAS,CAAC,EAAE;MACzD,IAAI;QACF,OAAO,IAAI,CAACsY,gBAAgB,CAACtY,SAAS,CAACoT,KAAK,CAAC,CAAC,CAAC,CAAC;MAClD,CAAC,CAAC,OAAOxW,CAAC,EAAE,CAAC;QACX;MAAA;IAEJ;IAEA,IAAIwf,cAAc,GAAG,IAAA7c,kBAAW,EAACS,SAAS,EAAE,IAAI,CAACpB,SAAS,CAAC,CAACwU,KAAK,CAAC,CAAC;IACnE,IAAIiJ,gBAAgB,GAAG,IAAI;IAE3B,OAAOD,cAAc,CAAC/f,MAAM,EAAE;MAC5B,IAAI6C,GAAG,GAAGkd,cAAc,CAACJ,KAAK,CAAC,CAAC;MAEhC,IAAI,CAAC9c,GAAG,CAAC7C,MAAM,EAAE;QACf;MACF;MAEAggB,gBAAgB,GAAGA,gBAAgB,CAAC9F,YAAY,CAACrX,GAAG,CAAC;IACvD;IAEA,OAAOmd,gBAAgB;EACzB,CAAC;EACD;AACF;AACA;AACA;AACA;;EAGE9I,SAAS,CAAChX,SAAS,CAACya,OAAO,GAAG,UAAUlX,UAAU,EAAE;IAClD,IAAIY,EAAE;IAEN,IAAIsQ,KAAK,GAAG,IAAI;IAEhB,IAAI,CAAClR,UAAU,EAAE;MACf,OAAO,IAAI,CAAC8T,iBAAiB,IAAIjB,YAAY,CAAC,CAAC;IACjD;;IAEA,QAAQ,IAAI,CAACtT,IAAI;MACf,KAAK,UAAU;QACb,OAAO,IAAAa,gBAAS,EAAC,IAAI,CAAC0T,iBAAiB,EAAE,UAAU3R,aAAa,EAAEyU,WAAW,EAAE;UAC7E,OAAOzU,aAAa,GAAG+O,KAAK,CAACuF,YAAY,CAACG,WAAW,CAAC,CAACM,OAAO,CAAClX,UAAU,CAAC4W,WAAW,CAAC,IAAIzU,aAAa,CAAC,GAAG0Q,YAAY;QACzH,CAAC,CAAC;MAEJ,KAAK,UAAU;QACb,IAAI,IAAA3T,eAAQ,EAACc,UAAU,CAAC,EAAE;UACxB,IAAI8W,YAAY,GAAG,IAAI,CAACL,YAAY,CAACzW,UAAU,CAAC;UAEhD,IAAI8W,YAAY,CAACvX,IAAI,KAAK,UAAU,IAAIuX,YAAY,CAACvX,IAAI,KAAK,UAAU,EAAE;YACxE,OAAOqB,EAAE,GAAG,CAAC,CAAC,EAAEA,EAAE,CAACZ,UAAU,CAAC,GAAG8W,YAAY,CAAChD,iBAAiB,EAAElT,EAAE;UACrE;UAEA,OAAOZ,UAAU;QACnB;QAEA,IAAI,CAAC,IAAAtB,WAAI,EAACsB,UAAU,CAAC,CAACzD,MAAM,EAAE;UAC5B,OAAO,IAAI,CAACuX,iBAAiB,IAAI,CAAC,CAAC;QACrC;QAEA,OAAO,IAAA1T,gBAAS,EAACJ,UAAU,EAAE,UAAUmC,aAAa,EAAEyU,WAAW,EAAE;UACjE,OAAOzU,aAAa,GAAG+O,KAAK,CAACuF,YAAY,CAACG,WAAW,CAAC,CAACM,OAAO,CAAC/U,aAAa,CAAC,GAAG0Q,YAAY;QAC9F,CAAC,CAAC;MAEJ;QACE,OAAO7S,UAAU,IAAI6S,YAAY;IACrC;EACF,CAAC;EAEDY,SAAS,CAAChX,SAAS,CAACie,eAAe,GAAG,UAAU8B,eAAe,EAAE;IAC/D,IAAI1J,SAAS,CAAC0J,eAAe,CAAC,EAAE;MAC9B,IAAIlP,SAAS,GAAG,IAAI,CAACgH,OAAO,CAACH,KAAK,CAACqI,eAAe,CAAClJ,KAAK,CAACX,gBAAgB,CAACpW,MAAM,CAAC,CAAC;MAElF,IAAI,CAAC+Q,SAAS,EAAE;QACd,MAAM,IAAI9N,KAAK,CAAC,6BAA6B,GAAGgd,eAAe,GAAG,GAAG,CAAC;MACxE;MAEA,OAAOlP,SAAS,CAACpM,IAAI;IACvB;IAEA,OAAO,IAAAzB,kBAAW,EAAC+c,eAAe,EAAE,IAAI,CAAC1d,SAAS,CAAC;EACrD,CAAC;EAED9C,MAAM,CAACuO,cAAc,CAACkJ,SAAS,CAAChX,SAAS,EAAE,mBAAmB,EAAE;IAC9DkS,GAAG,EAAE,SAAAA,CAAA,EAAY;MACf,IAAI/N,EAAE;MAEN,IAAI,IAAI,CAACgT,OAAO,CAACE,iBAAiB,EAAE;QAClC,OAAO,IAAI,CAACF,OAAO,CAACE,iBAAiB;MACvC;MAEA,IAAIA,iBAAiB;MAErB,IAAI,IAAI,CAACvU,IAAI,KAAK,UAAU,EAAE;QAC5BuU,iBAAiB,GAAG,IAAArT,sBAAe,EAAC,IAAI,CAACyD,MAAM,EAAE,UAAUnE,KAAK,EAAE;UAChE,OAAOA,KAAK,CAAC+T,iBAAiB,IAAIjB,YAAY;QAChD,CAAC,EAAE,UAAUvF,SAAS,EAAE;UACtB,OAAO,EAAEA,SAAS,CAAC/N,IAAI,KAAK,SAAS,CAAC;QACxC,CAAC,CAAC;MACJ,CAAC,MAAM,IAAI,IAAI,CAACmV,OAAO,KAAKlS,SAAS,EAAE;QACrC,IAAI,CAAC,IAAI,CAAC0B,MAAM,CAAC,IAAI,CAACwQ,OAAO,CAAC,EAAE;UAC9B,MAAM,IAAIlV,KAAK,CAAC,iBAAiB,GAAG,IAAI,CAACkV,OAAO,GAAG,kBAAkB,GAAG,IAAI,CAACtV,GAAG,GAAG,GAAG,CAAC;QACzF;QAEA0U,iBAAiB,GAAG,IAAAzG,sBAAU,EAAC,IAAI,CAACnJ,MAAM,CAAC,IAAI,CAACwQ,OAAO,CAAC,CAAC,GAAG,IAAI,CAACA,OAAO,IAAI9T,EAAE,GAAG,CAAC,CAAC,EAAEA,EAAE,CAAC,IAAI,CAAC8T,OAAO,CAAC,GAAG,IAAI,CAACxQ,MAAM,CAAC,IAAI,CAACwQ,OAAO,CAAC,CAACZ,iBAAiB,EAAElT,EAAE,CAAC;MAC1J;MAEA,IAAI,CAACgT,OAAO,CAACE,iBAAiB,GAAGA,iBAAiB;MAClD,OAAO,IAAI,CAACF,OAAO,CAACE,iBAAiB;IACvC,CAAC;IACDtJ,UAAU,EAAE,IAAI;IAChBC,YAAY,EAAE;EAChB,CAAC,CAAC;EAEFgJ,SAAS,CAAChX,SAAS,CAACggB,eAAe,GAAG,UAAUzc,UAAU,EAAE2C,OAAO,EAAE;IACnE,IAAIuL,aAAa,GAAG,IAAI,CAACsI,aAAa,CAACxW,UAAU,CAAC;IAClD,OAAO,IAAI,CAAC4a,iBAAiB,CAAC;MAC5B1M,aAAa,EAAEA,aAAa;MAC5B2J,QAAQ,EAAE3J,aAAa;MACvB4J,OAAO,EAAE,EAAE;MACXnR,WAAW,EAAE,EAAE;MACfoR,MAAM,EAAEvV,SAAS;MACjBmI,OAAO,EAAE;IACX,CAAC,EAAEnI,SAAS,EAAEA,SAAS,EAAEG,OAAO,CAAC;EACnC,CAAC;EAED3G,MAAM,CAACuO,cAAc,CAACkJ,SAAS,CAAChX,SAAS,EAAE,cAAc,EAAE;IACzD;AACJ;AACA;AACA;IACIkS,GAAG,EAAE,SAAAA,CAAA,EAAY;MACf,IAAI,CAAC2G,KAAK,CAAC,CAAC;MAEZ,IAAIxB,iBAAiB,GAAG,IAAI,CAACA,iBAAiB;MAE9C,IAAI,CAACA,iBAAiB,EAAE;QACtB,MAAM,IAAItU,KAAK,CAAC,mDAAmD,GAAG,IAAI,CAAC0H,EAAE,GAAG,IAAI,CAAC;MACvF;MAEA,OAAO,IAAI,CAACuV,eAAe,CAAC3I,iBAAiB,CAAC;IAChD,CAAC;IACDtJ,UAAU,EAAE,IAAI;IAChBC,YAAY,EAAE;EAChB,CAAC,CAAC;EACFzO,MAAM,CAACuO,cAAc,CAACkJ,SAAS,CAAChX,SAAS,EAAE,QAAQ,EAAE;IACnD;AACJ;AACA;AACA;IACIkS,GAAG,EAAE,SAAAA,CAAA,EAAY;MACf,IAAI9H,MAAM;MAEV,IAAI,IAAI,CAACtH,IAAI,KAAK,SAAS,EAAE;QAC3B,IAAImd,aAAa,GAAG,IAAI,CAAC1M,MAAM;QAE/B,IAAI,IAAA9Q,eAAQ,EAACwd,aAAa,CAAC7V,MAAM,CAAC,EAAE;UAClCA,MAAM,GAAGiM,SAAS,CAAC4J,aAAa,CAAC7V,MAAM,CAAC,GAAG,IAAA5G,uBAAgB,EAAC,IAAI,CAACqU,OAAO,CAACkE,gBAAgB,CAACkE,aAAa,CAAC7V,MAAM,CAAC,CAAC3F,IAAI,CAACoS,KAAK,CAAC,IAAI,CAACpS,IAAI,CAAC3E,MAAM,GAAG,CAAC,CAAC,CAAC,GAAGmgB,aAAa,CAAC7V,MAAM;QAC1K,CAAC,MAAM;UACLA,MAAM,GAAG6V,aAAa,CAAC7V,MAAM;QAC/B;MACF;MAEA,OAAOA,MAAM;IACf,CAAC;IACD2D,UAAU,EAAE,IAAI;IAChBC,YAAY,EAAE;EAChB,CAAC,CAAC;EACF;AACF;AACA;AACA;AACA;AACA;AACA;;EAEEgJ,SAAS,CAAChX,SAAS,CAACoc,qBAAqB,GAAG,UAAU8D,eAAe,EAAErL,YAAY,EAAE4F,OAAO,EAAE;IAC5F,IAAIA,OAAO,KAAK,KAAK,CAAC,EAAE;MACtBA,OAAO,GAAG,IAAI;IAChB;IAEA,OAAOA,OAAO,GAAGyF,eAAe,CAACpd,IAAI,KAAK,SAAS,GAAGod,eAAe,CAACC,cAAc,CAACtL,YAAY,CAAC,GAAGqL,eAAe,CAAC7N,iBAAiB,GAAG,CAAC6N,eAAe,CAAC;EAC5J,CAAC;EAED3gB,MAAM,CAACuO,cAAc,CAACkJ,SAAS,CAAChX,SAAS,EAAE,mBAAmB,EAAE;IAC9DkS,GAAG,EAAE,SAAAA,CAAA,EAAY;MACf,IAAIuC,KAAK,GAAG,IAAI;MAEhB,IAAI,IAAA7D,sBAAU,EAAC,IAAI,CAAC,EAAE;QACpB,OAAO,CAAC,IAAI,CAAC;MACf,CAAC,CAAC;;MAGF,IAAI,IAAI,CAAC9N,IAAI,KAAK,UAAU,IAAI,CAAC,IAAI,CAACmV,OAAO,EAAE;QAC7C,IAAI,CAACrW,0BAAa,EAAE;UAClB,IAAAmG,WAAI,EAAC,KAAK,EAAE,uBAAuB,GAAG,IAAI,CAAC0C,EAAE,GAAG,yBAAyB,CAAC;QAC5E;QAEA,OAAO,CAAC,IAAI,CAAC;MACf;MAEA,IAAI2V,qBAAqB,GAAG,IAAA7a,mBAAY,EAAC,IAAI,CAAC8R,iBAAiB,CAAC;MAChE,OAAO,IAAA7R,cAAO,EAAC4a,qBAAqB,CAAC3a,GAAG,CAAC,UAAU4a,WAAW,EAAE;QAC9D,OAAO5L,KAAK,CAAC6L,mBAAmB,CAACD,WAAW,CAAC;MAC/C,CAAC,CAAC,CAAC;IACL,CAAC;IACDtS,UAAU,EAAE,IAAI;IAChBC,YAAY,EAAE;EAChB,CAAC,CAAC;EACF;AACF;AACA;AACA;AACA;AACA;;EAEEgJ,SAAS,CAAChX,SAAS,CAACsgB,mBAAmB,GAAG,UAAUC,YAAY,EAAE;IAChE,IAAI,CAACA,YAAY,CAACzgB,MAAM,EAAE;MACxB,OAAO,CAAC,IAAI,CAAC;IACf;IAEA,IAAIqE,EAAE,GAAG,IAAAlD,aAAM,EAACsf,YAAY,CAAC;MACzBb,QAAQ,GAAGvb,EAAE,CAAC,CAAC,CAAC;MAChBqc,cAAc,GAAGrc,EAAE,CAAC0S,KAAK,CAAC,CAAC,CAAC;IAEhC,IAAI,CAAC,IAAI,CAACpP,MAAM,EAAE;MAChB,MAAM,IAAI1E,KAAK,CAAC,2BAA2B,GAAG2c,QAAQ,GAAG,4BAA4B,CAAC;IACxF;IAEA,IAAI3M,cAAc,GAAG,IAAI,CAACiH,YAAY,CAAC0F,QAAQ,CAAC;IAEhD,IAAI3M,cAAc,CAACjQ,IAAI,KAAK,SAAS,EAAE;MACrC,OAAOiQ,cAAc,CAACoN,cAAc,CAAC,CAAC;IACxC;IAEA,IAAI,CAAC,IAAI,CAAC1Y,MAAM,CAACiY,QAAQ,CAAC,EAAE;MAC1B,MAAM,IAAI3c,KAAK,CAAC,eAAe,GAAG2c,QAAQ,GAAG,uBAAuB,GAAG,IAAI,CAACjV,EAAE,GAAG,GAAG,CAAC;IACvF;IAEA,OAAO,IAAI,CAAChD,MAAM,CAACiY,QAAQ,CAAC,CAACY,mBAAmB,CAACE,cAAc,CAAC;EAClE,CAAC;EAEDxJ,SAAS,CAAChX,SAAS,CAAC6U,YAAY,GAAG,UAAU4L,kBAAkB,EAAE;IAC/D,IAAI,CAAC,IAAAxe,WAAI,EAAC,IAAI,CAACwF,MAAM,CAAC,CAAC3H,MAAM,EAAE;MAC7B,OAAOiG,SAAS;IAClB;IAEA,OAAO;MACL4B,OAAO,EAAE8Y,kBAAkB,IAAI,IAAI,CAACpJ,iBAAiB;MACrD5P,MAAM,EAAE,IAAAzD,sBAAe,EAAC,IAAI,CAACyD,MAAM,EAAE,UAAUoJ,SAAS,EAAElO,GAAG,EAAE;QAC7D,IAAI,CAAC8d,kBAAkB,EAAE;UACvB,OAAO5P,SAAS,CAACgE,YAAY,CAAC,CAAC;QACjC;QAEA,IAAInP,aAAa,GAAG,IAAAjD,eAAQ,EAACge,kBAAkB,CAAC,GAAG1a,SAAS,GAAG0a,kBAAkB,CAAC9d,GAAG,CAAC;QACtF,OAAOkO,SAAS,CAACgE,YAAY,CAACnP,aAAa,IAAImL,SAAS,CAACwG,iBAAiB,CAAC;MAC7E,CAAC,EAAE,UAAUxG,SAAS,EAAE;QACtB,OAAO,CAACA,SAAS,CAACiE,OAAO;MAC3B,CAAC;IACH,CAAC;EACH,CAAC;EACD;AACF;AACA;AACA;AACA;AACA;;EAGEkC,SAAS,CAAChX,SAAS,CAACmgB,cAAc,GAAG,UAAUtL,YAAY,EAAE;IAC3D,IAAIJ,KAAK,GAAG,IAAI;IAEhB,IAAI,IAAI,CAAC3R,IAAI,KAAK,SAAS,EAAE;MAC3B,OAAO,CAAC,IAAI,CAAC;IACf;IAEA,IAAI8O,MAAM,GAAG,IAAI,CAACA,MAAM;IAExB,IAAI,CAACiD,YAAY,EAAE;MACjB,IAAI6L,aAAa,GAAG,IAAI,CAACtW,MAAM;MAC/B,OAAOsW,aAAa,GAAG,IAAAlb,cAAO,EAAC,IAAAD,mBAAY,EAACmb,aAAa,CAAC,CAACjb,GAAG,CAAC,UAAUkb,iBAAiB,EAAE;QAC1F,OAAO/O,MAAM,CAAC0O,mBAAmB,CAACK,iBAAiB,CAAC;MACtD,CAAC,CAAC,CAAC,GAAG/O,MAAM,CAACS,iBAAiB;IAChC;IAEA,IAAIuO,eAAe,GAAG,IAAA3b,iBAAU,EAAC2M,MAAM,CAACnN,IAAI,EAAE,QAAQ,CAAC,CAACoQ,YAAY,CAAC,CAAClN,OAAO;IAE7E,IAAI,IAAAlF,eAAQ,EAACme,eAAe,CAAC,EAAE;MAC7B,OAAO,CAAChP,MAAM,CAACoI,YAAY,CAAC4G,eAAe,CAAC,CAAC;IAC/C;IAEA,OAAO,IAAApb,cAAO,EAAC,IAAAD,mBAAY,EAACqb,eAAe,CAAC,CAACnb,GAAG,CAAC,UAAUob,YAAY,EAAE;MACvE,OAAOpM,KAAK,CAACK,OAAO,KAAK,MAAM,GAAGlD,MAAM,CAAC0O,mBAAmB,CAACO,YAAY,CAAC,GAAG,CAACjP,MAAM,CAACnK,MAAM,CAACoZ,YAAY,CAAC,CAAC,CAAC,CAAC,CAAC;IAC/G,CAAC,CAAC,CAAC;EACL,CAAC;EAEDthB,MAAM,CAACuO,cAAc,CAACkJ,SAAS,CAAChX,SAAS,EAAE,UAAU,EAAE;IACrD;AACJ;AACA;IACIkS,GAAG,EAAE,SAAAA,CAAA,EAAY;MACf,IAAIuC,KAAK,GAAG,IAAI;MAEhB,IAAIqM,aAAa,GAAG,IAAAtb,cAAO,EAAC,IAAAvD,WAAI,EAAC,IAAI,CAACwF,MAAM,CAAC,CAAChC,GAAG,CAAC,UAAUia,QAAQ,EAAE;QACpE,OAAOjL,KAAK,CAAChN,MAAM,CAACiY,QAAQ,CAAC,CAACqB,QAAQ;MACxC,CAAC,CAAC,CAAC;MACH,OAAO,CAAC,IAAI,CAACtW,EAAE,CAAC,CAAClJ,MAAM,CAACuf,aAAa,CAAC;IACxC,CAAC;IACD/S,UAAU,EAAE,IAAI;IAChBC,YAAY,EAAE;EAChB,CAAC,CAAC;EACFzO,MAAM,CAACuO,cAAc,CAACkJ,SAAS,CAAChX,SAAS,EAAE,QAAQ,EAAE;IACnD;AACJ;AACA;IACIkS,GAAG,EAAE,SAAAA,CAAA,EAAY;MACf,IAAI9J,GAAG,EAAEjE,EAAE,EAAE6c,GAAG,EAAE5c,EAAE;MAEpB,IAAI,IAAI,CAAC+S,OAAO,CAACxC,MAAM,EAAE;QACvB,OAAO,IAAI,CAACwC,OAAO,CAACxC,MAAM;MAC5B;MAEA,IAAIlN,MAAM,GAAG,IAAI,CAACA,MAAM;MACxB,IAAIkN,MAAM,GAAG,IAAIrD,GAAG,CAAC,IAAI,CAACsC,SAAS,CAAC;MAEpC,IAAInM,MAAM,EAAE;QACV,IAAI;UACF,KAAK,IAAIpD,EAAE,GAAG,IAAA5D,eAAQ,EAAC,IAAAwB,WAAI,EAACwF,MAAM,CAAC,CAAC,EAAE2J,EAAE,GAAG/M,EAAE,CAACvD,IAAI,CAAC,CAAC,EAAE,CAACsQ,EAAE,CAACpQ,IAAI,EAAEoQ,EAAE,GAAG/M,EAAE,CAACvD,IAAI,CAAC,CAAC,EAAE;YAC9E,IAAImC,OAAO,GAAGmO,EAAE,CAACrQ,KAAK;YACtB,IAAIuC,KAAK,GAAGmE,MAAM,CAACxE,OAAO,CAAC;YAE3B,IAAIK,KAAK,CAACmE,MAAM,EAAE;cAChB,IAAI;gBACF,KAAK,IAAI6K,EAAE,IAAI0O,GAAG,GAAG,KAAK,CAAC,EAAE,IAAAvgB,eAAQ,EAAC6C,KAAK,CAACqR,MAAM,CAAC,CAAC,EAAEpC,EAAE,GAAGD,EAAE,CAACxR,IAAI,CAAC,CAAC,EAAE,CAACyR,EAAE,CAACvR,IAAI,EAAEuR,EAAE,GAAGD,EAAE,CAACxR,IAAI,CAAC,CAAC,EAAE;kBAC9F,IAAImgB,OAAO,GAAG1O,EAAE,CAACxR,KAAK;kBACtB4T,MAAM,CAAC7C,GAAG,CAAC,EAAE,GAAGmP,OAAO,CAAC;gBAC1B;cACF,CAAC,CAAC,OAAOC,KAAK,EAAE;gBACdF,GAAG,GAAG;kBACJ3f,KAAK,EAAE6f;gBACT,CAAC;cACH,CAAC,SAAS;gBACR,IAAI;kBACF,IAAI3O,EAAE,IAAI,CAACA,EAAE,CAACvR,IAAI,KAAKoD,EAAE,GAAGkO,EAAE,CAAC9N,MAAM,CAAC,EAAEJ,EAAE,CAAClE,IAAI,CAACoS,EAAE,CAAC;gBACrD,CAAC,SAAS;kBACR,IAAI0O,GAAG,EAAE,MAAMA,GAAG,CAAC3f,KAAK;gBAC1B;cACF;YACF;UACF;QACF,CAAC,CAAC,OAAOqH,KAAK,EAAE;UACdN,GAAG,GAAG;YACJ/G,KAAK,EAAEqH;UACT,CAAC;QACH,CAAC,SAAS;UACR,IAAI;YACF,IAAI0I,EAAE,IAAI,CAACA,EAAE,CAACpQ,IAAI,KAAKmD,EAAE,GAAGE,EAAE,CAACG,MAAM,CAAC,EAAEL,EAAE,CAACjE,IAAI,CAACmE,EAAE,CAAC;UACrD,CAAC,SAAS;YACR,IAAI+D,GAAG,EAAE,MAAMA,GAAG,CAAC/G,KAAK;UAC1B;QACF;MACF;MAEA,OAAO,IAAI,CAAC8V,OAAO,CAACxC,MAAM,GAAG5L,KAAK,CAACoM,IAAI,CAACR,MAAM,CAAC;IACjD,CAAC;IACD5G,UAAU,EAAE,IAAI;IAChBC,YAAY,EAAE;EAChB,CAAC,CAAC;EACFzO,MAAM,CAACuO,cAAc,CAACkJ,SAAS,CAAChX,SAAS,EAAE,WAAW,EAAE;IACtD;AACJ;AACA;AACA;AACA;IACIkS,GAAG,EAAE,SAAAA,CAAA,EAAY;MACf,IAAIyC,MAAM,GAAG,IAAIrD,GAAG,CAAC,IAAI,CAACpH,WAAW,CAACoP,MAAM,CAAC,UAAUxC,UAAU,EAAE;QACjE,OAAO,EAAE,CAACA,UAAU,CAAC1M,MAAM,IAAI,CAAC0M,UAAU,CAAC5I,OAAO,CAACpO,MAAM,IAAIgX,UAAU,CAACwF,QAAQ,CAAC;MACnF,CAAC,CAAC,CAAC7W,GAAG,CAAC,UAAUqR,UAAU,EAAE;QAC3B,OAAOA,UAAU,CAACpQ,SAAS;MAC7B,CAAC,CAAC,CAAC;MACH,OAAOqC,KAAK,CAACoM,IAAI,CAACR,MAAM,CAAC;IAC3B,CAAC;IACD5G,UAAU,EAAE,IAAI;IAChBC,YAAY,EAAE;EAChB,CAAC,CAAC;EAEFgJ,SAAS,CAAChX,SAAS,CAACmhB,aAAa,GAAG,UAAUC,OAAO,EAAE;IACrD,IAAI3M,KAAK,GAAG,IAAI;IAEhB,IAAI2M,OAAO,KAAKrb,SAAS,EAAE;MACzB;MACA,OAAOA,SAAS;IAClB;IAEA,OAAOqb,OAAO,CAAC3b,GAAG,CAAC,UAAU2E,MAAM,EAAE;MACnC,IAAI,CAAC,IAAA3H,eAAQ,EAAC2H,MAAM,CAAC,EAAE;QACrB,OAAOA,MAAM;MACf;MAEA,IAAIiX,gBAAgB,GAAGjX,MAAM,CAAC,CAAC,CAAC,KAAKqK,KAAK,CAACpS,SAAS,CAAC,CAAC;MACtD;;MAEA,IAAIgf,gBAAgB,IAAI,CAAC5M,KAAK,CAAC7C,MAAM,EAAE;QACrC,OAAO6C,KAAK,CAACmL,kBAAkB,CAACxV,MAAM,CAACyM,KAAK,CAAC,CAAC,CAAC,CAAC;MAClD;MAEA,IAAI3H,cAAc,GAAGmS,gBAAgB,GAAG5M,KAAK,CAAC9R,GAAG,GAAGyH,MAAM,GAAGA,MAAM;MAEnE,IAAIqK,KAAK,CAAC7C,MAAM,EAAE;QAChB,IAAI;UACF,IAAI0P,eAAe,GAAG7M,KAAK,CAAC7C,MAAM,CAACgO,kBAAkB,CAAC1Q,cAAc,CAAC;UAErE,OAAOoS,eAAe;QACxB,CAAC,CAAC,OAAOpF,GAAG,EAAE;UACZ,MAAM,IAAInZ,KAAK,CAAC,gDAAgD,GAAG0R,KAAK,CAAChK,EAAE,GAAG,MAAM,GAAGyR,GAAG,CAACtT,OAAO,CAAC;QACrG;MACF,CAAC,MAAM;QACL,OAAO6L,KAAK,CAACmL,kBAAkB,CAAC1Q,cAAc,CAAC;MACjD;IACF,CAAC,CAAC;EACJ,CAAC;EAED8H,SAAS,CAAChX,SAAS,CAAC8Z,gBAAgB,GAAG,UAAUyH,gBAAgB,EAAE;IACjE,IAAI9M,KAAK,GAAG,IAAI;IAEhB,IAAI+M,gBAAgB,GAAG,IAAAnX,sBAAe,EAACkX,gBAAgB,CAACnX,MAAM,CAAC;IAC/D,IAAIkS,QAAQ,GAAG,UAAU,IAAIiF,gBAAgB,GAAGA,gBAAgB,CAACjF,QAAQ,GAAGkF,gBAAgB,GAAGA,gBAAgB,CAAC/N,IAAI,CAAC,UAAU2N,OAAO,EAAE;MACtI,OAAO,IAAA3e,eAAQ,EAAC2e,OAAO,CAAC,IAAIA,OAAO,CAAC,CAAC,CAAC,KAAK3M,KAAK,CAACpS,SAAS;IAC5D,CAAC,CAAC,GAAG,IAAI;IACT,IAAImU,MAAM,GAAG,IAAI,CAACqB,OAAO,CAACpJ,OAAO,CAAC+H,MAAM;IACxC,IAAIpM,MAAM,GAAG,IAAI,CAAC+W,aAAa,CAACK,gBAAgB,CAAC;IAEjD,IAAI1K,UAAU,GAAG,IAAAzX,eAAQ,EAAC,IAAAA,eAAQ,EAAC,CAAC,CAAC,EAAEkiB,gBAAgB,CAAC,EAAE;MACxDrT,OAAO,EAAE,IAAAD,wBAAe,EAAC,IAAAnI,cAAO,EAACyb,gBAAgB,CAACrT,OAAO,CAAC,CAAC;MAC3DwN,IAAI,EAAE,IAAA1S,cAAO,EAACuY,gBAAgB,CAAC7F,IAAI,EAAElF,MAAM,CAAC;MAC5CpM,MAAM,EAAEA,MAAM;MACdkR,MAAM,EAAE,IAAI;MACZgB,QAAQ,EAAEA,QAAQ;MAClB5V,SAAS,EAAE6a,gBAAgB,CAAC1e;IAC9B,CAAC,CAAC;IAEFtD,MAAM,CAACuO,cAAc,CAACgJ,UAAU,EAAE,QAAQ,EAAE;MAC1C/V,KAAK,EAAE,SAAAA,CAAA,EAAY;QACjB,OAAO,IAAA1B,eAAQ,EAAC,IAAAA,eAAQ,EAAC,CAAC,CAAC,EAAEyX,UAAU,CAAC,EAAE;UACxC1M,MAAM,EAAE0M,UAAU,CAAC1M,MAAM,GAAG0M,UAAU,CAAC1M,MAAM,CAAC3E,GAAG,CAAC,UAAUhG,CAAC,EAAE;YAC7D,OAAO,GAAG,GAAGA,CAAC,CAACgL,EAAE;UACnB,CAAC,CAAC,GAAG1E,SAAS;UACduV,MAAM,EAAE;QACV,CAAC,CAAC;MACJ;IACF,CAAC,CAAC;IACF,OAAOxE,UAAU;EACnB,CAAC;EAEDE,SAAS,CAAChX,SAAS,CAACkZ,iBAAiB,GAAG,YAAY;IAClD,IAAIuI,GAAG,EAAEtd,EAAE;IAEX,IAAIsQ,KAAK,GAAG,IAAI;IAEhB,IAAIiN,QAAQ;IAEZ,IAAI,CAAC,IAAI,CAACnO,MAAM,CAACgE,EAAE,EAAE;MACnBmK,QAAQ,GAAG,EAAE;IACf,CAAC,MAAM,IAAI3Y,KAAK,CAAC7F,OAAO,CAAC,IAAI,CAACqQ,MAAM,CAACgE,EAAE,CAAC,EAAE;MACxCmK,QAAQ,GAAG,IAAI,CAACnO,MAAM,CAACgE,EAAE;IAC3B,CAAC,MAAM;MACL,IAAInT,EAAE,GAAG,IAAI,CAACmP,MAAM,CAACgE,EAAE;QACnBlT,EAAE,GAAG8R,QAAQ;QACb/E,EAAE,GAAGhN,EAAE,CAACC,EAAE,CAAC;QACXsd,eAAe,GAAGvQ,EAAE,KAAK,KAAK,CAAC,GAAG,EAAE,GAAGA,EAAE;QACzCwQ,iBAAiB,GAAG,IAAAxhB,aAAM,EAACgE,EAAE,EAAE,CAAC,OAAOC,EAAE,KAAK,QAAQ,GAAGA,EAAE,GAAGA,EAAE,GAAG,EAAE,CAAC,CAAC;MAE3Eqd,QAAQ,GAAG,IAAAlc,cAAO,EAAC,IAAAvD,WAAI,EAAC2f,iBAAiB,CAAC,CAACnc,GAAG,CAAC,UAAU9C,GAAG,EAAE;QAC5D,IAAIkf,UAAU,GAAG,IAAA7X,8BAAuB,EAACrH,GAAG,EAAEif,iBAAiB,CAACjf,GAAG,CAAC,CAAC;QAErE,IAAI,CAACf,0BAAa,EAAE;UAClB+U,6BAA6B,CAAClC,KAAK,EAAE9R,GAAG,EAAEkf,UAAU,CAAC;QACvD;QAEA,OAAOA,UAAU;MACnB,CAAC,CAAC,CAACtgB,MAAM,CAAC,IAAAyI,8BAAuB,EAACmM,QAAQ,EAAEwL,eAAe,CAAC,CAAC,CAAC;IAChE;IAEA,IAAIG,UAAU,GAAG,IAAI,CAACvO,MAAM,CAACwO,MAAM,GAAG,IAAA/X,8BAAuB,EAACgY,MAAM,CAAC,IAAAhhB,aAAI,EAAC,IAAI,CAACyJ,EAAE,CAAC,CAAC,EAAE,IAAI,CAAC8I,MAAM,CAACwO,MAAM,CAAC,GAAG,EAAE;IAC7G,IAAIrJ,YAAY,GAAG,IAAAlT,cAAO,EAAC,IAAI,CAACkH,MAAM,CAACjH,GAAG,CAAC,UAAUwc,SAAS,EAAE;MAC9D,IAAIC,iBAAiB,GAAG,EAAE;MAE1B,IAAID,SAAS,CAACF,MAAM,EAAE;QACpBG,iBAAiB,CAAC9gB,IAAI,CAACjB,KAAK,CAAC+hB,iBAAiB,EAAE,IAAA5gB,eAAQ,EAAC,IAAA0I,8BAAuB,EAACgY,MAAM,CAAC,IAAA1R,mBAAU,EAAC2R,SAAS,CAACxX,EAAE,CAAC,CAAC,EAAEwX,SAAS,CAACF,MAAM,CAAC,CAAC,CAAC;MACxI;MAEA,IAAIE,SAAS,CAACE,OAAO,EAAE;QACrBD,iBAAiB,CAAC9gB,IAAI,CAACjB,KAAK,CAAC+hB,iBAAiB,EAAE,IAAA5gB,eAAQ,EAAC,IAAA0I,8BAAuB,EAACgY,MAAM,CAAC,IAAA3gB,cAAK,EAAC4gB,SAAS,CAACxX,EAAE,CAAC,CAAC,EAAEwX,SAAS,CAACE,OAAO,CAAC,CAAC,CAAC;MACpI;MAEA,OAAOD,iBAAiB;IAC1B,CAAC,CAAC,CAAC;IACH,IAAIzK,kBAAkB,GAAG,IAAI,CAACvL,KAAK;IACnC,IAAIkW,oBAAoB,GAAG,IAAA5c,cAAO,EAAC,IAAAlE,eAAQ,EAACwgB,UAAU,EAAEpJ,YAAY,EAAEgJ,QAAQ,CAAC,CAACjc,GAAG,CAAC,UAAU8b,gBAAgB,EAAE;MAC9G,OAAO,IAAAzb,cAAO,EAACyb,gBAAgB,CAAC,CAAC9b,GAAG,CAAC,UAAUqR,UAAU,EAAE;QACzD,OAAOrC,KAAK,CAACqF,gBAAgB,CAAChD,UAAU,CAAC;MAC3C,CAAC,CAAC;IACJ,CAAC,CAAC,CAAC;IAEH,IAAI;MACF,KAAK,IAAIuL,oBAAoB,GAAG,IAAA5hB,eAAQ,EAACgX,kBAAkB,CAAC,EAAE6K,sBAAsB,GAAGD,oBAAoB,CAACvhB,IAAI,CAAC,CAAC,EAAE,CAACwhB,sBAAsB,CAACthB,IAAI,EAAEshB,sBAAsB,GAAGD,oBAAoB,CAACvhB,IAAI,CAAC,CAAC,EAAE;QACtM,IAAI+Y,iBAAiB,GAAGyI,sBAAsB,CAACvhB,KAAK;QACpDqhB,oBAAoB,CAAChhB,IAAI,CAACyY,iBAAiB,CAAC;MAC9C;IACF,CAAC,CAAC,OAAO0I,KAAK,EAAE;MACdd,GAAG,GAAG;QACJpgB,KAAK,EAAEkhB;MACT,CAAC;IACH,CAAC,SAAS;MACR,IAAI;QACF,IAAID,sBAAsB,IAAI,CAACA,sBAAsB,CAACthB,IAAI,KAAKmD,EAAE,GAAGke,oBAAoB,CAAC7d,MAAM,CAAC,EAAEL,EAAE,CAACjE,IAAI,CAACmiB,oBAAoB,CAAC;MACjI,CAAC,SAAS;QACR,IAAIZ,GAAG,EAAE,MAAMA,GAAG,CAACpgB,KAAK;MAC1B;IACF;IAEA,OAAO+gB,oBAAoB;EAC7B,CAAC;EAED,OAAOpL,SAAS;AAClB,CAAC,CAAC,CAAC;;;;;;;;;ACpiDH,IAAAwL,UAAA,GAAA1gB,OAAA;AAEA,SAAS2gB,OAAOA,CAAClP,MAAM,EAAE9E,OAAO,EAAEiU,cAAc,EAAE;EAChD,IAAIA,cAAc,KAAK,KAAK,CAAC,EAAE;IAC7BA,cAAc,GAAGnP,MAAM,CAACrN,OAAO;EACjC;EAEA,IAAIyc,sBAAsB,GAAG,OAAOD,cAAc,KAAK,UAAU,GAAGA,cAAc,CAAC,CAAC,GAAGA,cAAc;EACrG,OAAO,IAAI1L,oBAAS,CAACzD,MAAM,EAAE9E,OAAO,EAAEkU,sBAAsB,CAAC;AAC/D;AAEA,SAASC,aAAaA,CAACrP,MAAM,EAAE9E,OAAO,EAAE;EACtC,IAAIkU,sBAAsB,GAAG,OAAOpP,MAAM,CAACrN,OAAO,KAAK,UAAU,GAAGqN,MAAM,CAACrN,OAAO,CAAC,CAAC,GAAGqN,MAAM,CAACrN,OAAO;EACrG,OAAO,IAAI8Q,oBAAS,CAACzD,MAAM,EAAE9E,OAAO,EAAEkU,sBAAsB,CAAC;AAC/D;;;;;;;;ACdA,IAAA9gB,MAAA,GAAAC,OAAA;AACA,IAAI+gB,cAAc,GAAG;EACnBC,WAAW,EAAE;AACf,CAAC;AAED,IAAIC,SAAS,GAAAzjB,OAAA,CAAAyjB,SAAA,GACb;;AAEA;AACA,YAAY;EACV,SAASA,SAASA,CAACtU,OAAO,EAAE;IAC1B,IAAI,CAACuU,eAAe,GAAG,KAAK;IAC5B,IAAI,CAACC,KAAK,GAAG,EAAE;IACf,IAAI,CAACC,WAAW,GAAG,KAAK;IACxB,IAAI,CAACzU,OAAO,GAAG,IAAApP,eAAQ,EAAC,IAAAA,eAAQ,EAAC,CAAC,CAAC,EAAEwjB,cAAc,CAAC,EAAEpU,OAAO,CAAC;EAChE;EAEAsU,SAAS,CAAC/iB,SAAS,CAACmjB,UAAU,GAAG,UAAUC,QAAQ,EAAE;IACnD,IAAI,CAACF,WAAW,GAAG,IAAI;IAEvB,IAAIE,QAAQ,EAAE;MACZ,IAAI,CAAC,IAAI,CAAC3U,OAAO,CAACqU,WAAW,EAAE;QAC7B,IAAI,CAACO,QAAQ,CAACD,QAAQ,CAAC;QACvB;MACF;MAEA,IAAI,CAACE,OAAO,CAACF,QAAQ,CAAC;IACxB;IAEA,IAAI,CAACG,WAAW,CAAC,CAAC;EACpB,CAAC;EAEDR,SAAS,CAAC/iB,SAAS,CAACqjB,QAAQ,GAAG,UAAUG,IAAI,EAAE;IAC7C,IAAI,CAAC,IAAI,CAACN,WAAW,IAAI,IAAI,CAACF,eAAe,EAAE;MAC7C,IAAI,CAACC,KAAK,CAAC7hB,IAAI,CAACoiB,IAAI,CAAC;MACrB;IACF;IAEA,IAAI,IAAI,CAACP,KAAK,CAACnjB,MAAM,KAAK,CAAC,EAAE;MAC3B,MAAM,IAAIiD,KAAK,CAAC,8DAA8D,CAAC;IACjF;IAEA,IAAI,CAACugB,OAAO,CAACE,IAAI,CAAC;IAClB,IAAI,CAACD,WAAW,CAAC,CAAC;EACpB,CAAC;EAEDR,SAAS,CAAC/iB,SAAS,CAACyjB,KAAK,GAAG,YAAY;IACtC,IAAI,CAACR,KAAK,GAAG,EAAE;EACjB,CAAC;EAEDF,SAAS,CAAC/iB,SAAS,CAACujB,WAAW,GAAG,YAAY;IAC5C,IAAIG,YAAY,GAAG,IAAI,CAACT,KAAK,CAACxD,KAAK,CAAC,CAAC;IAErC,OAAOiE,YAAY,EAAE;MACnB,IAAI,CAACJ,OAAO,CAACI,YAAY,CAAC;MAC1BA,YAAY,GAAG,IAAI,CAACT,KAAK,CAACxD,KAAK,CAAC,CAAC;IACnC;EACF,CAAC;EAEDsD,SAAS,CAAC/iB,SAAS,CAACsjB,OAAO,GAAG,UAAUF,QAAQ,EAAE;IAChD,IAAI,CAACJ,eAAe,GAAG,IAAI;IAE3B,IAAI;MACFI,QAAQ,CAAC,CAAC;IACZ,CAAC,CAAC,OAAO/iB,CAAC,EAAE;MACV;MACA;MACA,IAAI,CAACojB,KAAK,CAAC,CAAC;MACZ,MAAMpjB,CAAC;IACT,CAAC,SAAS;MACR,IAAI,CAAC2iB,eAAe,GAAG,KAAK;IAC9B;EACF,CAAC;EAED,OAAOD,SAAS;AAClB,CAAC,CAAC,CAAC;;;;;;;;AC3EH,IAAI7N,QAAQ,GACZ;AACA,IAAIjC,GAAG,CAAC,CAAC;AACT,IAAI0Q,cAAc,GAAG,CAAC;AACtB,IAAIC,QAAQ,GAAAtkB,OAAA,CAAAskB,QAAA,GAAG;EACbC,MAAM,EAAE,SAAAA,CAAA,EAAY;IAClB,OAAO,IAAI,GAAGF,cAAc,EAAE;EAChC,CAAC;EACDG,QAAQ,EAAE,SAAAA,CAAUrZ,EAAE,EAAEsZ,KAAK,EAAE;IAC7B7O,QAAQ,CAAC9B,GAAG,CAAC3I,EAAE,EAAEsZ,KAAK,CAAC;IACvB,OAAOtZ,EAAE;EACX,CAAC;EACDyH,GAAG,EAAE,SAAAA,CAAUzH,EAAE,EAAE;IACjB,OAAOyK,QAAQ,CAAChD,GAAG,CAACzH,EAAE,CAAC;EACzB,CAAC;EACDuZ,IAAI,EAAE,SAAAA,CAAUvZ,EAAE,EAAE;IAClByK,QAAQ,CAAC+O,MAAM,CAACxZ,EAAE,CAAC;EACrB;AACF,CAAC;;;;;;;;AClBD,IAAAzI,YAAA,GAAAF,OAAA;AAEA,SAASoiB,WAAWA,CAAA,EAAG;EACrB,IAAIC,CAAC,GAAGC,MAAM;EAEd,IAAI,CAAC,CAACD,CAAC,CAACE,UAAU,EAAE;IAClB,OAAOF,CAAC,CAACE,UAAU;EACrB;EAEA,OAAOte,SAAS;AAClB;AAEA,SAASue,eAAeA,CAACC,OAAO,EAAE;EAChC,IAAI3iB,0BAAa,IAAI,OAAOwiB,MAAM,KAAK,WAAW,EAAE;IAClD;EACF;EAEA,IAAII,QAAQ,GAAGN,WAAW,CAAC,CAAC;EAE5B,IAAIM,QAAQ,EAAE;IACZA,QAAQ,CAACV,QAAQ,CAACS,OAAO,CAAC;EAC5B;AACF;;;;;;;;;;;ACtBA,IAAA1iB,MAAA,GAAAC,OAAA;AACA,IAAAE,YAAA,GAAAF,OAAA;AACA,IAAA+I,MAAA,GAAA/I,OAAA;AACA,IAAAsJ,MAAA,GAAAtJ,OAAA;AACA,IAAAgS,WAAA,GAAAhS,OAAA;AACA,IAAAuL,YAAA,GAAAvL,OAAA;AACA,IAAAiS,QAAA,GAAAjS,OAAA;AACA,IAAAiU,MAAA,GAAAjU,OAAA;AACA,IAAAkU,MAAA,GAAAlU,OAAA;AACA,IAAA2iB,UAAA,GAAA3iB,OAAA;AACA,IAAA4iB,SAAA,GAAA5iB,OAAA;AACA,IAAA6iB,SAAA,GAAA7iB,OAAA;AACA,IAAI8iB,qBAAqB,GAAG;EAC1BC,IAAI,EAAE,KAAK;EACXC,WAAW,EAAE;AACf,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;;AAEA,IAAIC,gBAAgB,GACpB;AACA,YAAY;EACV,IAAIC,YAAY,GAAG,EAAE;EACrB,OAAO,UAAUT,OAAO,EAAEU,EAAE,EAAE;IAC5BV,OAAO,IAAIS,YAAY,CAAC5jB,IAAI,CAACmjB,OAAO,CAAC;IACrC,IAAIzgB,MAAM,GAAGmhB,EAAE,CAACV,OAAO,IAAIS,YAAY,CAACA,YAAY,CAACllB,MAAM,GAAG,CAAC,CAAC,CAAC;IACjEykB,OAAO,IAAIS,YAAY,CAACE,GAAG,CAAC,CAAC;IAC7B,OAAOphB,MAAM;EACf,CAAC;AACH,CAAC,CAAC,CAAC;AAEH,IAAIqhB,iBAAiB;AAErB,CAAC,UAAUA,iBAAiB,EAAE;EAC5BA,iBAAiB,CAACA,iBAAiB,CAAC,YAAY,CAAC,GAAG,CAAC,CAAC,GAAG,YAAY;EACrEA,iBAAiB,CAACA,iBAAiB,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC,GAAG,SAAS;EAC/DA,iBAAiB,CAACA,iBAAiB,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC,GAAG,SAAS;AACjE,CAAC,EAAEA,iBAAiB,KAAKA,iBAAiB,GAAG,CAAC,CAAC,CAAC,CAAC;AAEjD,IAAIC,WAAW,GAAA9lB,OAAA,CAAA8lB,WAAA,GACf;;AAEA;AACA,YAAY;EACV;AACF;AACA;AACA;AACA;AACA;EACE,SAASA,WAAWA,CAACvN,OAAO,EAAEpJ,OAAO,EAAE;IACrC,IAAIgG,KAAK,GAAG,IAAI;IAEhB,IAAIhG,OAAO,KAAK,KAAK,CAAC,EAAE;MACtBA,OAAO,GAAG2W,WAAW,CAACvC,cAAc;IACtC;IAEA,IAAI,CAAChL,OAAO,GAAGA,OAAO;IACtB,IAAI,CAACwN,SAAS,GAAG,IAAItC,oBAAS,CAAC,CAAC;IAChC,IAAI,CAACuC,gBAAgB,GAAG,CAAC,CAAC;IAC1B,IAAI,CAACC,SAAS,GAAG,IAAIjU,GAAG,CAAC,CAAC;IAC1B,IAAI,CAACkU,gBAAgB,GAAG,IAAIlU,GAAG,CAAC,CAAC;IACjC,IAAI,CAACmU,aAAa,GAAG,IAAInU,GAAG,CAAC,CAAC;IAC9B,IAAI,CAACoU,aAAa,GAAG,IAAIpU,GAAG,CAAC,CAAC;IAC9B,IAAI,CAACqU,cAAc,GAAG,IAAIrU,GAAG,CAAC,CAAC;IAC/B,IAAI,CAACsU,aAAa,GAAG,IAAItU,GAAG,CAAC,CAAC;IAC9B;AACJ;AACA;;IAEI,IAAI,CAAC4R,WAAW,GAAG,KAAK;IACxB,IAAI,CAAC2C,OAAO,GAAGV,iBAAiB,CAACW,UAAU;IAC3C,IAAI,CAAC5Q,QAAQ,GAAG,IAAIjC,GAAG,CAAC,CAAC;IACzB,IAAI,CAACzC,SAAS,GAAG,IAAIc,GAAG,CAAC,CAAC;IAC1B;AACJ;AACA;;IAEI,IAAI,CAAC9E,IAAI,GAAG,IAAI,CAACnB,KAAK;IACtB;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;IAEI,IAAI,CAACM,IAAI,GAAG,UAAU9I,KAAK,EAAE8G,OAAO,EAAE;MACpC,IAAI,IAAAzG,cAAO,EAACL,KAAK,CAAC,EAAE;QAClB4R,KAAK,CAACsR,KAAK,CAACljB,KAAK,CAAC;QAElB,OAAO4R,KAAK,CAACnR,KAAK;MACpB;MAEA,IAAI6C,MAAM,GAAG,IAAAyD,mBAAY,EAAC,IAAAF,oBAAa,EAAC7G,KAAK,EAAE8G,OAAO,CAAC,CAAC;MAExD,IAAI8K,KAAK,CAACoR,OAAO,KAAKV,iBAAiB,CAACa,OAAO,EAAE;QAC/C;QACA,IAAI,CAACpkB,0BAAa,EAAE;UAClB,IAAAmG,WAAI,EAAC,KAAK,EAAE,UAAU,GAAG5B,MAAM,CAAC+C,IAAI,GAAG,mCAAmC,GAAGuL,KAAK,CAACoD,OAAO,CAACpN,EAAE,GAAG,yFAAyF,GAAGwb,IAAI,CAACC,SAAS,CAAC/f,MAAM,CAACG,IAAI,CAAC,CAAC;QAC1N;QAEA,OAAOmO,KAAK,CAACnR,KAAK;MACpB;MAEA,IAAImR,KAAK,CAACoR,OAAO,KAAKV,iBAAiB,CAACW,UAAU,IAAIrR,KAAK,CAAChG,OAAO,CAACqU,WAAW,EAAE;QAC/E;QACA,IAAI,CAAClhB,0BAAa,EAAE;UAClB,IAAAmG,WAAI,EAAC,KAAK,EAAE,UAAU,GAAG5B,MAAM,CAAC+C,IAAI,GAAG,yCAAyC,GAAGuL,KAAK,CAACoD,OAAO,CAACpN,EAAE,GAAG,6EAA6E,GAAGwb,IAAI,CAACC,SAAS,CAAC/f,MAAM,CAACG,IAAI,CAAC,CAAC;QACpN;MACF,CAAC,MAAM,IAAImO,KAAK,CAACoR,OAAO,KAAKV,iBAAiB,CAACgB,OAAO,EAAE;QACtD,MAAM,IAAIpjB,KAAK,CAAC,UAAU,GAAGoD,MAAM,CAAC+C,IAAI,GAAG,yCAAyC,GAAGuL,KAAK,CAACoD,OAAO,CAACpN,EAAE,GAAG,kHAAkH,GAAGwb,IAAI,CAACC,SAAS,CAAC/f,MAAM,CAACG,IAAI,CAAC,CAAC;MAC7P;MAEAmO,KAAK,CAAC4Q,SAAS,CAAChC,QAAQ,CAAC,YAAY;QACnC;QACA5O,KAAK,CAAC2R,OAAO,CAACjgB,MAAM,CAAC;QAErB,IAAIiZ,SAAS,GAAG3K,KAAK,CAAC2K,SAAS,CAACjZ,MAAM,CAAC;QAEvCsO,KAAK,CAACxH,MAAM,CAACmS,SAAS,EAAEjZ,MAAM,CAAC;MACjC,CAAC,CAAC;MAEF,OAAOsO,KAAK,CAAC4R,MAAM,CAAC,CAAC;MACrB;IACF,CAAC;;IAED,IAAI,CAACC,MAAM,GAAG,UAAUzjB,KAAK,EAAEwL,EAAE,EAAE;MACjC,IAAIkY,QAAQ,GAAG9R,KAAK,CAAC7C,MAAM,KAAKvD,EAAE,KAAKlD,qBAAc,CAACiE,MAAM,IAAIqF,KAAK,CAAC7C,MAAM,CAACnH,EAAE,KAAK4D,EAAE,CAAC;MACvF,IAAIjE,MAAM,GAAGmc,QAAQ,GAAG9R,KAAK,CAAC7C,MAAM,GAAG,IAAAkE,cAAO,EAACzH,EAAE,CAAC,GAAGA,EAAE,GAAGoG,KAAK,CAACS,QAAQ,CAAChD,GAAG,CAAC7D,EAAE,CAAC,IAAIuV,kBAAQ,CAAC1R,GAAG,CAAC7D,EAAE,CAAC;MAEpG,IAAI,CAACjE,MAAM,EAAE;QACX,IAAI,CAACmc,QAAQ,EAAE;UACb,MAAM,IAAIxjB,KAAK,CAAC,iCAAiC,GAAGsL,EAAE,GAAG,kBAAkB,GAAGoG,KAAK,CAAChK,EAAE,GAAG,IAAI,CAAC;QAChG,CAAC,CAAC;;QAGF,IAAI,CAAC7I,0BAAa,EAAE;UAClB,IAAAmG,WAAI,EAAC,KAAK,EAAE,WAAW,GAAG0M,KAAK,CAAChK,EAAE,GAAG,wCAAwC,GAAG5H,KAAK,CAACC,IAAI,CAAC;QAC7F;QAEA;MACF;MAEA,IAAI,SAAS,IAAIsH,MAAM,EAAE;QACvB;QACAA,MAAM,CAACuB,IAAI,CAAC,IAAAtM,eAAQ,EAAC,IAAAA,eAAQ,EAAC,CAAC,CAAC,EAAEwD,KAAK,CAAC,EAAE;UACxCqG,IAAI,EAAErG,KAAK,CAACqG,IAAI,KAAKyH,kBAAO,GAAG,EAAE,GAAG,IAAAtP,cAAK,EAACoT,KAAK,CAAChK,EAAE,CAAC,GAAG5H,KAAK,CAACqG,IAAI;UAChEuG,MAAM,EAAEgF,KAAK,CAAC+R;QAChB,CAAC,CAAC,CAAC;MACL,CAAC,MAAM;QACL;QACApc,MAAM,CAACuB,IAAI,CAAC9I,KAAK,CAACyD,IAAI,CAAC;MACzB;IACF,CAAC;IAED,IAAImgB,eAAe,GAAG,IAAApnB,eAAQ,EAAC,IAAAA,eAAQ,EAAC,CAAC,CAAC,EAAE+lB,WAAW,CAACvC,cAAc,CAAC,EAAEpU,OAAO,CAAC;IAEjF,IAAIiY,KAAK,GAAGD,eAAe,CAACC,KAAK;MAC7BC,MAAM,GAAGF,eAAe,CAACE,MAAM;MAC/B/U,MAAM,GAAG6U,eAAe,CAAC7U,MAAM;MAC/BnH,EAAE,GAAGgc,eAAe,CAAChc,EAAE;IAC3B,IAAImc,UAAU,GAAGnc,EAAE,KAAK1E,SAAS,GAAG0E,EAAE,GAAGoN,OAAO,CAACpN,EAAE;IACnD,IAAI,CAACA,EAAE,GAAGmc,UAAU;IACpB,IAAI,CAACD,MAAM,GAAGA,MAAM;IACpB,IAAI,CAACD,KAAK,GAAGA,KAAK;IAClB,IAAI,CAAC9U,MAAM,GAAGA,MAAM;IACpB,IAAI,CAACnD,OAAO,GAAGgY,eAAe;IAC9B,IAAI,CAACpB,SAAS,GAAG,IAAItC,oBAAS,CAAC;MAC7BD,WAAW,EAAE,IAAI,CAACrU,OAAO,CAACqU;IAC5B,CAAC,CAAC;IACF,IAAI,CAAC0D,SAAS,GAAG5C,kBAAQ,CAACC,MAAM,CAAC,CAAC;EACpC;EAEAtkB,MAAM,CAACuO,cAAc,CAACsX,WAAW,CAACplB,SAAS,EAAE,cAAc,EAAE;IAC3DkS,GAAG,EAAE,SAAAA,CAAA,EAAY;MACf,IAAIuC,KAAK,GAAG,IAAI;MAEhB,IAAI,IAAI,CAACoS,aAAa,EAAE;QACtB,OAAO,IAAI,CAACA,aAAa;MAC3B;MAEA,OAAO9B,gBAAgB,CAAC,IAAI,EAAE,YAAY;QACxCtQ,KAAK,CAACoS,aAAa,GAAGpS,KAAK,CAACoD,OAAO,CAACP,YAAY;QAChD,OAAO7C,KAAK,CAACoS,aAAa;MAC5B,CAAC,CAAC;IACJ,CAAC;IACD9Y,UAAU,EAAE,IAAI;IAChBC,YAAY,EAAE;EAChB,CAAC,CAAC;EACFzO,MAAM,CAACuO,cAAc,CAACsX,WAAW,CAACplB,SAAS,EAAE,OAAO,EAAE;IACpDkS,GAAG,EAAE,SAAAA,CAAA,EAAY;MACf,IAAI,CAACtQ,0BAAa,EAAE;QAClB,IAAAmG,WAAI,EAAC,IAAI,CAAC8d,OAAO,KAAKV,iBAAiB,CAACW,UAAU,EAAE,sDAAsD,GAAG,IAAI,CAACrb,EAAE,GAAG,4CAA4C,CAAC;MACtK;MAEA,OAAO,IAAI,CAAC4b,MAAM;IACpB,CAAC;IACDtY,UAAU,EAAE,IAAI;IAChBC,YAAY,EAAE;EAChB,CAAC,CAAC;EACF;AACF;AACA;AACA;AACA;AACA;;EAEEoX,WAAW,CAACplB,SAAS,CAAC8mB,OAAO,GAAG,UAAUxjB,KAAK,EAAEyjB,aAAa,EAAE;IAC9D,IAAI7iB,GAAG,EAAEC,EAAE;IAEX,IAAI;MACF,KAAK,IAAIC,EAAE,GAAG,IAAA3D,eAAQ,EAAC6C,KAAK,CAAC4K,OAAO,CAAC,EAAE7J,EAAE,GAAGD,EAAE,CAACtD,IAAI,CAAC,CAAC,EAAE,CAACuD,EAAE,CAACrD,IAAI,EAAEqD,EAAE,GAAGD,EAAE,CAACtD,IAAI,CAAC,CAAC,EAAE;QAC/E,IAAIyH,MAAM,GAAGlE,EAAE,CAACtD,KAAK;QACrB,IAAI,CAAC6M,IAAI,CAACrF,MAAM,EAAEjF,KAAK,EAAEyjB,aAAa,CAAC;MACzC;IACF,CAAC,CAAC,OAAOxiB,KAAK,EAAE;MACdL,GAAG,GAAG;QACJ7C,KAAK,EAAEkD;MACT,CAAC;IACH,CAAC,SAAS;MACR,IAAI;QACF,IAAIF,EAAE,IAAI,CAACA,EAAE,CAACrD,IAAI,KAAKmD,EAAE,GAAGC,EAAE,CAACI,MAAM,CAAC,EAAEL,EAAE,CAACjE,IAAI,CAACkE,EAAE,CAAC;MACrD,CAAC,SAAS;QACR,IAAIF,GAAG,EAAE,MAAMA,GAAG,CAAC7C,KAAK;MAC1B;IACF;EACF,CAAC;EAED+jB,WAAW,CAACplB,SAAS,CAACiN,MAAM,GAAG,UAAU3J,KAAK,EAAE6C,MAAM,EAAE;IACtD,IAAIvB,GAAG,EAAET,EAAE,EAAEgB,GAAG,EAAEf,EAAE,EAAE+M,GAAG,EAAE9M,EAAE,EAAE+B,GAAG,EAAEgL,EAAE;IAEtC,IAAIqD,KAAK,GAAG,IAAI,CAAC,CAAC;;IAGlBnR,KAAK,CAACsR,UAAU,GAAG,IAAI,CAAC4R,SAAS,CAAC,CAAC;;IAEnC,IAAI,CAACH,MAAM,GAAG/iB,KAAK,CAAC,CAAC;;IAErB,IAAI,IAAI,CAACmL,OAAO,CAACqY,OAAO,EAAE;MACxB,IAAI,CAACA,OAAO,CAAC,IAAI,CAACxjB,KAAK,CAAC;IAC1B,CAAC,CAAC;;IAGF,IAAI,IAAI,CAACkhB,QAAQ,EAAE;MACjB,IAAI,CAACA,QAAQ,CAAC7Y,IAAI,CAACxF,MAAM,CAACG,IAAI,EAAEhD,KAAK,CAAC;IACxC,CAAC,CAAC;;IAGF,IAAIA,KAAK,CAACT,KAAK,EAAE;MACf,IAAI;QACF,KAAK,IAAIyP,EAAE,GAAG,IAAA7R,eAAQ,EAAC,IAAI,CAACklB,cAAc,CAAC,EAAEpT,EAAE,GAAGD,EAAE,CAACxR,IAAI,CAAC,CAAC,EAAE,CAACyR,EAAE,CAACvR,IAAI,EAAEuR,EAAE,GAAGD,EAAE,CAACxR,IAAI,CAAC,CAAC,EAAE;UACrF,IAAIkmB,QAAQ,GAAGzU,EAAE,CAACxR,KAAK;UACvBimB,QAAQ,CAAC1jB,KAAK,CAACT,KAAK,CAAC;QACvB;MACF,CAAC,CAAC,OAAOmC,KAAK,EAAE;QACdJ,GAAG,GAAG;UACJvD,KAAK,EAAE2D;QACT,CAAC;MACH,CAAC,SAAS;QACR,IAAI;UACF,IAAIuN,EAAE,IAAI,CAACA,EAAE,CAACvR,IAAI,KAAKmD,EAAE,GAAGmO,EAAE,CAAC9N,MAAM,CAAC,EAAEL,EAAE,CAACjE,IAAI,CAACoS,EAAE,CAAC;QACrD,CAAC,SAAS;UACR,IAAI1N,GAAG,EAAE,MAAMA,GAAG,CAACvD,KAAK;QAC1B;MACF;IACF;IAEA,IAAI;MACF,KAAK,IAAI4lB,EAAE,GAAG,IAAAxmB,eAAQ,EAAC,IAAI,CAAC8kB,SAAS,CAAC,EAAE2B,EAAE,GAAGD,EAAE,CAACnmB,IAAI,CAAC,CAAC,EAAE,CAAComB,EAAE,CAAClmB,IAAI,EAAEkmB,EAAE,GAAGD,EAAE,CAACnmB,IAAI,CAAC,CAAC,EAAE;QAChF,IAAIkmB,QAAQ,GAAGE,EAAE,CAACnmB,KAAK;QACvBimB,QAAQ,CAAC1jB,KAAK,EAAEA,KAAK,CAACT,KAAK,CAAC;MAC9B;IACF,CAAC,CAAC,OAAOyC,KAAK,EAAE;MACdH,GAAG,GAAG;QACJ9D,KAAK,EAAEiE;MACT,CAAC;IACH,CAAC,SAAS;MACR,IAAI;QACF,IAAI4hB,EAAE,IAAI,CAACA,EAAE,CAAClmB,IAAI,KAAKoD,EAAE,GAAG6iB,EAAE,CAACziB,MAAM,CAAC,EAAEJ,EAAE,CAAClE,IAAI,CAAC+mB,EAAE,CAAC;MACrD,CAAC,SAAS;QACR,IAAI9hB,GAAG,EAAE,MAAMA,GAAG,CAAC9D,KAAK;MAC1B;IACF;IAEA,IAAI;MACF,KAAK,IAAI8lB,EAAE,GAAG,IAAA1mB,eAAQ,EAAC,IAAI,CAAC+kB,gBAAgB,CAAC,EAAE4B,EAAE,GAAGD,EAAE,CAACrmB,IAAI,CAAC,CAAC,EAAE,CAACsmB,EAAE,CAACpmB,IAAI,EAAEomB,EAAE,GAAGD,EAAE,CAACrmB,IAAI,CAAC,CAAC,EAAE;QACvF,IAAIumB,eAAe,GAAGD,EAAE,CAACrmB,KAAK;QAC9BsmB,eAAe,CAAC,IAAI,CAAC/jB,KAAK,CAAC4C,OAAO,EAAE,IAAI,CAAC5C,KAAK,CAACwR,OAAO,GAAG,IAAI,CAACxR,KAAK,CAACwR,OAAO,CAAC5O,OAAO,GAAGH,SAAS,CAAC;MAClG;IACF,CAAC,CAAC,OAAO4M,KAAK,EAAE;MACdxB,GAAG,GAAG;QACJ9P,KAAK,EAAEsR;MACT,CAAC;IACH,CAAC,SAAS;MACR,IAAI;QACF,IAAIyU,EAAE,IAAI,CAACA,EAAE,CAACpmB,IAAI,KAAKqD,EAAE,GAAG8iB,EAAE,CAAC3iB,MAAM,CAAC,EAAEH,EAAE,CAACnE,IAAI,CAACinB,EAAE,CAAC;MACrD,CAAC,SAAS;QACR,IAAIhW,GAAG,EAAE,MAAMA,GAAG,CAAC9P,KAAK;MAC1B;IACF;IAEA,IAAI8d,MAAM,GAAG,IAAAtL,0BAAc,EAACvQ,KAAK,CAACmO,aAAa,IAAI,EAAE,EAAE,IAAI,CAACoG,OAAO,CAAC;IAEpE,IAAI,IAAI,CAACvU,KAAK,CAACmO,aAAa,IAAI0N,MAAM,EAAE;MACtC;MACA,IAAImI,mBAAmB,GAAGhkB,KAAK,CAACmO,aAAa,CAAC8V,IAAI,CAAC,UAAUnV,EAAE,EAAE;QAC/D,OAAOA,EAAE,CAACtP,IAAI,KAAK,OAAO,IAAIsP,EAAE,CAACR,MAAM,KAAK6C,KAAK,CAACoD,OAAO;MAC3D,CAAC,CAAC;MACF,IAAI2P,QAAQ,GAAGF,mBAAmB,IAAIA,mBAAmB,CAAChhB,IAAI,GAAG,IAAAN,iBAAU,EAACshB,mBAAmB,CAAChhB,IAAI,EAAEhD,KAAK,CAAC4C,OAAO,EAAEC,MAAM,CAAC,GAAGJ,SAAS;MAExI,IAAI;QACF,KAAK,IAAI0hB,EAAE,GAAG,IAAAhnB,eAAQ,EAAC,IAAI,CAACilB,aAAa,CAAC,EAAEgC,EAAE,GAAGD,EAAE,CAAC3mB,IAAI,CAAC,CAAC,EAAE,CAAC4mB,EAAE,CAAC1mB,IAAI,EAAE0mB,EAAE,GAAGD,EAAE,CAAC3mB,IAAI,CAAC,CAAC,EAAE;UACpF,IAAIkmB,QAAQ,GAAGU,EAAE,CAAC3mB,KAAK;UACvBimB,QAAQ,CAAC,IAAA1W,mBAAU,EAAC,IAAI,CAAC7F,EAAE,EAAE+c,QAAQ,CAAC,CAAC;QACzC;MACF,CAAC,CAAC,OAAOhhB,KAAK,EAAE;QACdJ,GAAG,GAAG;UACJ/E,KAAK,EAAEmF;QACT,CAAC;MACH,CAAC,SAAS;QACR,IAAI;UACF,IAAIkhB,EAAE,IAAI,CAACA,EAAE,CAAC1mB,IAAI,KAAKoQ,EAAE,GAAGqW,EAAE,CAACjjB,MAAM,CAAC,EAAE4M,EAAE,CAAClR,IAAI,CAACunB,EAAE,CAAC;QACrD,CAAC,SAAS;UACR,IAAIrhB,GAAG,EAAE,MAAMA,GAAG,CAAC/E,KAAK;QAC1B;MACF;MAEA,IAAI,CAACkK,IAAI,CAAC,CAAC;IACb;EACF,CAAC;EACD;AACF;AACA;AACA;AACA;AACA;;EAGE6Z,WAAW,CAACplB,SAAS,CAAC2nB,YAAY,GAAG,UAAUX,QAAQ,EAAE;IACvD,IAAI,CAACzB,SAAS,CAACzT,GAAG,CAACkV,QAAQ,CAAC,CAAC,CAAC;;IAE9B,IAAI,IAAI,CAACnB,OAAO,KAAKV,iBAAiB,CAACgB,OAAO,EAAE;MAC9Ca,QAAQ,CAAC,IAAI,CAAC1jB,KAAK,EAAE,IAAI,CAACA,KAAK,CAACT,KAAK,CAAC;IACxC;IAEA,OAAO,IAAI;EACb,CAAC;EAEDuiB,WAAW,CAACplB,SAAS,CAACoJ,SAAS,GAAG,UAAUwe,sBAAsB;EAAE;EACpEC,aAAa,EAAEC,gBAAgB,EAAE;IAC/B,IAAIrT,KAAK,GAAG,IAAI;IAEhB,IAAI,CAACmT,sBAAsB,EAAE;MAC3B,OAAO;QACLlS,WAAW,EAAE,SAAAA,CAAA,EAAY;UACvB,OAAO,KAAK,CAAC;QACf;MACF,CAAC;IACH;IAEA,IAAIsR,QAAQ;IACZ,IAAIe,wBAAwB,GAAGD,gBAAgB;IAE/C,IAAI,OAAOF,sBAAsB,KAAK,UAAU,EAAE;MAChDZ,QAAQ,GAAGY,sBAAsB;IACnC,CAAC,MAAM;MACLZ,QAAQ,GAAGY,sBAAsB,CAAC9mB,IAAI,CAACkU,IAAI,CAAC4S,sBAAsB,CAAC;MACnEG,wBAAwB,GAAGH,sBAAsB,CAACI,QAAQ,CAAChT,IAAI,CAAC4S,sBAAsB,CAAC;IACzF;IAEA,IAAI,CAACrC,SAAS,CAACzT,GAAG,CAACkV,QAAQ,CAAC,CAAC,CAAC;;IAE9B,IAAI,IAAI,CAACnB,OAAO,KAAKV,iBAAiB,CAACgB,OAAO,EAAE;MAC9Ca,QAAQ,CAAC,IAAI,CAAC1jB,KAAK,CAAC;IACtB;IAEA,IAAIykB,wBAAwB,EAAE;MAC5B,IAAI,CAAChG,MAAM,CAACgG,wBAAwB,CAAC;IACvC;IAEA,OAAO;MACLrS,WAAW,EAAE,SAAAA,CAAA,EAAY;QACvBsR,QAAQ,IAAIvS,KAAK,CAAC8Q,SAAS,CAACtB,MAAM,CAAC+C,QAAQ,CAAC;QAC5Ce,wBAAwB,IAAItT,KAAK,CAACiR,aAAa,CAACzB,MAAM,CAAC8D,wBAAwB,CAAC;MAClF;IACF,CAAC;EACH,CAAC;EACD;AACF;AACA;AACA;;EAGE3C,WAAW,CAACplB,SAAS,CAACioB,OAAO,GAAG,UAAUjB,QAAQ,EAAE;IAClD,IAAI,CAACrB,cAAc,CAAC7T,GAAG,CAACkV,QAAQ,CAAC;IACjC,OAAO,IAAI;EACb,CAAC;EACD;AACF;AACA;AACA;;EAGE5B,WAAW,CAACplB,SAAS,CAACkoB,MAAM,GAAG,UAAUlB,QAAQ,EAAE;IACjD,IAAI,CAACpB,aAAa,CAAC9T,GAAG,CAACkV,QAAQ,CAAC;IAChC,OAAO,IAAI;EACb,CAAC;EACD;AACF;AACA;AACA;;EAGE5B,WAAW,CAACplB,SAAS,CAACmoB,QAAQ,GAAG,UAAUnB,QAAQ,EAAE;IACnD,IAAI,CAACxB,gBAAgB,CAAC1T,GAAG,CAACkV,QAAQ,CAAC;IACnC,OAAO,IAAI;EACb,CAAC;EACD;AACF;AACA;AACA;;EAGE5B,WAAW,CAACplB,SAAS,CAACooB,MAAM,GAAG,UAAUpB,QAAQ,EAAE;IACjD,IAAI,CAACvB,aAAa,CAAC3T,GAAG,CAACkV,QAAQ,CAAC;IAChC,OAAO,IAAI;EACb,CAAC;EACD;AACF;AACA;AACA;;EAGE5B,WAAW,CAACplB,SAAS,CAAC+hB,MAAM,GAAG,UAAUiF,QAAQ,EAAE;IACjD,IAAI,CAACtB,aAAa,CAAC5T,GAAG,CAACkV,QAAQ,CAAC;IAChC,OAAO,IAAI;EACb,CAAC;EACD;AACF;AACA;AACA;;EAGE5B,WAAW,CAACplB,SAAS,CAACqoB,GAAG,GAAG,UAAUrB,QAAQ,EAAE;IAC9C,IAAI,CAACzB,SAAS,CAACtB,MAAM,CAAC+C,QAAQ,CAAC;IAC/B,IAAI,CAACrB,cAAc,CAAC1B,MAAM,CAAC+C,QAAQ,CAAC;IACpC,IAAI,CAACpB,aAAa,CAAC3B,MAAM,CAAC+C,QAAQ,CAAC;IACnC,IAAI,CAACvB,aAAa,CAACxB,MAAM,CAAC+C,QAAQ,CAAC;IACnC,IAAI,CAACtB,aAAa,CAACzB,MAAM,CAAC+C,QAAQ,CAAC;IACnC,IAAI,CAACxB,gBAAgB,CAACvB,MAAM,CAAC+C,QAAQ,CAAC;IACtC,OAAO,IAAI;EACb,CAAC;EACD;AACF;AACA;AACA;;EAGE5B,WAAW,CAACplB,SAAS,CAACqL,KAAK,GAAG,UAAUiM,YAAY,EAAE;IACpD,IAAI7C,KAAK,GAAG,IAAI;IAEhB,IAAI,IAAI,CAACoR,OAAO,KAAKV,iBAAiB,CAACgB,OAAO,EAAE;MAC9C;MACA,OAAO,IAAI;IACb;IAEAvC,kBAAQ,CAACE,QAAQ,CAAC,IAAI,CAAC0C,SAAS,EAAE,IAAI,CAAC;IACvC,IAAI,CAACtD,WAAW,GAAG,IAAI;IACvB,IAAI,CAAC2C,OAAO,GAAGV,iBAAiB,CAACgB,OAAO;IACxC,IAAImC,aAAa,GAAGhR,YAAY,KAAKvR,SAAS,GAAG,IAAI,CAACuR,YAAY,GAAGyN,gBAAgB,CAAC,IAAI,EAAE,YAAY;MACtG,OAAO,IAAA1Q,cAAO,EAACiD,YAAY,CAAC,GAAG7C,KAAK,CAACoD,OAAO,CAAC2C,YAAY,CAAClD,YAAY,CAAC,GAAG7C,KAAK,CAACoD,OAAO,CAAC2C,YAAY,CAAChG,YAAK,CAACW,IAAI,CAACmC,YAAY,EAAE7C,KAAK,CAACoD,OAAO,CAAC3R,OAAO,CAAC,CAAC;IACvJ,CAAC,CAAC;IAEF,IAAI,IAAI,CAACuI,OAAO,CAAC+V,QAAQ,EAAE;MACzB,IAAI,CAAC+D,SAAS,CAAC,CAAC;IAClB;IAEA,IAAI,CAAClD,SAAS,CAAClC,UAAU,CAAC,YAAY;MACpC1O,KAAK,CAACxH,MAAM,CAACqb,aAAa,EAAEhb,kBAAS,CAAC;IACxC,CAAC,CAAC;IACF,OAAO,IAAI;EACb,CAAC;EACD;AACF;AACA;AACA;AACA;;EAGE8X,WAAW,CAACplB,SAAS,CAACuL,IAAI,GAAG,YAAY;IACvC,IAAItE,GAAG,EAAE9C,EAAE,EAAEiE,GAAG,EAAEhE,EAAE,EAAE4c,GAAG,EAAE3c,EAAE,EAAEod,GAAG,EAAErQ,EAAE,EAAEoX,IAAI,EAAElW,EAAE;IAEhD,IAAI;MACF,KAAK,IAAIC,EAAE,GAAG,IAAA9R,eAAQ,EAAC,IAAI,CAAC8kB,SAAS,CAAC,EAAE0B,EAAE,GAAG1U,EAAE,CAACzR,IAAI,CAAC,CAAC,EAAE,CAACmmB,EAAE,CAACjmB,IAAI,EAAEimB,EAAE,GAAG1U,EAAE,CAACzR,IAAI,CAAC,CAAC,EAAE;QAChF,IAAIkmB,QAAQ,GAAGC,EAAE,CAAClmB,KAAK;QACvB,IAAI,CAACwkB,SAAS,CAACtB,MAAM,CAAC+C,QAAQ,CAAC;MACjC;IACF,CAAC,CAAC,OAAO1f,KAAK,EAAE;MACdL,GAAG,GAAG;QACJ5F,KAAK,EAAEiG;MACT,CAAC;IACH,CAAC,SAAS;MACR,IAAI;QACF,IAAI2f,EAAE,IAAI,CAACA,EAAE,CAACjmB,IAAI,KAAKmD,EAAE,GAAGoO,EAAE,CAAC/N,MAAM,CAAC,EAAEL,EAAE,CAACjE,IAAI,CAACqS,EAAE,CAAC;MACrD,CAAC,SAAS;QACR,IAAItL,GAAG,EAAE,MAAMA,GAAG,CAAC5F,KAAK;MAC1B;IACF;IAEA,IAAI;MACF,KAAK,IAAI6lB,EAAE,GAAG,IAAAzmB,eAAQ,EAAC,IAAI,CAACglB,aAAa,CAAC,EAAE0B,EAAE,GAAGD,EAAE,CAACpmB,IAAI,CAAC,CAAC,EAAE,CAACqmB,EAAE,CAACnmB,IAAI,EAAEmmB,EAAE,GAAGD,EAAE,CAACpmB,IAAI,CAAC,CAAC,EAAE;QACpF,IAAIkmB,QAAQ,GAAGG,EAAE,CAACpmB,KAAK,CAAC,CAAC;;QAEzBimB,QAAQ,CAAC,CAAC;QACV,IAAI,CAACvB,aAAa,CAACxB,MAAM,CAAC+C,QAAQ,CAAC;MACrC;IACF,CAAC,CAAC,OAAOte,KAAK,EAAE;MACdN,GAAG,GAAG;QACJ/G,KAAK,EAAEqH;MACT,CAAC;IACH,CAAC,SAAS;MACR,IAAI;QACF,IAAIye,EAAE,IAAI,CAACA,EAAE,CAACnmB,IAAI,KAAKoD,EAAE,GAAG8iB,EAAE,CAAC1iB,MAAM,CAAC,EAAEJ,EAAE,CAAClE,IAAI,CAACgnB,EAAE,CAAC;MACrD,CAAC,SAAS;QACR,IAAI9e,GAAG,EAAE,MAAMA,GAAG,CAAC/G,KAAK;MAC1B;IACF;IAEA,IAAI;MACF,KAAK,IAAI+lB,EAAE,GAAG,IAAA3mB,eAAQ,EAAC,IAAI,CAAC+kB,gBAAgB,CAAC,EAAEiC,EAAE,GAAGL,EAAE,CAACtmB,IAAI,CAAC,CAAC,EAAE,CAAC2mB,EAAE,CAACzmB,IAAI,EAAEymB,EAAE,GAAGL,EAAE,CAACtmB,IAAI,CAAC,CAAC,EAAE;QACvF,IAAIkmB,QAAQ,GAAGS,EAAE,CAAC1mB,KAAK;QACvB,IAAI,CAACykB,gBAAgB,CAACvB,MAAM,CAAC+C,QAAQ,CAAC;MACxC;IACF,CAAC,CAAC,OAAO9F,KAAK,EAAE;MACdF,GAAG,GAAG;QACJ3f,KAAK,EAAE6f;MACT,CAAC;IACH,CAAC,SAAS;MACR,IAAI;QACF,IAAIuG,EAAE,IAAI,CAACA,EAAE,CAACzmB,IAAI,KAAKqD,EAAE,GAAG+iB,EAAE,CAAC5iB,MAAM,CAAC,EAAEH,EAAE,CAACnE,IAAI,CAACknB,EAAE,CAAC;MACrD,CAAC,SAAS;QACR,IAAIpG,GAAG,EAAE,MAAMA,GAAG,CAAC3f,KAAK;MAC1B;IACF;IAEA,IAAI;MACF,KAAK,IAAIqmB,EAAE,GAAG,IAAAjnB,eAAQ,EAAC,IAAI,CAACilB,aAAa,CAAC,EAAE+C,EAAE,GAAGf,EAAE,CAAC5mB,IAAI,CAAC,CAAC,EAAE,CAAC2nB,EAAE,CAACznB,IAAI,EAAEynB,EAAE,GAAGf,EAAE,CAAC5mB,IAAI,CAAC,CAAC,EAAE;QACpF,IAAIkmB,QAAQ,GAAGyB,EAAE,CAAC1nB,KAAK;QACvB,IAAI,CAAC2kB,aAAa,CAACzB,MAAM,CAAC+C,QAAQ,CAAC;MACrC;IACF,CAAC,CAAC,OAAOzE,KAAK,EAAE;MACdd,GAAG,GAAG;QACJpgB,KAAK,EAAEkhB;MACT,CAAC;IACH,CAAC,SAAS;MACR,IAAI;QACF,IAAIkG,EAAE,IAAI,CAACA,EAAE,CAACznB,IAAI,KAAKoQ,EAAE,GAAGsW,EAAE,CAACljB,MAAM,CAAC,EAAE4M,EAAE,CAAClR,IAAI,CAACwnB,EAAE,CAAC;MACrD,CAAC,SAAS;QACR,IAAIjG,GAAG,EAAE,MAAMA,GAAG,CAACpgB,KAAK;MAC1B;IACF,CAAC,CAAC;;IAGF,IAAI,CAAC6T,QAAQ,CAAC/C,OAAO,CAAC,UAAUK,KAAK,EAAE;MACrC,IAAI,IAAAnM,iBAAU,EAACmM,KAAK,CAACjH,IAAI,CAAC,EAAE;QAC1BiH,KAAK,CAACjH,IAAI,CAAC,CAAC;MACd;IACF,CAAC,CAAC;IAEF,IAAI;MACF;MACA,KAAK,IAAImd,EAAE,GAAG,IAAAjoB,eAAQ,EAAC,IAAAwB,WAAI,EAAC,IAAI,CAACqjB,gBAAgB,CAAC,CAAC,EAAEqD,EAAE,GAAGD,EAAE,CAAC5nB,IAAI,CAAC,CAAC,EAAE,CAAC6nB,EAAE,CAAC3nB,IAAI,EAAE2nB,EAAE,GAAGD,EAAE,CAAC5nB,IAAI,CAAC,CAAC,EAAE;QAC7F,IAAI6B,GAAG,GAAGgmB,EAAE,CAAC5nB,KAAK;QAClB,IAAI,CAAC2lB,KAAK,CAACkC,YAAY,CAAC,IAAI,CAACtD,gBAAgB,CAAC3iB,GAAG,CAAC,CAAC;MACrD;IACF,CAAC,CAAC,OAAOkmB,MAAM,EAAE;MACfL,IAAI,GAAG;QACLnnB,KAAK,EAAEwnB;MACT,CAAC;IACH,CAAC,SAAS;MACR,IAAI;QACF,IAAIF,EAAE,IAAI,CAACA,EAAE,CAAC3nB,IAAI,KAAKsR,EAAE,GAAGoW,EAAE,CAAClkB,MAAM,CAAC,EAAE8N,EAAE,CAACpS,IAAI,CAACwoB,EAAE,CAAC;MACrD,CAAC,SAAS;QACR,IAAIF,IAAI,EAAE,MAAMA,IAAI,CAACnnB,KAAK;MAC5B;IACF;IAEA,IAAI,CAACgkB,SAAS,CAAC5B,KAAK,CAAC,CAAC;IACtB,IAAI,CAACP,WAAW,GAAG,KAAK;IACxB,IAAI,CAAC2C,OAAO,GAAGV,iBAAiB,CAACa,OAAO;IACxCpC,kBAAQ,CAACI,IAAI,CAAC,IAAI,CAACwC,SAAS,CAAC;IAC7B,OAAO,IAAI;EACb,CAAC;EAEDpB,WAAW,CAACplB,SAAS,CAAC+lB,KAAK,GAAG,UAAUpR,MAAM,EAAE;IAC9C,IAAIF,KAAK,GAAG,IAAI;IAEhB,IAAI,IAAI,CAACoR,OAAO,KAAKV,iBAAiB,CAACW,UAAU,IAAI,IAAI,CAACrX,OAAO,CAACqU,WAAW,EAAE;MAC7E;MACA,IAAI,CAAClhB,0BAAa,EAAE;QAClB,IAAAmG,WAAI,EAAC,KAAK,EAAE4M,MAAM,CAAC7U,MAAM,GAAG,iDAAiD,GAAG,IAAI,CAAC+X,OAAO,CAACpN,EAAE,GAAG,8EAA8E,GAAGwb,IAAI,CAACC,SAAS,CAACrjB,KAAK,CAAC,CAAC;MAC3M;IACF,CAAC,MAAM,IAAI,IAAI,CAACgjB,OAAO,KAAKV,iBAAiB,CAACgB,OAAO,EAAE;MACrD,MAAM,IAAIpjB,KAAK;MAAE;MACjB4R,MAAM,CAAC7U,MAAM,GAAG,iDAAiD,GAAG,IAAI,CAAC+X,OAAO,CAACpN,EAAE,GAAG,yGAAyG,CAAC;IAClM;IAEA,IAAI,CAAC4a,SAAS,CAAChC,QAAQ,CAAC,YAAY;MAClC,IAAIyF,IAAI,EAAE3kB,EAAE;MAEZ,IAAIib,SAAS,GAAG3K,KAAK,CAACnR,KAAK;MAC3B,IAAIylB,YAAY,GAAG,KAAK;MACxB,IAAIC,cAAc,GAAG,EAAE;MAEvB,IAAIC,OAAO,GAAG,SAAAA,CAAUhI,OAAO,EAAE;QAC/B,IAAI9a,MAAM,GAAG,IAAAyD,mBAAY,EAACqX,OAAO,CAAC;QAElCxM,KAAK,CAAC2R,OAAO,CAACjgB,MAAM,CAAC;QAErBiZ,SAAS,GAAG2F,gBAAgB,CAACtQ,KAAK,EAAE,YAAY;UAC9C,OAAOA,KAAK,CAACoD,OAAO,CAACf,UAAU,CAACsI,SAAS,EAAEjZ,MAAM,CAAC;QACpD,CAAC,CAAC;QACF6iB,cAAc,CAAC5nB,IAAI,CAACjB,KAAK,CAAC6oB,cAAc,EAAE,IAAA1nB,eAAQ,EAAC8d,SAAS,CAAClR,OAAO,CAACzI,GAAG,CAAC,UAAUwO,CAAC,EAAE;UACpF,OAAO,IAAAK,wBAAiB,EAACL,CAAC,EAAEmL,SAAS,CAAC;QACxC,CAAC,CAAC,CAAC,CAAC;QACJ2J,YAAY,GAAGA,YAAY,IAAI,CAAC,CAAC3J,SAAS,CAACC,OAAO;MACpD,CAAC;MAED,IAAI;QACF,KAAK,IAAI6J,QAAQ,GAAG,IAAAzoB,eAAQ,EAACkU,MAAM,CAAC,EAAEwU,UAAU,GAAGD,QAAQ,CAACpoB,IAAI,CAAC,CAAC,EAAE,CAACqoB,UAAU,CAACnoB,IAAI,EAAEmoB,UAAU,GAAGD,QAAQ,CAACpoB,IAAI,CAAC,CAAC,EAAE;UAClH,IAAImgB,OAAO,GAAGkI,UAAU,CAACpoB,KAAK;UAE9BkoB,OAAO,CAAChI,OAAO,CAAC;QAClB;MACF,CAAC,CAAC,OAAOmI,MAAM,EAAE;QACfN,IAAI,GAAG;UACLznB,KAAK,EAAE+nB;QACT,CAAC;MACH,CAAC,SAAS;QACR,IAAI;UACF,IAAID,UAAU,IAAI,CAACA,UAAU,CAACnoB,IAAI,KAAKmD,EAAE,GAAG+kB,QAAQ,CAAC1kB,MAAM,CAAC,EAAEL,EAAE,CAACjE,IAAI,CAACgpB,QAAQ,CAAC;QACjF,CAAC,SAAS;UACR,IAAIJ,IAAI,EAAE,MAAMA,IAAI,CAACznB,KAAK;QAC5B;MACF;MAEA+d,SAAS,CAACC,OAAO,GAAG0J,YAAY;MAChC3J,SAAS,CAAClR,OAAO,GAAG8a,cAAc;MAElCvU,KAAK,CAACxH,MAAM,CAACmS,SAAS,EAAE,IAAAxV,mBAAY,EAAC+K,MAAM,CAACA,MAAM,CAAC7U,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;IAClE,CAAC,CAAC;EACJ,CAAC;EACD;AACF;AACA;AACA;AACA;;EAGEslB,WAAW,CAACplB,SAAS,CAACqpB,MAAM,GAAG,UAAUxmB,KAAK,EAAE;IAC9C,OAAO,IAAI,CAAC8I,IAAI,CAACqJ,IAAI,CAAC,IAAI,EAAEnS,KAAK,CAAC;EACpC,CAAC;EACD;AACF;AACA;AACA;AACA;AACA;AACA;;EAGEuiB,WAAW,CAACplB,SAAS,CAACof,SAAS,GAAG,UAAUvc,KAAK,EAAE;IACjD,IAAI4R,KAAK,GAAG,IAAI;IAEhB,IAAItO,MAAM,GAAG,IAAAyD,mBAAY,EAAC/G,KAAK,CAAC;IAEhC,IAAIsD,MAAM,CAAC+C,IAAI,CAAC5I,OAAO,CAACwM,0BAAa,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAACxJ,KAAK,CAACqQ,UAAU,CAACF,IAAI,CAAC,UAAU6V,SAAS,EAAE;MAC/F,OAAOA,SAAS,CAAChpB,OAAO,CAACwM,0BAAa,CAAC,KAAK,CAAC;IAC/C,CAAC,CAAC,EAAE;MACF,MAAM3G,MAAM,CAACG,IAAI,CAACA,IAAI;IACxB;IAEA,IAAI8Y,SAAS,GAAG2F,gBAAgB,CAAC,IAAI,EAAE,YAAY;MACjD,OAAOtQ,KAAK,CAACoD,OAAO,CAACf,UAAU,CAACrC,KAAK,CAACnR,KAAK,EAAE6C,MAAM,CAAC;IACtD,CAAC,CAAC;IACF,OAAOiZ,SAAS;EAClB,CAAC;EAEDgG,WAAW,CAACplB,SAAS,CAAComB,OAAO,GAAG,UAAUvjB,KAAK,EAAE;IAC/C,IAAI0mB,IAAI,EAAEplB,EAAE;IAEZ,IAAI;MACF,KAAK,IAAIC,EAAE,GAAG,IAAA3D,eAAQ,EAAC,IAAI,CAAC+P,SAAS,CAAC,EAAEnM,EAAE,GAAGD,EAAE,CAACtD,IAAI,CAAC,CAAC,EAAE,CAACuD,EAAE,CAACrD,IAAI,EAAEqD,EAAE,GAAGD,EAAE,CAACtD,IAAI,CAAC,CAAC,EAAE;QAChF,IAAI2J,EAAE,GAAGpG,EAAE,CAACtD,KAAK;QACjB,IAAIyR,KAAK,GAAG,IAAI,CAAC0C,QAAQ,CAAChD,GAAG,CAACzH,EAAE,CAAC;QAEjC,IAAI,CAAC+H,KAAK,EAAE;UACV,MAAM,IAAIzP,KAAK,CAAC,2BAA2B,GAAGF,KAAK,GAAG,sBAAsB,GAAG,IAAI,CAAC4H,EAAE,GAAG,0BAA0B,GAAGA,EAAE,GAAG,IAAI,CAAC;QAClI;QAEA+H,KAAK,CAAC7G,IAAI,CAAC9I,KAAK,CAAC;MACnB;IACF,CAAC,CAAC,OAAO2mB,MAAM,EAAE;MACfD,IAAI,GAAG;QACLloB,KAAK,EAAEmoB;MACT,CAAC;IACH,CAAC,SAAS;MACR,IAAI;QACF,IAAInlB,EAAE,IAAI,CAACA,EAAE,CAACrD,IAAI,KAAKmD,EAAE,GAAGC,EAAE,CAACI,MAAM,CAAC,EAAEL,EAAE,CAACjE,IAAI,CAACkE,EAAE,CAAC;MACrD,CAAC,SAAS;QACR,IAAImlB,IAAI,EAAE,MAAMA,IAAI,CAACloB,KAAK;MAC5B;IACF;EACF,CAAC;EAED+jB,WAAW,CAACplB,SAAS,CAACypB,KAAK,GAAG,UAAU3K,UAAU,EAAE;IAClD,IAAIrK,KAAK,GAAG,IAAI;IAEhB,IAAI,CAAC6Q,gBAAgB,CAACxG,UAAU,CAACrU,EAAE,CAAC,GAAG,IAAI,CAACic,KAAK,CAACgD,UAAU,CAAC,YAAY;MACvE,IAAI5K,UAAU,CAACzQ,EAAE,EAAE;QACjBoG,KAAK,CAAC6R,MAAM,CAACxH,UAAU,CAAC3Y,MAAM,EAAE2Y,UAAU,CAACzQ,EAAE,CAAC;MAChD,CAAC,MAAM;QACLoG,KAAK,CAAC9I,IAAI,CAACmT,UAAU,CAAC3Y,MAAM,CAAC;MAC/B;IACF,CAAC,EAAE2Y,UAAU,CAACnQ,KAAK,CAAC;EACtB,CAAC;EAEDyW,WAAW,CAACplB,SAAS,CAAC6L,MAAM,GAAG,UAAUkE,MAAM,EAAE;IAC/C,IAAI,CAAC2W,KAAK,CAACkC,YAAY,CAAC,IAAI,CAACtD,gBAAgB,CAACvV,MAAM,CAAC,CAAC;IACtD,OAAO,IAAI,CAACuV,gBAAgB,CAACvV,MAAM,CAAC;EACtC,CAAC;EAEDqV,WAAW,CAACplB,SAAS,CAAC4N,IAAI,GAAG,UAAUrF,MAAM,EAAEjF,KAAK,EAAEmK,iBAAiB,EAAE;IACvE,IAAIvH,OAAO,GAAG5C,KAAK,CAAC4C,OAAO;MACvBC,MAAM,GAAG7C,KAAK,CAAC6C,MAAM;IACzB,IAAIwjB,YAAY,GAAG,IAAApc,0BAAiB,EAAChF,MAAM,CAACzF,IAAI,EAAE2K,iBAAiB,CAAC,IAAIlF,MAAM,CAACqF,IAAI;IACnF,IAAIA,IAAI,GAAG,IAAAvH,iBAAU,EAACsjB,YAAY,CAAC,GAAGA,YAAY,GAAGA,YAAY,GAAGA,YAAY,CAAC/b,IAAI,GAAGrF,MAAM,CAACqF,IAAI;IAEnG,IAAIA,IAAI,EAAE;MACR,IAAI;QACF,OAAOA,IAAI,CAAC1H,OAAO,EAAEC,MAAM,CAACG,IAAI,EAAE;UAChCiC,MAAM,EAAEA,MAAM;UACdjF,KAAK,EAAE,IAAI,CAACA,KAAK;UACjB6C,MAAM,EAAEA;QACV,CAAC,CAAC;MACJ,CAAC,CAAC,OAAO+V,GAAG,EAAE;QACZ,IAAI,IAAI,CAACtK,MAAM,EAAE;UACf,IAAI,CAACA,MAAM,CAACjG,IAAI,CAAC;YACf7I,IAAI,EAAE,cAAc;YACpBwD,IAAI,EAAE4V;UACR,CAAC,CAAC;QACJ;QAEA,MAAMA,GAAG;MACX;IACF;IAEA,QAAQ3T,MAAM,CAACzF,IAAI;MACjB,KAAK6I,iBAAI;QACP,IAAImT,UAAU,GAAGvW,MAAM;QAEvB,IAAI,OAAOuW,UAAU,CAACnQ,KAAK,KAAK,QAAQ,EAAE;UACxC,IAAI,CAAC8a,KAAK,CAAC3K,UAAU,CAAC;UACtB;QACF,CAAC,MAAM;UACL,IAAIA,UAAU,CAACzQ,EAAE,EAAE;YACjB,IAAI,CAACiY,MAAM,CAACxH,UAAU,CAAC3Y,MAAM,EAAE2Y,UAAU,CAACzQ,EAAE,CAAC;UAC/C,CAAC,MAAM;YACL,IAAI,CAAC1C,IAAI,CAACmT,UAAU,CAAC3Y,MAAM,CAAC;UAC9B;QACF;QAEA;MAEF,KAAK0F,mBAAM;QACT,IAAI,CAACA,MAAM,CAACtD,MAAM,CAACwH,MAAM,CAAC;QAC1B;MAEF,KAAK1E,kBAAK;QACR;UACE,IAAI4E,QAAQ,GAAG1H,MAAM,CAAC0H,QAAQ,CAAC,CAAC;UAChC;UACA;;UAEA,IAAI,CAAC,IAAI,CAAC3M,KAAK,CAACoR,UAAU,CAACzE,QAAQ,CAACnN,IAAI,CAAC,EAAE;YACzC;UACF,CAAC,CAAC;;UAGF,IAAImN,QAAQ,CAACnN,IAAI,KAAKoI,kBAAW,CAACyB,MAAM,EAAE;YACxC,IAAIid,cAAc,GAAG,IAAI,CAAC/R,OAAO,CAACpJ,OAAO,CAACgI,QAAQ,GAAG,IAAI,CAACoB,OAAO,CAACpJ,OAAO,CAACgI,QAAQ,CAACxG,QAAQ,CAAC0I,GAAG,CAAC,GAAG5S,SAAS;YAC5G,IAAI0E,EAAE,GAAGwF,QAAQ,CAACxF,EAAE;cAChBnE,IAAI,GAAG2J,QAAQ,CAAC3J,IAAI;YAExB,IAAI,CAAC1E,0BAAa,EAAE;cAClB,IAAAmG,WAAI,EAAC,EAAE,SAAS,IAAIkI,QAAQ,CAAC;cAAE;cAC/B,4DAA4D,GAAGA,QAAQ,CAAC0I,GAAG,GAAG,mBAAmB,GAAG,IAAI,CAACd,OAAO,CAACpN,EAAE,GAAG,MAAM,GAAG,mCAAmC,CAAC;YACrK;YAEA,IAAIqa,WAAW,GAAG,aAAa,IAAI7U,QAAQ,GAAGA,QAAQ,CAAC6U,WAAW,GAAG,CAAC,CAAC7U,QAAQ,CAACmW,OAAO;YAEvF,IAAI,CAACwD,cAAc,EAAE;cACnB;cACA,IAAI,CAAChoB,0BAAa,EAAE;gBAClB,IAAAmG,WAAI,EAAC,KAAK,EAAE,mCAAmC,GAAGkI,QAAQ,CAAC0I,GAAG,GAAG,gBAAgB,GAAG,IAAI,CAACd,OAAO,CAACpN,EAAE,GAAG,IAAI,CAAC;cAC7G;cAEA;YACF;YAEA,IAAI6Q,MAAM,GAAG,IAAAjV,iBAAU,EAACujB,cAAc,CAAC,GAAGA,cAAc,CAAC1jB,OAAO,EAAEC,MAAM,CAACG,IAAI,CAAC,GAAGsjB,cAAc;YAE/F,IAAI,IAAAhjB,oBAAa,EAAC0U,MAAM,CAAC,EAAE;cACzB,IAAI,CAAChY,KAAK,CAAC4R,QAAQ,CAACzK,EAAE,CAAC,GAAG,IAAI,CAACof,YAAY,CAAChjB,OAAO,CAAC4T,OAAO,CAACa,MAAM,CAAC,EAAE7Q,EAAE,CAAC;YAC1E,CAAC,MAAM,IAAI,IAAApE,iBAAU,EAACiV,MAAM,CAAC,EAAE;cAC7B,IAAI,CAAChY,KAAK,CAAC4R,QAAQ,CAACzK,EAAE,CAAC,GAAG,IAAI,CAACqf,aAAa,CAACxO,MAAM,EAAE7Q,EAAE,CAAC;YAC1D,CAAC,MAAM,IAAI,IAAAtB,mBAAY,EAACmS,MAAM,CAAC,EAAE;cAC/B,IAAI,CAAChY,KAAK,CAAC4R,QAAQ,CAACzK,EAAE,CAAC,GAAG,IAAI,CAACsf,eAAe,CAACzO,MAAM,EAAE7Q,EAAE,CAAC;YAC5D,CAAC,MAAM,IAAI,IAAAlB,gBAAS,EAAC+R,MAAM,CAAC,EAAE;cAC5B;cACA,IAAI,CAAChY,KAAK,CAAC4R,QAAQ,CAACzK,EAAE,CAAC,GAAG,IAAI,CAACuf,YAAY,CAAC1jB,IAAI,GAAGgV,MAAM,CAACvC,WAAW,CAAC,IAAA/S,iBAAU,EAACM,IAAI,EAAEJ,OAAO,EAAEC,MAAM,CAAC,CAAC,GAAGmV,MAAM,EAAE;gBACjH7Q,EAAE,EAAEA,EAAE;gBACNqa,WAAW,EAAEA;cACf,CAAC,CAAC;YACJ;UACF,CAAC,MAAM;YACL,IAAI,CAACmF,aAAa,CAACha,QAAQ,CAAC;UAC9B;UAEA;QACF;MAEF,KAAK1E,iBAAI;QACP;UACE,IAAI,CAAC2e,SAAS,CAAC3hB,MAAM,CAAC0H,QAAQ,CAACxF,EAAE,CAAC;UAClC;QACF;MAEF,KAAK6B,gBAAG;QACN,IAAIsD,KAAK,GAAGrH,MAAM,CAACqH,KAAK;UACpB7O,KAAK,GAAGwH,MAAM,CAACxH,KAAK;QAExB,IAAI6O,KAAK,EAAE;UACT,IAAI,CAAC+W,MAAM,CAAC/W,KAAK,EAAE7O,KAAK,CAAC;QAC3B,CAAC,MAAM;UACL,IAAI,CAAC4lB,MAAM,CAAC5lB,KAAK,CAAC;QACpB;QAEA;MAEF;QACE,IAAI,CAACa,0BAAa,EAAE;UAClB,IAAAmG,WAAI,EAAC,KAAK,EAAE,2CAA2C,GAAGQ,MAAM,CAACzF,IAAI,GAAG,GAAG,CAAC;QAC9E;QAEA;IACJ;IAEA,OAAOiD,SAAS;EAClB,CAAC;EAEDqf,WAAW,CAACplB,SAAS,CAACkqB,SAAS,GAAG,UAAUC,OAAO,EAAE;IACnD,IAAI3X,KAAK,GAAG,IAAI,CAAC0C,QAAQ,CAAChD,GAAG,CAACiY,OAAO,CAAC;IAEtC,IAAI,CAAC3X,KAAK,EAAE;MACV;IACF;IAEA,IAAI,CAAC0C,QAAQ,CAAC+O,MAAM,CAACkG,OAAO,CAAC;IAC7B,IAAI,CAAC3Z,SAAS,CAACyT,MAAM,CAACkG,OAAO,CAAC;IAC9B,OAAO,IAAI,CAAC7mB,KAAK,CAAC4R,QAAQ,CAACiV,OAAO,CAAC;IAEnC,IAAI,IAAA9jB,iBAAU,EAACmM,KAAK,CAACjH,IAAI,CAAC,EAAE;MAC1BiH,KAAK,CAACjH,IAAI,CAAC,CAAC;IACd;EACF,CAAC;EAED6Z,WAAW,CAACplB,SAAS,CAACoqB,KAAK,GAAG,UAAUC,MAAM,EAAEnhB,IAAI,EAAEuF,OAAO,EAAE;IAC7D,IAAI,IAAA7H,oBAAa,EAACyjB,MAAM,CAAC,EAAE;MACzB,OAAO,IAAI,CAACR,YAAY,CAAChjB,OAAO,CAAC4T,OAAO,CAAC4P,MAAM,CAAC,EAAEnhB,IAAI,CAAC;IACzD,CAAC,MAAM,IAAI,IAAA7C,iBAAU,EAACgkB,MAAM,CAAC,EAAE;MAC7B,OAAO,IAAI,CAACP,aAAa,CAACO,MAAM,EAAEnhB,IAAI,CAAC;IACzC,CAAC,MAAM,IAAI,IAAA4M,cAAO,EAACuU,MAAM,CAAC,EAAE;MAC1B,OAAO,IAAI,CAACC,UAAU,CAACD,MAAM,CAAC;IAChC,CAAC,MAAM,IAAI,IAAAlhB,mBAAY,EAACkhB,MAAM,CAAC,EAAE;MAC/B,OAAO,IAAI,CAACN,eAAe,CAACM,MAAM,EAAEnhB,IAAI,CAAC;IAC3C,CAAC,MAAM,IAAI,IAAAK,gBAAS,EAAC8gB,MAAM,CAAC,EAAE;MAC5B,OAAO,IAAI,CAACL,YAAY,CAACK,MAAM,EAAE,IAAAhrB,eAAQ,EAAC,IAAAA,eAAQ,EAAC,CAAC,CAAC,EAAEoP,OAAO,CAAC,EAAE;QAC/DhE,EAAE,EAAEvB;MACN,CAAC,CAAC,CAAC;IACL,CAAC,MAAM;MACL,MAAM,IAAInG,KAAK,CAAC,2BAA2B,GAAGmG,IAAI,GAAG,eAAe,GAAG,OAAOmhB,MAAM,GAAG,KAAK,CAAC;IAC/F;EACF,CAAC;EAEDjF,WAAW,CAACplB,SAAS,CAACgqB,YAAY,GAAG,UAAUnS,OAAO,EAAEpJ,OAAO,EAAE;IAC/D,IAAIgG,KAAK,GAAG,IAAI;IAEhB,IAAIhG,OAAO,KAAK,KAAK,CAAC,EAAE;MACtBA,OAAO,GAAG,CAAC,CAAC;IACd;IAEA,IAAI8b,YAAY,GAAG,IAAInF,WAAW,CAACvN,OAAO,EAAE,IAAAxY,eAAQ,EAAC,IAAAA,eAAQ,EAAC,CAAC,CAAC,EAAE,IAAI,CAACoP,OAAO,CAAC,EAAE;MAC/EmD,MAAM,EAAE,IAAI;MACZnH,EAAE,EAAEgE,OAAO,CAAChE,EAAE,IAAIoN,OAAO,CAACpN;IAC5B,CAAC,CAAC,CAAC;IAEH,IAAIgc,eAAe,GAAG,IAAApnB,eAAQ,EAAC,IAAAA,eAAQ,EAAC,CAAC,CAAC,EAAEulB,qBAAqB,CAAC,EAAEnW,OAAO,CAAC;IAE5E,IAAIgY,eAAe,CAAC5B,IAAI,EAAE;MACxB0F,YAAY,CAAC5C,YAAY,CAAC,UAAUrkB,KAAK,EAAE;QACzCmR,KAAK,CAAC9I,IAAI,CAACsB,mBAAM,EAAE;UACjB3J,KAAK,EAAEA,KAAK;UACZmH,EAAE,EAAE8f,YAAY,CAAC9f;QACnB,CAAC,CAAC;MACJ,CAAC,CAAC;IACJ;IAEA8f,YAAY,CAACxI,MAAM,CAAC,UAAUyI,SAAS,EAAE;MACvC/V,KAAK,CAAC9I,IAAI,CAAC,IAAA/B,mBAAY,EAAC4gB,SAAS,EAAE;QACjC/a,MAAM,EAAE8a,YAAY,CAAC9f;MACvB,CAAC,CAAC,CAAC;IACL,CAAC,CAAC,CAACY,KAAK,CAAC,CAAC;IACV,IAAI0Y,KAAK,GAAGwG,YAAY;IACxB,IAAI,CAACrV,QAAQ,CAAC9B,GAAG,CAACmX,YAAY,CAAC9f,EAAE,EAAEsZ,KAAK,CAAC;IAEzC,IAAI0C,eAAe,CAAC3B,WAAW,EAAE;MAC/B,IAAI,CAACtU,SAAS,CAACsB,GAAG,CAACyY,YAAY,CAAC9f,EAAE,CAAC;IACrC;IAEA,OAAOsZ,KAAK;EACd,CAAC;EAEDqB,WAAW,CAACplB,SAAS,CAAC6pB,YAAY,GAAG,UAAUY,OAAO,EAAEhgB,EAAE,EAAE;IAC1D,IAAIgK,KAAK,GAAG,IAAI;IAEhB,IAAIiW,QAAQ,GAAG,KAAK;IACpBD,OAAO,CAAC3jB,IAAI,CAAC,UAAU6jB,QAAQ,EAAE;MAC/B,IAAI,CAACD,QAAQ,EAAE;QACbjW,KAAK,CAAC9I,IAAI,CAAC,IAAA/B,mBAAY,EAAC,IAAA0G,mBAAU,EAAC7F,EAAE,EAAEkgB,QAAQ,CAAC,EAAE;UAChDlb,MAAM,EAAEhF;QACV,CAAC,CAAC,CAAC;MACL;IACF,CAAC,EAAE,UAAUiG,SAAS,EAAE;MACtB,IAAI,CAACga,QAAQ,EAAE;QACb,IAAIE,UAAU,GAAG,IAAAvpB,cAAK,EAACoJ,EAAE,EAAEiG,SAAS,CAAC;QAErC,IAAI;UACF;UACA+D,KAAK,CAAC9I,IAAI,CAAC,IAAA/B,mBAAY,EAACghB,UAAU,EAAE;YAClCnb,MAAM,EAAEhF;UACV,CAAC,CAAC,CAAC;QACL,CAAC,CAAC,OAAOpJ,KAAK,EAAE;UACd,IAAAiJ,2CAAoC,EAACoG,SAAS,EAAErP,KAAK,EAAEoJ,EAAE,CAAC;UAE1D,IAAIgK,KAAK,CAAC+P,QAAQ,EAAE;YAClB/P,KAAK,CAAC+P,QAAQ,CAAC7Y,IAAI,CAACif,UAAU,EAAEnW,KAAK,CAACnR,KAAK,CAAC;UAC9C;UAEA,IAAImR,KAAK,CAACoD,OAAO,CAACQ,MAAM,EAAE;YACxB;YACA;YACA;YACA;YACA5D,KAAK,CAAClJ,IAAI,CAAC,CAAC;UACd;QACF;MACF;IACF,CAAC,CAAC;IACF,IAAIwY,KAAK,GAAG;MACVtZ,EAAE,EAAEA,EAAE;MACNkB,IAAI,EAAE,SAAAA,CAAA,EAAY;QAChB,OAAO,KAAK,CAAC;MACf,CAAC;MACDvC,SAAS,EAAE,SAAAA,CAAUtI,IAAI,EAAE+pB,WAAW,EAAE7C,QAAQ,EAAE;QAChD,IAAI8C,YAAY,GAAG,KAAK;QACxBL,OAAO,CAAC3jB,IAAI,CAAC,UAAU6jB,QAAQ,EAAE;UAC/B,IAAIG,YAAY,EAAE;YAChB;UACF;UAEAhqB,IAAI,IAAIA,IAAI,CAAC6pB,QAAQ,CAAC;UAEtB,IAAIG,YAAY,EAAE;YAChB;UACF;UAEA9C,QAAQ,IAAIA,QAAQ,CAAC,CAAC;QACxB,CAAC,EAAE,UAAU9L,GAAG,EAAE;UAChB,IAAI4O,YAAY,EAAE;YAChB;UACF;UAEAD,WAAW,CAAC3O,GAAG,CAAC;QAClB,CAAC,CAAC;QACF,OAAO;UACLxG,WAAW,EAAE,SAAAA,CAAA,EAAY;YACvB,OAAOoV,YAAY,GAAG,IAAI;UAC5B;QACF,CAAC;MACH,CAAC;MACDvf,IAAI,EAAE,SAAAA,CAAA,EAAY;QAChBmf,QAAQ,GAAG,IAAI;MACjB,CAAC;MACDnV,MAAM,EAAE,SAAAA,CAAA,EAAY;QAClB,OAAO;UACL9K,EAAE,EAAEA;QACN,CAAC;MACH;IACF,CAAC;IACD,IAAI,CAACyK,QAAQ,CAAC9B,GAAG,CAAC3I,EAAE,EAAEsZ,KAAK,CAAC;IAC5B,OAAOA,KAAK;EACd,CAAC;EAEDqB,WAAW,CAACplB,SAAS,CAAC8pB,aAAa,GAAG,UAAU1G,QAAQ,EAAE3Y,EAAE,EAAE;IAC5D,IAAIgK,KAAK,GAAG,IAAI;IAEhB,IAAIiW,QAAQ,GAAG,KAAK;IACpB,IAAIK,SAAS,GAAG,IAAIzZ,GAAG,CAAC,CAAC;IACzB,IAAIiU,SAAS,GAAG,IAAIjU,GAAG,CAAC,CAAC;IAEzB,IAAI0Z,OAAO,GAAG,SAAAA,CAAU3qB,CAAC,EAAE;MACzBklB,SAAS,CAACpT,OAAO,CAAC,UAAU6U,QAAQ,EAAE;QACpC,OAAOA,QAAQ,CAAC3mB,CAAC,CAAC;MACpB,CAAC,CAAC;MAEF,IAAIqqB,QAAQ,EAAE;QACZ;MACF;MAEAjW,KAAK,CAAC9I,IAAI,CAACtL,CAAC,CAAC;IACf,CAAC;IAED,IAAI4qB,YAAY;IAEhB,IAAI;MACFA,YAAY,GAAG7H,QAAQ,CAAC4H,OAAO,EAAE,UAAUE,WAAW,EAAE;QACtDH,SAAS,CAACjZ,GAAG,CAACoZ,WAAW,CAAC;MAC5B,CAAC,CAAC;IACJ,CAAC,CAAC,OAAOhP,GAAG,EAAE;MACZ,IAAI,CAACvQ,IAAI,CAAC,IAAAtK,cAAK,EAACoJ,EAAE,EAAEyR,GAAG,CAAC,CAAC;IAC3B;IAEA,IAAI,IAAAtV,oBAAa,EAACqkB,YAAY,CAAC,EAAE;MAC/B;MACA;MACA,OAAO,IAAI,CAACpB,YAAY,CAACoB,YAAY,EAAExgB,EAAE,CAAC;IAC5C;IAEA,IAAIsZ,KAAK,GAAG;MACVtZ,EAAE,EAAEA,EAAE;MACNkB,IAAI,EAAE,SAAAA,CAAU9I,KAAK,EAAE;QACrB,OAAOkoB,SAAS,CAAC5Y,OAAO,CAAC,UAAUgZ,QAAQ,EAAE;UAC3C,OAAOA,QAAQ,CAACtoB,KAAK,CAAC;QACxB,CAAC,CAAC;MACJ,CAAC;MACDuG,SAAS,EAAE,SAAAA,CAAUtI,IAAI,EAAE;QACzBykB,SAAS,CAACzT,GAAG,CAAChR,IAAI,CAAC;QACnB,OAAO;UACL4U,WAAW,EAAE,SAAAA,CAAA,EAAY;YACvB6P,SAAS,CAACtB,MAAM,CAACnjB,IAAI,CAAC;UACxB;QACF,CAAC;MACH,CAAC;MACDyK,IAAI,EAAE,SAAAA,CAAA,EAAY;QAChBmf,QAAQ,GAAG,IAAI;QAEf,IAAI,IAAArkB,iBAAU,EAAC4kB,YAAY,CAAC,EAAE;UAC5BA,YAAY,CAAC,CAAC;QAChB;MACF,CAAC;MACD1V,MAAM,EAAE,SAAAA,CAAA,EAAY;QAClB,OAAO;UACL9K,EAAE,EAAEA;QACN,CAAC;MACH;IACF,CAAC;IACD,IAAI,CAACyK,QAAQ,CAAC9B,GAAG,CAAC3I,EAAE,EAAEsZ,KAAK,CAAC;IAC5B,OAAOA,KAAK;EACd,CAAC;EAEDqB,WAAW,CAACplB,SAAS,CAAC+pB,eAAe,GAAG,UAAUzO,MAAM,EAAE7Q,EAAE,EAAE;IAC5D,IAAIgK,KAAK,GAAG,IAAI;IAEhB,IAAI2W,YAAY,GAAG9P,MAAM,CAAClS,SAAS,CAAC,UAAUrI,KAAK,EAAE;MACnD0T,KAAK,CAAC9I,IAAI,CAAC,IAAA/B,mBAAY,EAAC7I,KAAK,EAAE;QAC7B0O,MAAM,EAAEhF;MACV,CAAC,CAAC,CAAC;IACL,CAAC,EAAE,UAAUyR,GAAG,EAAE;MAChBzH,KAAK,CAAC9I,IAAI,CAAC,IAAA/B,mBAAY,EAAC,IAAAvI,cAAK,EAACoJ,EAAE,EAAEyR,GAAG,CAAC,EAAE;QACtCzM,MAAM,EAAEhF;MACV,CAAC,CAAC,CAAC;IACL,CAAC,EAAE,YAAY;MACbgK,KAAK,CAAC9I,IAAI,CAAC,IAAA/B,mBAAY,EAAC,IAAA0G,mBAAU,EAAC7F,EAAE,CAAC,EAAE;QACtCgF,MAAM,EAAEhF;MACV,CAAC,CAAC,CAAC;IACL,CAAC,CAAC;IACF,IAAIsZ,KAAK,GAAG;MACVtZ,EAAE,EAAEA,EAAE;MACNkB,IAAI,EAAE,SAAAA,CAAA,EAAY;QAChB,OAAO,KAAK,CAAC;MACf,CAAC;MACDvC,SAAS,EAAE,SAAAA,CAAUtI,IAAI,EAAE+pB,WAAW,EAAE7C,QAAQ,EAAE;QAChD,OAAO1M,MAAM,CAAClS,SAAS,CAACtI,IAAI,EAAE+pB,WAAW,EAAE7C,QAAQ,CAAC;MACtD,CAAC;MACDzc,IAAI,EAAE,SAAAA,CAAA,EAAY;QAChB,OAAO6f,YAAY,CAAC1V,WAAW,CAAC,CAAC;MACnC,CAAC;MACDH,MAAM,EAAE,SAAAA,CAAA,EAAY;QAClB,OAAO;UACL9K,EAAE,EAAEA;QACN,CAAC;MACH;IACF,CAAC;IACD,IAAI,CAACyK,QAAQ,CAAC9B,GAAG,CAAC3I,EAAE,EAAEsZ,KAAK,CAAC;IAC5B,OAAOA,KAAK;EACd,CAAC;EAEDqB,WAAW,CAACplB,SAAS,CAACsqB,UAAU,GAAG,UAAUvG,KAAK,EAAE;IAClD,IAAI,CAAC7O,QAAQ,CAAC9B,GAAG,CAAC2Q,KAAK,CAACtZ,EAAE,EAAEsZ,KAAK,CAAC;IAClC,OAAOA,KAAK;EACd,CAAC;EAEDqB,WAAW,CAACplB,SAAS,CAACiqB,aAAa,GAAG,UAAUha,QAAQ,EAAE;IACxD,IAAIob,cAAc,GAAG,IAAI,CAACxT,OAAO,CAACpJ,OAAO,IAAI,IAAI,CAACoJ,OAAO,CAACpJ,OAAO,CAACiG,UAAU,GAAG,IAAI,CAACmD,OAAO,CAACpJ,OAAO,CAACiG,UAAU,CAACzE,QAAQ,CAACnN,IAAI,CAAC,GAAGiD,SAAS;IAEzI,IAAI,CAACslB,cAAc,EAAE;MACnB,IAAI,CAACzpB,0BAAa,EAAE;QAClB,IAAAmG,WAAI,EAAC,KAAK,EAAE,wCAAwC,GAAGkI,QAAQ,CAACnN,IAAI,GAAG,GAAG,CAAC;MAC7E,CAAC,CAAC;;MAGF;IACF,CAAC,CAAC;;IAGF,IAAIwoB,OAAO,GAAGD,cAAc,CAAC,IAAI,CAAC/nB,KAAK,CAAC4C,OAAO,EAAE+J,QAAQ,CAAC;IAC1D,IAAI,CAACsb,WAAW,CAACtb,QAAQ,CAACxF,EAAE,EAAE6gB,OAAO,CAAC;EACxC,CAAC;EAEDlG,WAAW,CAACplB,SAAS,CAACurB,WAAW,GAAG,UAAU9gB,EAAE,EAAE6gB,OAAO,EAAE;IACzD,IAAI,CAACpW,QAAQ,CAAC9B,GAAG,CAAC3I,EAAE,EAAE;MACpBA,EAAE,EAAEA,EAAE;MACNkB,IAAI,EAAE,SAAAA,CAAA,EAAY;QAChB,OAAO,KAAK,CAAC;MACf,CAAC;MACDvC,SAAS,EAAE,SAAAA,CAAA,EAAY;QACrB,OAAO;UACLsM,WAAW,EAAE,SAAAA,CAAA,EAAY;YACvB,OAAO,KAAK,CAAC;UACf;QACF,CAAC;MACH,CAAC;MACDnK,IAAI,EAAE+f,OAAO,IAAIvlB,SAAS;MAC1BwP,MAAM,EAAE,SAAAA,CAAA,EAAY;QAClB,OAAO;UACL9K,EAAE,EAAEA;QACN,CAAC;MACH;IACF,CAAC,CAAC;EACJ,CAAC;EAED2a,WAAW,CAACplB,SAAS,CAACuoB,SAAS,GAAG,YAAY;IAC5C,IAAI,IAAI,CAAC9Z,OAAO,CAAC+V,QAAQ,IAAI,OAAOJ,MAAM,KAAK,WAAW,EAAE;MAC1D,IAAIA,MAAM,CAACoH,4BAA4B,EAAE;QACvC,IAAIC,eAAe,GAAG,OAAO,IAAI,CAAChd,OAAO,CAAC+V,QAAQ,KAAK,QAAQ,GAAG,IAAI,CAAC/V,OAAO,CAAC+V,QAAQ,GAAGze,SAAS;QACnG,IAAI,CAACye,QAAQ,GAAGJ,MAAM,CAACoH,4BAA4B,CAACE,OAAO,CAAC,IAAArsB,eAAQ,EAAC,IAAAA,eAAQ,EAAC;UAC5E6J,IAAI,EAAE,IAAI,CAACuB,EAAE;UACbkhB,SAAS,EAAE,IAAI;UACfC,cAAc,EAAE,SAAAA,CAAUtoB,KAAK,EAAE;YAC/B,OAAO;cACLvC,KAAK,EAAEuC,KAAK,CAACvC,KAAK;cAClBmF,OAAO,EAAE5C,KAAK,CAAC4C,OAAO;cACtBgI,OAAO,EAAE5K,KAAK,CAAC4K;YACjB,CAAC;UACH;QACF,CAAC,EAAEud,eAAe,CAAC,EAAE;UACnBI,QAAQ,EAAE,IAAAxsB,eAAQ,EAAC;YACjBysB,IAAI,EAAE,KAAK;YACXC,IAAI,EAAE;UACR,CAAC,EAAEN,eAAe,GAAGA,eAAe,CAACI,QAAQ,GAAG9lB,SAAS;QAC3D,CAAC,CAAC,EAAE,IAAI,CAAC8R,OAAO,CAAC;QACjB,IAAI,CAAC2M,QAAQ,CAAChY,IAAI,CAAC,IAAI,CAAClJ,KAAK,CAAC;MAChC,CAAC,CAAC;;MAGF,IAAAghB,yBAAe,EAAC,IAAI,CAAC;IACvB;EACF,CAAC;EAEDc,WAAW,CAACplB,SAAS,CAACuV,MAAM,GAAG,YAAY;IACzC,OAAO;MACL9K,EAAE,EAAE,IAAI,CAACA;IACX,CAAC;EACH,CAAC;EAED2a,WAAW,CAACplB,SAAS,CAACqJ,uBAAgB,CAAC,GAAG,YAAY;IACpD,OAAO,IAAI;EACb,CAAC;EACD;AACF;AACA;AACA;AACA;AACA;;EAGE+b,WAAW,CAACvC,cAAc,GAC1B;EACA,UAAUmJ,MAAM,EAAE;IAChB,OAAO;MACLlF,OAAO,EAAE,IAAI;MACbhE,WAAW,EAAE,IAAI;MACjB4D,KAAK,EAAE;QACLgD,UAAU,EAAE,SAAAA,CAAUzE,EAAE,EAAEgH,EAAE,EAAE;UAC5B,OAAOD,MAAM,CAACtC,UAAU,CAACxpB,IAAI,CAAC,IAAI,EAAE+kB,EAAE,EAAEgH,EAAE,CAAC;QAC7C,CAAC;QACDrD,YAAY,EAAE,SAAAA,CAAUne,EAAE,EAAE;UAC1B,OAAOuhB,MAAM,CAACpD,YAAY,CAAC1oB,IAAI,CAAC,IAAI,EAAEuK,EAAE,CAAC;QAC3C;MACF,CAAC;MACDkc,MAAM,EAAEqF,MAAM,CAACnjB,OAAO,CAACyD,GAAG,CAAC0I,IAAI,CAACnM,OAAO,CAAC;MACxC2b,QAAQ,EAAE;IACZ,CAAC;EACH,CAAC,CAAC,OAAOJ,MAAM,KAAK,WAAW,GAAG4H,MAAM,GAAG5H,MAAM,CAAC;EAElDgB,WAAW,CAAC8G,SAAS,GAAGA,SAAS;EACjC,OAAO9G,WAAW;AACpB,CAAC,CAAC,CAAC;AAEH,IAAI3P,eAAe,GAAG,SAAAA,CAAUvM,IAAI,EAAE;EACpC,IAAIA,IAAI,KAAK,KAAK,CAAC,EAAE;IACnBA,IAAI,GAAG,MAAM;EACf;EAEA,OAAO;IACLuB,EAAE,EAAEvB,IAAI;IACRyC,IAAI,EAAE,SAAAA,CAAA,EAAY;MAChB,OAAO,KAAK,CAAC;IACf,CAAC;IACDvC,SAAS,EAAE,SAAAA,CAAA,EAAY;MACrB;MACA,OAAO;QACLsM,WAAW,EAAE,SAAAA,CAAA,EAAY,CAAC;MAC5B,CAAC;IACH,CAAC;IACDH,MAAM,EAAE,SAAAA,CAAA,EAAY;MAClB,OAAO;QACL9K,EAAE,EAAEvB;MACN,CAAC;IACH;EACF,CAAC;AACH,CAAC;AAED,IAAIijB,mBAAmB,GAAG,SAAAA,CAAUC,aAAa,EAAE;EACjD,IAAI,IAAA3pB,eAAQ,EAAC2pB,aAAa,CAAC,EAAE;IAC3B,OAAO,IAAA/sB,eAAQ,EAAC,IAAAA,eAAQ,EAAC,CAAC,CAAC,EAAEulB,qBAAqB,CAAC,EAAE;MACnD1b,IAAI,EAAEkjB;IACR,CAAC,CAAC;EACJ;EAEA,OAAO,IAAA/sB,eAAQ,EAAC,IAAAA,eAAQ,EAAC,IAAAA,eAAQ,EAAC,CAAC,CAAC,EAAEulB,qBAAqB,CAAC,EAAE;IAC5D1b,IAAI,EAAE,IAAAM,eAAQ,EAAC;EACjB,CAAC,CAAC,EAAE4iB,aAAa,CAAC;AACpB,CAAC;AAED,SAAShC,KAAKA,CAACC,MAAM,EAAE+B,aAAa,EAAE;EACpC,IAAI3F,eAAe,GAAG0F,mBAAmB,CAACC,aAAa,CAAC;EACxD,OAAOrH,gBAAgB,CAAChf,SAAS,EAAE,UAAUwe,OAAO,EAAE;IACpD,IAAI,CAAC3iB,0BAAa,EAAE;MAClB,IAAAmG,WAAI,EAAC,CAAC,CAACwc,OAAO,EAAE,qCAAqC,IAAI,IAAAhb,gBAAS,EAAC8gB,MAAM,CAAC,GAAGA,MAAM,CAAC5f,EAAE,GAAG,WAAW,CAAC,GAAG,qDAAqD,CAAC;IAChK;IAEA,IAAI8Z,OAAO,EAAE;MACX,OAAOA,OAAO,CAAC6F,KAAK,CAACC,MAAM,EAAE5D,eAAe,CAACvd,IAAI,EAAEud,eAAe,CAAC;IACrE,CAAC,MAAM;MACL,OAAOhR,eAAe,CAACgR,eAAe,CAACvd,IAAI,CAAC;IAC9C;EACF,CAAC,CAAC;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;;AAGA,SAASgjB,SAASA,CAACrU,OAAO,EAAEpJ,OAAO,EAAE;EACnC,IAAI4d,WAAW,GAAG,IAAIjH,WAAW,CAACvN,OAAO,EAAEpJ,OAAO,CAAC;EACnD,OAAO4d,WAAW;AACpB;;;;;;;;AClxCA,IAAAxqB,MAAA,GAAAC,OAAA;AACA,IAAAiU,MAAA,GAAAjU,OAAA;AAEA,SAASwqB,UAAUA,CAAChpB,KAAK,EAAEipB,QAAQ,EAAEC,YAAY,EAAE;EACjD,IAAItoB,GAAG,EAAEC,EAAE;EAEX,IAAImkB,aAAa,GAAG9T,YAAK,CAACW,IAAI,CAAC7R,KAAK,EAAEA,KAAK,YAAYkR,YAAK,GAAGlR,KAAK,CAAC4C,OAAO,GAAGH,SAAS,CAAC;EAEzF,IAAI;IACF,KAAK,IAAI0mB,UAAU,GAAG,IAAAhsB,eAAQ,EAAC8rB,QAAQ,CAAC,EAAEG,YAAY,GAAGD,UAAU,CAAC3rB,IAAI,CAAC,CAAC,EAAE,CAAC4rB,YAAY,CAAC1rB,IAAI,EAAE0rB,YAAY,GAAGD,UAAU,CAAC3rB,IAAI,CAAC,CAAC,EAAE;MAChI,IAAIsD,EAAE,GAAG,IAAAnD,aAAM,EAACyrB,YAAY,CAAC3rB,KAAK,EAAE,CAAC,CAAC;QAClCwC,UAAU,GAAGa,EAAE,CAAC,CAAC,CAAC;QAClBiP,QAAQ,GAAGjP,EAAE,CAAC,CAAC,CAAC;MAEpB,IAAIkkB,aAAa,CAACvT,OAAO,CAACxR,UAAU,CAAC,EAAE;QACrC,OAAO8P,QAAQ,CAACiV,aAAa,CAAC;MAChC;IACF;EACF,CAAC,CAAC,OAAO/jB,KAAK,EAAE;IACdL,GAAG,GAAG;MACJ7C,KAAK,EAAEkD;IACT,CAAC;EACH,CAAC,SAAS;IACR,IAAI;MACF,IAAImoB,YAAY,IAAI,CAACA,YAAY,CAAC1rB,IAAI,KAAKmD,EAAE,GAAGsoB,UAAU,CAACjoB,MAAM,CAAC,EAAEL,EAAE,CAACjE,IAAI,CAACusB,UAAU,CAAC;IACzF,CAAC,SAAS;MACR,IAAIvoB,GAAG,EAAE,MAAMA,GAAG,CAAC7C,KAAK;IAC1B;EACF;EAEA,OAAOmrB,YAAY,CAAClE,aAAa,CAAC;AACpC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC/BA,IAAAzd,MAAA,GAAA/I,OAAA;AACA,IAAA6qB,SAAA,GAAA7qB,OAAA;AACA,IAAAsJ,MAAA,GAAAtJ,OAAA;AACA,IAAAiS,QAAA,GAAAjS,OAAA;AAEA,IAAAiU,MAAA,GAAAjU,OAAA;AACA,IAAA0gB,UAAA,GAAA1gB,OAAA;AACA,IAAA8qB,QAAA,GAAA9qB,OAAA;AACA,IAAA+qB,YAAA,GAAA/qB,OAAA;AACA,IAAAgrB,MAAA,GAAAhrB,OAAA;AACA,IAAIoM,OAAO,GAAA5O,OAAA,CAAA4O,OAAA,GAAG;EACZzC,KAAK,EAAEA,cAAK;EACZE,IAAI,EAAEA,aAAI;EACVwD,UAAU,EAAEA,mBAAU;EACtBE,UAAU,EAAEA,mBAAU;EACtB/C,GAAG,EAAEA,YAAG;EACRT,MAAM,EAAEA,eAAM;EACdR,KAAK,EAAEA,cAAK;EACZE,IAAI,EAAEA,aAAI;EACV/L,MAAM,EAAEA,eAAM;EACd0M,KAAK,EAAEA,cAAK;EACZlL,IAAI,EAAEA,aAAI;EACVsO,OAAO,EAAEA,gBAAO;EAChBkB,SAAS,EAAEA,kBAAS;EACpBC,QAAQ,EAAEA;AACZ,CAAC;;ACzBD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA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","file":"drag-machine.e31bb0bc.js","sourceRoot":"..","sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\nvar __assign = function () {\n  __assign = Object.assign || function __assign(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nfunction __rest(s, e) {\n  var t = {};\n\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n}\n\nfunction __values(o) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator],\n      i = 0;\n  if (m) return m.call(o);\n  return {\n    next: function () {\n      if (o && i >= o.length) o = void 0;\n      return {\n        value: o && o[i++],\n        done: !o\n      };\n    }\n  };\n}\n\nfunction __read(o, n) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n  if (!m) return o;\n  var i = m.call(o),\n      r,\n      ar = [],\n      e;\n\n  try {\n    while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n  } catch (error) {\n    e = {\n      error: error\n    };\n  } finally {\n    try {\n      if (r && !r.done && (m = i[\"return\"])) m.call(i);\n    } finally {\n      if (e) throw e.error;\n    }\n  }\n\n  return ar;\n}\n\nfunction __spread() {\n  for (var ar = [], i = 0; i < arguments.length; i++) ar = ar.concat(__read(arguments[i]));\n\n  return ar;\n}\n\nexport { __assign, __read, __rest, __spread, __values };","var STATE_DELIMITER = '.';\nvar EMPTY_ACTIVITY_MAP = {};\nvar DEFAULT_GUARD_TYPE = 'xstate.guard';\nvar TARGETLESS_KEY = '';\nexport { DEFAULT_GUARD_TYPE, EMPTY_ACTIVITY_MAP, STATE_DELIMITER, TARGETLESS_KEY };","var IS_PRODUCTION = process.env.NODE_ENV === 'production';\nexport { IS_PRODUCTION };","import { __spread, __values, __read, __assign } from './_virtual/_tslib.js';\nimport { DEFAULT_GUARD_TYPE, TARGETLESS_KEY, STATE_DELIMITER } from './constants.js';\nimport { IS_PRODUCTION } from './environment.js';\n\nfunction keys(value) {\n  return Object.keys(value);\n}\n\nfunction matchesState(parentStateId, childStateId, delimiter) {\n  if (delimiter === void 0) {\n    delimiter = STATE_DELIMITER;\n  }\n\n  var parentStateValue = toStateValue(parentStateId, delimiter);\n  var childStateValue = toStateValue(childStateId, delimiter);\n\n  if (isString(childStateValue)) {\n    if (isString(parentStateValue)) {\n      return childStateValue === parentStateValue;\n    } // Parent more specific than child\n\n\n    return false;\n  }\n\n  if (isString(parentStateValue)) {\n    return parentStateValue in childStateValue;\n  }\n\n  return keys(parentStateValue).every(function (key) {\n    if (!(key in childStateValue)) {\n      return false;\n    }\n\n    return matchesState(parentStateValue[key], childStateValue[key]);\n  });\n}\n\nfunction getEventType(event) {\n  try {\n    return isString(event) || typeof event === 'number' ? \"\" + event : event.type;\n  } catch (e) {\n    throw new Error('Events must be strings or objects with a string event.type property.');\n  }\n}\n\nfunction toStatePath(stateId, delimiter) {\n  try {\n    if (isArray(stateId)) {\n      return stateId;\n    }\n\n    return stateId.toString().split(delimiter);\n  } catch (e) {\n    throw new Error(\"'\" + stateId + \"' is not a valid state path.\");\n  }\n}\n\nfunction isStateLike(state) {\n  return typeof state === 'object' && 'value' in state && 'context' in state && 'event' in state && '_event' in state;\n}\n\nfunction toStateValue(stateValue, delimiter) {\n  if (isStateLike(stateValue)) {\n    return stateValue.value;\n  }\n\n  if (isArray(stateValue)) {\n    return pathToStateValue(stateValue);\n  }\n\n  if (typeof stateValue !== 'string') {\n    return stateValue;\n  }\n\n  var statePath = toStatePath(stateValue, delimiter);\n  return pathToStateValue(statePath);\n}\n\nfunction pathToStateValue(statePath) {\n  if (statePath.length === 1) {\n    return statePath[0];\n  }\n\n  var value = {};\n  var marker = value;\n\n  for (var i = 0; i < statePath.length - 1; i++) {\n    if (i === statePath.length - 2) {\n      marker[statePath[i]] = statePath[i + 1];\n    } else {\n      marker[statePath[i]] = {};\n      marker = marker[statePath[i]];\n    }\n  }\n\n  return value;\n}\n\nfunction mapValues(collection, iteratee) {\n  var result = {};\n  var collectionKeys = keys(collection);\n\n  for (var i = 0; i < collectionKeys.length; i++) {\n    var key = collectionKeys[i];\n    result[key] = iteratee(collection[key], key, collection, i);\n  }\n\n  return result;\n}\n\nfunction mapFilterValues(collection, iteratee, predicate) {\n  var e_1, _a;\n\n  var result = {};\n\n  try {\n    for (var _b = __values(keys(collection)), _c = _b.next(); !_c.done; _c = _b.next()) {\n      var key = _c.value;\n      var item = collection[key];\n\n      if (!predicate(item)) {\n        continue;\n      }\n\n      result[key] = iteratee(item, key, collection);\n    }\n  } catch (e_1_1) {\n    e_1 = {\n      error: e_1_1\n    };\n  } finally {\n    try {\n      if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n    } finally {\n      if (e_1) throw e_1.error;\n    }\n  }\n\n  return result;\n}\n/**\r\n * Retrieves a value at the given path.\r\n * @param props The deep path to the prop of the desired value\r\n */\n\n\nvar path = function (props) {\n  return function (object) {\n    var e_2, _a;\n\n    var result = object;\n\n    try {\n      for (var props_1 = __values(props), props_1_1 = props_1.next(); !props_1_1.done; props_1_1 = props_1.next()) {\n        var prop = props_1_1.value;\n        result = result[prop];\n      }\n    } catch (e_2_1) {\n      e_2 = {\n        error: e_2_1\n      };\n    } finally {\n      try {\n        if (props_1_1 && !props_1_1.done && (_a = props_1.return)) _a.call(props_1);\n      } finally {\n        if (e_2) throw e_2.error;\n      }\n    }\n\n    return result;\n  };\n};\n/**\r\n * Retrieves a value at the given path via the nested accessor prop.\r\n * @param props The deep path to the prop of the desired value\r\n */\n\n\nfunction nestedPath(props, accessorProp) {\n  return function (object) {\n    var e_3, _a;\n\n    var result = object;\n\n    try {\n      for (var props_2 = __values(props), props_2_1 = props_2.next(); !props_2_1.done; props_2_1 = props_2.next()) {\n        var prop = props_2_1.value;\n        result = result[accessorProp][prop];\n      }\n    } catch (e_3_1) {\n      e_3 = {\n        error: e_3_1\n      };\n    } finally {\n      try {\n        if (props_2_1 && !props_2_1.done && (_a = props_2.return)) _a.call(props_2);\n      } finally {\n        if (e_3) throw e_3.error;\n      }\n    }\n\n    return result;\n  };\n}\n\nfunction toStatePaths(stateValue) {\n  if (!stateValue) {\n    return [[]];\n  }\n\n  if (isString(stateValue)) {\n    return [[stateValue]];\n  }\n\n  var result = flatten(keys(stateValue).map(function (key) {\n    var subStateValue = stateValue[key];\n\n    if (typeof subStateValue !== 'string' && (!subStateValue || !Object.keys(subStateValue).length)) {\n      return [[key]];\n    }\n\n    return toStatePaths(stateValue[key]).map(function (subPath) {\n      return [key].concat(subPath);\n    });\n  }));\n  return result;\n}\n\nfunction flatten(array) {\n  var _a;\n\n  return (_a = []).concat.apply(_a, __spread(array));\n}\n\nfunction toArrayStrict(value) {\n  if (isArray(value)) {\n    return value;\n  }\n\n  return [value];\n}\n\nfunction toArray(value) {\n  if (value === undefined) {\n    return [];\n  }\n\n  return toArrayStrict(value);\n}\n\nfunction mapContext(mapper, context, _event) {\n  var e_5, _a;\n\n  if (isFunction(mapper)) {\n    return mapper(context, _event.data);\n  }\n\n  var result = {};\n\n  try {\n    for (var _b = __values(keys(mapper)), _c = _b.next(); !_c.done; _c = _b.next()) {\n      var key = _c.value;\n      var subMapper = mapper[key];\n\n      if (isFunction(subMapper)) {\n        result[key] = subMapper(context, _event.data);\n      } else {\n        result[key] = subMapper;\n      }\n    }\n  } catch (e_5_1) {\n    e_5 = {\n      error: e_5_1\n    };\n  } finally {\n    try {\n      if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n    } finally {\n      if (e_5) throw e_5.error;\n    }\n  }\n\n  return result;\n}\n\nfunction isBuiltInEvent(eventType) {\n  return /^(done|error)\\./.test(eventType);\n}\n\nfunction isPromiseLike(value) {\n  if (value instanceof Promise) {\n    return true;\n  } // Check if shape matches the Promise/A+ specification for a \"thenable\".\n\n\n  if (value !== null && (isFunction(value) || typeof value === 'object') && isFunction(value.then)) {\n    return true;\n  }\n\n  return false;\n}\n\nfunction partition(items, predicate) {\n  var e_6, _a;\n\n  var _b = __read([[], []], 2),\n      truthy = _b[0],\n      falsy = _b[1];\n\n  try {\n    for (var items_1 = __values(items), items_1_1 = items_1.next(); !items_1_1.done; items_1_1 = items_1.next()) {\n      var item = items_1_1.value;\n\n      if (predicate(item)) {\n        truthy.push(item);\n      } else {\n        falsy.push(item);\n      }\n    }\n  } catch (e_6_1) {\n    e_6 = {\n      error: e_6_1\n    };\n  } finally {\n    try {\n      if (items_1_1 && !items_1_1.done && (_a = items_1.return)) _a.call(items_1);\n    } finally {\n      if (e_6) throw e_6.error;\n    }\n  }\n\n  return [truthy, falsy];\n}\n\nfunction updateHistoryStates(hist, stateValue) {\n  return mapValues(hist.states, function (subHist, key) {\n    if (!subHist) {\n      return undefined;\n    }\n\n    var subStateValue = (isString(stateValue) ? undefined : stateValue[key]) || (subHist ? subHist.current : undefined);\n\n    if (!subStateValue) {\n      return undefined;\n    }\n\n    return {\n      current: subStateValue,\n      states: updateHistoryStates(subHist, subStateValue)\n    };\n  });\n}\n\nfunction updateHistoryValue(hist, stateValue) {\n  return {\n    current: stateValue,\n    states: updateHistoryStates(hist, stateValue)\n  };\n}\n\nfunction updateContext(context, _event, assignActions, state) {\n  if (!IS_PRODUCTION) {\n    warn(!!context, 'Attempting to update undefined context');\n  }\n\n  var updatedContext = context ? assignActions.reduce(function (acc, assignAction) {\n    var e_7, _a;\n\n    var assignment = assignAction.assignment;\n    var meta = {\n      state: state,\n      action: assignAction,\n      _event: _event\n    };\n    var partialUpdate = {};\n\n    if (isFunction(assignment)) {\n      partialUpdate = assignment(acc, _event.data, meta);\n    } else {\n      try {\n        for (var _b = __values(keys(assignment)), _c = _b.next(); !_c.done; _c = _b.next()) {\n          var key = _c.value;\n          var propAssignment = assignment[key];\n          partialUpdate[key] = isFunction(propAssignment) ? propAssignment(acc, _event.data, meta) : propAssignment;\n        }\n      } catch (e_7_1) {\n        e_7 = {\n          error: e_7_1\n        };\n      } finally {\n        try {\n          if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n        } finally {\n          if (e_7) throw e_7.error;\n        }\n      }\n    }\n\n    return Object.assign({}, acc, partialUpdate);\n  }, context) : context;\n  return updatedContext;\n} // tslint:disable-next-line:no-empty\n\n\nvar warn = function () {};\n\nif (!IS_PRODUCTION) {\n  warn = function (condition, message) {\n    var error = condition instanceof Error ? condition : undefined;\n\n    if (!error && condition) {\n      return;\n    }\n\n    if (console !== undefined) {\n      var args = [\"Warning: \" + message];\n\n      if (error) {\n        args.push(error);\n      } // tslint:disable-next-line:no-console\n\n\n      console.warn.apply(console, args);\n    }\n  };\n}\n\nfunction isArray(value) {\n  return Array.isArray(value);\n} // tslint:disable-next-line:ban-types\n\n\nfunction isFunction(value) {\n  return typeof value === 'function';\n}\n\nfunction isString(value) {\n  return typeof value === 'string';\n} // export function memoizedGetter<T, TP extends { prototype: object }>(\n//   o: TP,\n//   property: string,\n//   getter: () => T\n// ): void {\n//   Object.defineProperty(o.prototype, property, {\n//     get: getter,\n//     enumerable: false,\n//     configurable: false\n//   });\n// }\n\n\nfunction toGuard(condition, guardMap) {\n  if (!condition) {\n    return undefined;\n  }\n\n  if (isString(condition)) {\n    return {\n      type: DEFAULT_GUARD_TYPE,\n      name: condition,\n      predicate: guardMap ? guardMap[condition] : undefined\n    };\n  }\n\n  if (isFunction(condition)) {\n    return {\n      type: DEFAULT_GUARD_TYPE,\n      name: condition.name,\n      predicate: condition\n    };\n  }\n\n  return condition;\n}\n\nfunction isObservable(value) {\n  try {\n    return 'subscribe' in value && isFunction(value.subscribe);\n  } catch (e) {\n    return false;\n  }\n}\n\nvar symbolObservable =\n/*#__PURE__*/\nfunction () {\n  return typeof Symbol === 'function' && Symbol.observable || '@@observable';\n}();\n\nfunction isMachine(value) {\n  try {\n    return '__xstatenode' in value;\n  } catch (e) {\n    return false;\n  }\n}\n\nvar uniqueId =\n/*#__PURE__*/\nfunction () {\n  var currentId = 0;\n  return function () {\n    currentId++;\n    return currentId.toString(16);\n  };\n}();\n\nfunction toEventObject(event, payload // id?: TEvent['type']\n) {\n  if (isString(event) || typeof event === 'number') {\n    return __assign({\n      type: event\n    }, payload);\n  }\n\n  return event;\n}\n\nfunction toSCXMLEvent(event, scxmlEvent) {\n  if (!isString(event) && '$$type' in event && event.$$type === 'scxml') {\n    return event;\n  }\n\n  var eventObject = toEventObject(event);\n  return __assign({\n    name: eventObject.type,\n    data: eventObject,\n    $$type: 'scxml',\n    type: 'external'\n  }, scxmlEvent);\n}\n\nfunction toTransitionConfigArray(event, configLike) {\n  var transitions = toArrayStrict(configLike).map(function (transitionLike) {\n    if (typeof transitionLike === 'undefined' || typeof transitionLike === 'string' || isMachine(transitionLike)) {\n      // @ts-ignore until Type instantiation is excessively deep and possibly infinite bug is fixed\n      return {\n        target: transitionLike,\n        event: event\n      };\n    }\n\n    return __assign(__assign({}, transitionLike), {\n      event: event\n    });\n  });\n  return transitions;\n}\n\nfunction normalizeTarget(target) {\n  if (target === undefined || target === TARGETLESS_KEY) {\n    return undefined;\n  }\n\n  return toArray(target);\n}\n\nfunction reportUnhandledExceptionOnInvocation(originalError, currentError, id) {\n  if (!IS_PRODUCTION) {\n    var originalStackTrace = originalError.stack ? \" Stacktrace was '\" + originalError.stack + \"'\" : '';\n\n    if (originalError === currentError) {\n      // tslint:disable-next-line:no-console\n      console.error(\"Missing onError handler for invocation '\" + id + \"', error was '\" + originalError + \"'.\" + originalStackTrace);\n    } else {\n      var stackTrace = currentError.stack ? \" Stacktrace was '\" + currentError.stack + \"'\" : ''; // tslint:disable-next-line:no-console\n\n      console.error(\"Missing onError handler and/or unhandled exception/promise rejection for invocation '\" + id + \"'. \" + (\"Original error: '\" + originalError + \"'. \" + originalStackTrace + \" Current error is '\" + currentError + \"'.\" + stackTrace));\n    }\n  }\n}\n\nexport { flatten, getEventType, isArray, isBuiltInEvent, isFunction, isMachine, isObservable, isPromiseLike, isStateLike, isString, keys, mapContext, mapFilterValues, mapValues, matchesState, nestedPath, normalizeTarget, partition, path, pathToStateValue, reportUnhandledExceptionOnInvocation, symbolObservable, toArray, toArrayStrict, toEventObject, toGuard, toSCXMLEvent, toStatePath, toStatePaths, toStateValue, toTransitionConfigArray, uniqueId, updateContext, updateHistoryStates, updateHistoryValue, warn };","import { __values } from './_virtual/_tslib.js';\nimport { keys, matchesState } from './utils.js';\n\nfunction mapState(stateMap, stateId) {\n  var e_1, _a;\n\n  var foundStateId;\n\n  try {\n    for (var _b = __values(keys(stateMap)), _c = _b.next(); !_c.done; _c = _b.next()) {\n      var mappedStateId = _c.value;\n\n      if (matchesState(mappedStateId, stateId) && (!foundStateId || stateId.length > foundStateId.length)) {\n        foundStateId = mappedStateId;\n      }\n    }\n  } catch (e_1_1) {\n    e_1 = {\n      error: e_1_1\n    };\n  } finally {\n    try {\n      if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n    } finally {\n      if (e_1) throw e_1.error;\n    }\n  }\n\n  return stateMap[foundStateId];\n}\n\nexport { mapState };","var ActionTypes;\n\n(function (ActionTypes) {\n  ActionTypes[\"Start\"] = \"xstate.start\";\n  ActionTypes[\"Stop\"] = \"xstate.stop\";\n  ActionTypes[\"Raise\"] = \"xstate.raise\";\n  ActionTypes[\"Send\"] = \"xstate.send\";\n  ActionTypes[\"Cancel\"] = \"xstate.cancel\";\n  ActionTypes[\"NullEvent\"] = \"\";\n  ActionTypes[\"Assign\"] = \"xstate.assign\";\n  ActionTypes[\"After\"] = \"xstate.after\";\n  ActionTypes[\"DoneState\"] = \"done.state\";\n  ActionTypes[\"DoneInvoke\"] = \"done.invoke\";\n  ActionTypes[\"Log\"] = \"xstate.log\";\n  ActionTypes[\"Init\"] = \"xstate.init\";\n  ActionTypes[\"Invoke\"] = \"xstate.invoke\";\n  ActionTypes[\"ErrorExecution\"] = \"error.execution\";\n  ActionTypes[\"ErrorCommunication\"] = \"error.communication\";\n  ActionTypes[\"ErrorPlatform\"] = \"error.platform\";\n  ActionTypes[\"ErrorCustom\"] = \"xstate.error\";\n  ActionTypes[\"Update\"] = \"xstate.update\";\n  ActionTypes[\"Pure\"] = \"xstate.pure\";\n})(ActionTypes || (ActionTypes = {}));\n\nvar SpecialTargets;\n\n(function (SpecialTargets) {\n  SpecialTargets[\"Parent\"] = \"#_parent\";\n  SpecialTargets[\"Internal\"] = \"#_internal\";\n})(SpecialTargets || (SpecialTargets = {}));\n\nexport { ActionTypes, SpecialTargets };","import { ActionTypes } from './types.js'; // xstate-specific action types\n\nvar start = ActionTypes.Start;\nvar stop = ActionTypes.Stop;\nvar raise = ActionTypes.Raise;\nvar send = ActionTypes.Send;\nvar cancel = ActionTypes.Cancel;\nvar nullEvent = ActionTypes.NullEvent;\nvar assign = ActionTypes.Assign;\nvar after = ActionTypes.After;\nvar doneState = ActionTypes.DoneState;\nvar log = ActionTypes.Log;\nvar init = ActionTypes.Init;\nvar invoke = ActionTypes.Invoke;\nvar errorExecution = ActionTypes.ErrorExecution;\nvar errorPlatform = ActionTypes.ErrorPlatform;\nvar error = ActionTypes.ErrorCustom;\nvar update = ActionTypes.Update;\nvar pure = ActionTypes.Pure;\nexport { after, assign, cancel, doneState, error, errorExecution, errorPlatform, init, invoke, log, nullEvent, pure, raise, send, start, stop, update };","import { __assign, __rest } from './_virtual/_tslib.js';\nimport { toSCXMLEvent, isFunction, toEventObject, getEventType, isString, isArray } from './utils.js';\nimport { SpecialTargets, ActionTypes } from './types.js';\nimport { send as send$1, update, assign as assign$1, raise as raise$1, init, log as log$1, cancel as cancel$1, error as error$1 } from './actionTypes.js';\nvar initEvent =\n/*#__PURE__*/\ntoSCXMLEvent({\n  type: init\n});\n\nfunction getActionFunction(actionType, actionFunctionMap) {\n  return actionFunctionMap ? actionFunctionMap[actionType] || undefined : undefined;\n}\n\nfunction toActionObject(action, actionFunctionMap) {\n  var actionObject;\n\n  if (isString(action) || typeof action === 'number') {\n    var exec = getActionFunction(action, actionFunctionMap);\n\n    if (isFunction(exec)) {\n      actionObject = {\n        type: action,\n        exec: exec\n      };\n    } else if (exec) {\n      actionObject = exec;\n    } else {\n      actionObject = {\n        type: action,\n        exec: undefined\n      };\n    }\n  } else if (isFunction(action)) {\n    actionObject = {\n      // Convert action to string if unnamed\n      type: action.name || action.toString(),\n      exec: action\n    };\n  } else {\n    var exec = getActionFunction(action.type, actionFunctionMap);\n\n    if (isFunction(exec)) {\n      actionObject = __assign(__assign({}, action), {\n        exec: exec\n      });\n    } else if (exec) {\n      var type = action.type,\n          other = __rest(action, [\"type\"]);\n\n      actionObject = __assign(__assign({\n        type: type\n      }, exec), other);\n    } else {\n      actionObject = action;\n    }\n  }\n\n  Object.defineProperty(actionObject, 'toString', {\n    value: function () {\n      return actionObject.type;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  return actionObject;\n}\n\nvar toActionObjects = function (action, actionFunctionMap) {\n  if (!action) {\n    return [];\n  }\n\n  var actions = isArray(action) ? action : [action];\n  return actions.map(function (subAction) {\n    return toActionObject(subAction, actionFunctionMap);\n  });\n};\n\nfunction toActivityDefinition(action) {\n  var actionObject = toActionObject(action);\n  return __assign(__assign({\n    id: isString(action) ? action : actionObject.id\n  }, actionObject), {\n    type: actionObject.type\n  });\n}\n/**\r\n * Raises an event. This places the event in the internal event queue, so that\r\n * the event is immediately consumed by the machine in the current step.\r\n *\r\n * @param eventType The event to raise.\r\n */\n\n\nfunction raise(event) {\n  if (!isString(event)) {\n    return send(event, {\n      to: SpecialTargets.Internal\n    });\n  }\n\n  return {\n    type: raise$1,\n    event: event\n  };\n}\n\nfunction resolveRaise(action) {\n  return {\n    type: raise$1,\n    _event: toSCXMLEvent(action.event)\n  };\n}\n/**\r\n * Sends an event. This returns an action that will be read by an interpreter to\r\n * send the event in the next step, after the current step is finished executing.\r\n *\r\n * @param event The event to send.\r\n * @param options Options to pass into the send event:\r\n *  - `id` - The unique send event identifier (used with `cancel()`).\r\n *  - `delay` - The number of milliseconds to delay the sending of the event.\r\n *  - `to` - The target of this event (by default, the machine the event was sent from).\r\n */\n\n\nfunction send(event, options) {\n  return {\n    to: options ? options.to : undefined,\n    type: send$1,\n    event: isFunction(event) ? event : toEventObject(event),\n    delay: options ? options.delay : undefined,\n    id: options && options.id !== undefined ? options.id : isFunction(event) ? event.name : getEventType(event)\n  };\n}\n\nfunction resolveSend(action, ctx, _event, delaysMap) {\n  var meta = {\n    _event: _event\n  }; // TODO: helper function for resolving Expr\n\n  var resolvedEvent = toSCXMLEvent(isFunction(action.event) ? action.event(ctx, _event.data, meta) : action.event);\n  var resolvedDelay;\n\n  if (isString(action.delay)) {\n    var configDelay = delaysMap && delaysMap[action.delay];\n    resolvedDelay = isFunction(configDelay) ? configDelay(ctx, _event.data, meta) : configDelay;\n  } else {\n    resolvedDelay = isFunction(action.delay) ? action.delay(ctx, _event.data, meta) : action.delay;\n  }\n\n  var resolvedTarget = isFunction(action.to) ? action.to(ctx, _event.data, meta) : action.to;\n  return __assign(__assign({}, action), {\n    to: resolvedTarget,\n    _event: resolvedEvent,\n    event: resolvedEvent.data,\n    delay: resolvedDelay\n  });\n}\n/**\r\n * Sends an event to this machine's parent.\r\n *\r\n * @param event The event to send to the parent machine.\r\n * @param options Options to pass into the send event.\r\n */\n\n\nfunction sendParent(event, options) {\n  return send(event, __assign(__assign({}, options), {\n    to: SpecialTargets.Parent\n  }));\n}\n/**\r\n * Sends an update event to this machine's parent.\r\n */\n\n\nfunction sendUpdate() {\n  return sendParent(update);\n}\n/**\r\n * Sends an event back to the sender of the original event.\r\n *\r\n * @param event The event to send back to the sender\r\n * @param options Options to pass into the send event\r\n */\n\n\nfunction respond(event, options) {\n  return send(event, __assign(__assign({}, options), {\n    to: function (_, __, _a) {\n      var _event = _a._event;\n      return _event.origin; // TODO: handle when _event.origin is undefined\n    }\n  }));\n}\n\nvar defaultLogExpr = function (context, event) {\n  return {\n    context: context,\n    event: event\n  };\n};\n/**\r\n *\r\n * @param expr The expression function to evaluate which will be logged.\r\n *  Takes in 2 arguments:\r\n *  - `ctx` - the current state context\r\n *  - `event` - the event that caused this action to be executed.\r\n * @param label The label to give to the logged expression.\r\n */\n\n\nfunction log(expr, label) {\n  if (expr === void 0) {\n    expr = defaultLogExpr;\n  }\n\n  return {\n    type: log$1,\n    label: label,\n    expr: expr\n  };\n}\n\nvar resolveLog = function (action, ctx, _event) {\n  return __assign(__assign({}, action), {\n    value: isString(action.expr) ? action.expr : action.expr(ctx, _event.data, {\n      _event: _event\n    })\n  });\n};\n/**\r\n * Cancels an in-flight `send(...)` action. A canceled sent action will not\r\n * be executed, nor will its event be sent, unless it has already been sent\r\n * (e.g., if `cancel(...)` is called after the `send(...)` action's `delay`).\r\n *\r\n * @param sendId The `id` of the `send(...)` action to cancel.\r\n */\n\n\nvar cancel = function (sendId) {\n  return {\n    type: cancel$1,\n    sendId: sendId\n  };\n};\n/**\r\n * Starts an activity.\r\n *\r\n * @param activity The activity to start.\r\n */\n\n\nfunction start(activity) {\n  var activityDef = toActivityDefinition(activity);\n  return {\n    type: ActionTypes.Start,\n    activity: activityDef,\n    exec: undefined\n  };\n}\n/**\r\n * Stops an activity.\r\n *\r\n * @param activity The activity to stop.\r\n */\n\n\nfunction stop(activity) {\n  var activityDef = toActivityDefinition(activity);\n  return {\n    type: ActionTypes.Stop,\n    activity: activityDef,\n    exec: undefined\n  };\n}\n/**\r\n * Updates the current context of the machine.\r\n *\r\n * @param assignment An object that represents the partial context to update.\r\n */\n\n\nvar assign = function (assignment) {\n  return {\n    type: assign$1,\n    assignment: assignment\n  };\n};\n/**\r\n * Returns an event type that represents an implicit event that\r\n * is sent after the specified `delay`.\r\n *\r\n * @param delayRef The delay in milliseconds\r\n * @param id The state node ID where this event is handled\r\n */\n\n\nfunction after(delayRef, id) {\n  var idSuffix = id ? \"#\" + id : '';\n  return ActionTypes.After + \"(\" + delayRef + \")\" + idSuffix;\n}\n/**\r\n * Returns an event that represents that a final state node\r\n * has been reached in the parent state node.\r\n *\r\n * @param id The final state node's parent state node `id`\r\n * @param data The data to pass into the event\r\n */\n\n\nfunction done(id, data) {\n  var type = ActionTypes.DoneState + \".\" + id;\n  var eventObject = {\n    type: type,\n    data: data\n  };\n\n  eventObject.toString = function () {\n    return type;\n  };\n\n  return eventObject;\n}\n/**\r\n * Returns an event that represents that an invoked service has terminated.\r\n *\r\n * An invoked service is terminated when it has reached a top-level final state node,\r\n * but not when it is canceled.\r\n *\r\n * @param id The final state node ID\r\n * @param data The data to pass into the event\r\n */\n\n\nfunction doneInvoke(id, data) {\n  var type = ActionTypes.DoneInvoke + \".\" + id;\n  var eventObject = {\n    type: type,\n    data: data\n  };\n\n  eventObject.toString = function () {\n    return type;\n  };\n\n  return eventObject;\n}\n\nfunction error(id, data) {\n  var type = ActionTypes.ErrorPlatform + \".\" + id;\n  var eventObject = {\n    type: type,\n    data: data\n  };\n\n  eventObject.toString = function () {\n    return type;\n  };\n\n  return eventObject;\n}\n/**\r\n * Forwards (sends) an event to a specified service.\r\n *\r\n * @param target The target service to forward the event to.\r\n * @param options Options to pass into the send action creator.\r\n */\n\n\nfunction forwardTo(target, options) {\n  return send(function (_, event) {\n    return event;\n  }, __assign(__assign({}, options), {\n    to: target\n  }));\n}\n/**\r\n * Escalates an error by sending it as an event to this machine's parent.\r\n *\r\n * @param errorData The error data to send, or the expression function that\r\n * takes in the `context`, `event`, and `meta`, and returns the error data to send.\r\n * @param options Options to pass into the send action creator.\r\n */\n\n\nfunction escalate(errorData, options) {\n  return sendParent(function (context, event, meta) {\n    return {\n      type: error$1,\n      data: isFunction(errorData) ? errorData(context, event, meta) : errorData\n    };\n  }, __assign(__assign({}, options), {\n    to: SpecialTargets.Parent\n  }));\n}\n\nexport { after, assign, cancel, done, doneInvoke, error, escalate, forwardTo, getActionFunction, initEvent, log, raise, resolveLog, resolveRaise, resolveSend, respond, send, sendParent, sendUpdate, start, stop, toActionObject, toActionObjects, toActivityDefinition };","import { __values, __spread } from './_virtual/_tslib.js';\nimport { keys, flatten } from './utils.js';\n\nvar isLeafNode = function (stateNode) {\n  return stateNode.type === 'atomic' || stateNode.type === 'final';\n};\n\nfunction getChildren(stateNode) {\n  return keys(stateNode.states).map(function (key) {\n    return stateNode.states[key];\n  });\n}\n\nfunction getAllStateNodes(stateNode) {\n  var stateNodes = [stateNode];\n\n  if (isLeafNode(stateNode)) {\n    return stateNodes;\n  }\n\n  return stateNodes.concat(flatten(getChildren(stateNode).map(getAllStateNodes)));\n}\n\nfunction getConfiguration(prevStateNodes, stateNodes) {\n  var e_1, _a, e_2, _b, e_3, _c, e_4, _d;\n\n  var prevConfiguration = new Set(prevStateNodes);\n  var prevAdjList = getAdjList(prevConfiguration);\n  var configuration = new Set(stateNodes);\n\n  try {\n    // add all ancestors\n    for (var configuration_1 = __values(configuration), configuration_1_1 = configuration_1.next(); !configuration_1_1.done; configuration_1_1 = configuration_1.next()) {\n      var s = configuration_1_1.value;\n      var m = s.parent;\n\n      while (m && !configuration.has(m)) {\n        configuration.add(m);\n        m = m.parent;\n      }\n    }\n  } catch (e_1_1) {\n    e_1 = {\n      error: e_1_1\n    };\n  } finally {\n    try {\n      if (configuration_1_1 && !configuration_1_1.done && (_a = configuration_1.return)) _a.call(configuration_1);\n    } finally {\n      if (e_1) throw e_1.error;\n    }\n  }\n\n  var adjList = getAdjList(configuration);\n\n  try {\n    // add descendants\n    for (var configuration_2 = __values(configuration), configuration_2_1 = configuration_2.next(); !configuration_2_1.done; configuration_2_1 = configuration_2.next()) {\n      var s = configuration_2_1.value; // if previously active, add existing child nodes\n\n      if (s.type === 'compound' && (!adjList.get(s) || !adjList.get(s).length)) {\n        if (prevAdjList.get(s)) {\n          prevAdjList.get(s).forEach(function (sn) {\n            return configuration.add(sn);\n          });\n        } else {\n          s.initialStateNodes.forEach(function (sn) {\n            return configuration.add(sn);\n          });\n        }\n      } else {\n        if (s.type === 'parallel') {\n          try {\n            for (var _e = (e_3 = void 0, __values(getChildren(s))), _f = _e.next(); !_f.done; _f = _e.next()) {\n              var child = _f.value;\n\n              if (child.type === 'history') {\n                continue;\n              }\n\n              if (!configuration.has(child)) {\n                configuration.add(child);\n\n                if (prevAdjList.get(child)) {\n                  prevAdjList.get(child).forEach(function (sn) {\n                    return configuration.add(sn);\n                  });\n                } else {\n                  child.initialStateNodes.forEach(function (sn) {\n                    return configuration.add(sn);\n                  });\n                }\n              }\n            }\n          } catch (e_3_1) {\n            e_3 = {\n              error: e_3_1\n            };\n          } finally {\n            try {\n              if (_f && !_f.done && (_c = _e.return)) _c.call(_e);\n            } finally {\n              if (e_3) throw e_3.error;\n            }\n          }\n        }\n      }\n    }\n  } catch (e_2_1) {\n    e_2 = {\n      error: e_2_1\n    };\n  } finally {\n    try {\n      if (configuration_2_1 && !configuration_2_1.done && (_b = configuration_2.return)) _b.call(configuration_2);\n    } finally {\n      if (e_2) throw e_2.error;\n    }\n  }\n\n  try {\n    // add all ancestors\n    for (var configuration_3 = __values(configuration), configuration_3_1 = configuration_3.next(); !configuration_3_1.done; configuration_3_1 = configuration_3.next()) {\n      var s = configuration_3_1.value;\n      var m = s.parent;\n\n      while (m && !configuration.has(m)) {\n        configuration.add(m);\n        m = m.parent;\n      }\n    }\n  } catch (e_4_1) {\n    e_4 = {\n      error: e_4_1\n    };\n  } finally {\n    try {\n      if (configuration_3_1 && !configuration_3_1.done && (_d = configuration_3.return)) _d.call(configuration_3);\n    } finally {\n      if (e_4) throw e_4.error;\n    }\n  }\n\n  return configuration;\n}\n\nfunction getValueFromAdj(baseNode, adjList) {\n  var childStateNodes = adjList.get(baseNode);\n\n  if (!childStateNodes) {\n    return {}; // todo: fix?\n  }\n\n  if (baseNode.type === 'compound') {\n    var childStateNode = childStateNodes[0];\n\n    if (childStateNode) {\n      if (isLeafNode(childStateNode)) {\n        return childStateNode.key;\n      }\n    } else {\n      return {};\n    }\n  }\n\n  var stateValue = {};\n  childStateNodes.forEach(function (csn) {\n    stateValue[csn.key] = getValueFromAdj(csn, adjList);\n  });\n  return stateValue;\n}\n\nfunction getAdjList(configuration) {\n  var e_5, _a;\n\n  var adjList = new Map();\n\n  try {\n    for (var configuration_4 = __values(configuration), configuration_4_1 = configuration_4.next(); !configuration_4_1.done; configuration_4_1 = configuration_4.next()) {\n      var s = configuration_4_1.value;\n\n      if (!adjList.has(s)) {\n        adjList.set(s, []);\n      }\n\n      if (s.parent) {\n        if (!adjList.has(s.parent)) {\n          adjList.set(s.parent, []);\n        }\n\n        adjList.get(s.parent).push(s);\n      }\n    }\n  } catch (e_5_1) {\n    e_5 = {\n      error: e_5_1\n    };\n  } finally {\n    try {\n      if (configuration_4_1 && !configuration_4_1.done && (_a = configuration_4.return)) _a.call(configuration_4);\n    } finally {\n      if (e_5) throw e_5.error;\n    }\n  }\n\n  return adjList;\n}\n\nfunction getValue(rootNode, configuration) {\n  var config = getConfiguration([rootNode], configuration);\n  return getValueFromAdj(rootNode, getAdjList(config));\n}\n\nfunction has(iterable, item) {\n  if (Array.isArray(iterable)) {\n    return iterable.some(function (member) {\n      return member === item;\n    });\n  }\n\n  if (iterable instanceof Set) {\n    return iterable.has(item);\n  }\n\n  return false; // TODO: fix\n}\n\nfunction nextEvents(configuration) {\n  return flatten(__spread(new Set(configuration.map(function (sn) {\n    return sn.ownEvents;\n  }))));\n}\n\nfunction isInFinalState(configuration, stateNode) {\n  if (stateNode.type === 'compound') {\n    return getChildren(stateNode).some(function (s) {\n      return s.type === 'final' && has(configuration, s);\n    });\n  }\n\n  if (stateNode.type === 'parallel') {\n    return getChildren(stateNode).every(function (sn) {\n      return isInFinalState(configuration, sn);\n    });\n  }\n\n  return false;\n}\n\nexport { getAdjList, getAllStateNodes, getChildren, getConfiguration, getValue, has, isInFinalState, isLeafNode, nextEvents };","import { __spread, __rest, __assign } from './_virtual/_tslib.js';\nimport { EMPTY_ACTIVITY_MAP } from './constants.js';\nimport { isString, matchesState, keys } from './utils.js';\nimport { nextEvents } from './stateUtils.js';\nimport { initEvent } from './actions.js';\n\nfunction stateValuesEqual(a, b) {\n  if (a === b) {\n    return true;\n  }\n\n  if (a === undefined || b === undefined) {\n    return false;\n  }\n\n  if (isString(a) || isString(b)) {\n    return a === b;\n  }\n\n  var aKeys = keys(a);\n  var bKeys = keys(b);\n  return aKeys.length === bKeys.length && aKeys.every(function (key) {\n    return stateValuesEqual(a[key], b[key]);\n  });\n}\n\nfunction isState(state) {\n  if (isString(state)) {\n    return false;\n  }\n\n  return 'value' in state && 'history' in state;\n}\n\nfunction bindActionToState(action, state) {\n  var exec = action.exec;\n\n  var boundAction = __assign(__assign({}, action), {\n    exec: exec !== undefined ? function () {\n      return exec(state.context, state.event, {\n        action: action,\n        state: state,\n        _event: state._event\n      });\n    } : undefined\n  });\n\n  return boundAction;\n}\n\nvar State =\n/*#__PURE__*/\n\n/** @class */\nfunction () {\n  /**\r\n   * Creates a new State instance.\r\n   * @param value The state value\r\n   * @param context The extended state\r\n   * @param historyValue The tree representing historical values of the state nodes\r\n   * @param history The previous state\r\n   * @param actions An array of action objects to execute as side-effects\r\n   * @param activities A mapping of activities and whether they are started (`true`) or stopped (`false`).\r\n   * @param meta\r\n   * @param events Internal event queue. Should be empty with run-to-completion semantics.\r\n   * @param configuration\r\n   */\n  function State(config) {\n    var _this = this;\n\n    this.actions = [];\n    this.activities = EMPTY_ACTIVITY_MAP;\n    this.meta = {};\n    this.events = [];\n    this.value = config.value;\n    this.context = config.context;\n    this._event = config._event;\n    this._sessionid = config._sessionid;\n    this.event = this._event.data;\n    this.historyValue = config.historyValue;\n    this.history = config.history;\n    this.actions = config.actions || [];\n    this.activities = config.activities || EMPTY_ACTIVITY_MAP;\n    this.meta = config.meta || {};\n    this.events = config.events || [];\n    this.matches = this.matches.bind(this);\n    this.toStrings = this.toStrings.bind(this);\n    this.configuration = config.configuration;\n    this.transitions = config.transitions;\n    this.children = config.children;\n    this.done = !!config.done;\n    Object.defineProperty(this, 'nextEvents', {\n      get: function () {\n        return nextEvents(_this.configuration);\n      }\n    });\n  }\n  /**\r\n   * Creates a new State instance for the given `stateValue` and `context`.\r\n   * @param stateValue\r\n   * @param context\r\n   */\n\n\n  State.from = function (stateValue, context) {\n    if (stateValue instanceof State) {\n      if (stateValue.context !== context) {\n        return new State({\n          value: stateValue.value,\n          context: context,\n          _event: stateValue._event,\n          _sessionid: null,\n          historyValue: stateValue.historyValue,\n          history: stateValue.history,\n          actions: [],\n          activities: stateValue.activities,\n          meta: {},\n          events: [],\n          configuration: [],\n          transitions: [],\n          children: {}\n        });\n      }\n\n      return stateValue;\n    }\n\n    var _event = initEvent;\n    return new State({\n      value: stateValue,\n      context: context,\n      _event: _event,\n      _sessionid: null,\n      historyValue: undefined,\n      history: undefined,\n      actions: [],\n      activities: undefined,\n      meta: undefined,\n      events: [],\n      configuration: [],\n      transitions: [],\n      children: {}\n    });\n  };\n  /**\r\n   * Creates a new State instance for the given `config`.\r\n   * @param config The state config\r\n   */\n\n\n  State.create = function (config) {\n    return new State(config);\n  };\n  /**\r\n   * Creates a new `State` instance for the given `stateValue` and `context` with no actions (side-effects).\r\n   * @param stateValue\r\n   * @param context\r\n   */\n\n\n  State.inert = function (stateValue, context) {\n    if (stateValue instanceof State) {\n      if (!stateValue.actions.length) {\n        return stateValue;\n      }\n\n      var _event = initEvent;\n      return new State({\n        value: stateValue.value,\n        context: context,\n        _event: _event,\n        _sessionid: null,\n        historyValue: stateValue.historyValue,\n        history: stateValue.history,\n        activities: stateValue.activities,\n        configuration: stateValue.configuration,\n        transitions: [],\n        children: {}\n      });\n    }\n\n    return State.from(stateValue, context);\n  };\n  /**\r\n   * Returns an array of all the string leaf state node paths.\r\n   * @param stateValue\r\n   * @param delimiter The character(s) that separate each subpath in the string state node path.\r\n   */\n\n\n  State.prototype.toStrings = function (stateValue, delimiter) {\n    var _this = this;\n\n    if (stateValue === void 0) {\n      stateValue = this.value;\n    }\n\n    if (delimiter === void 0) {\n      delimiter = '.';\n    }\n\n    if (isString(stateValue)) {\n      return [stateValue];\n    }\n\n    var valueKeys = keys(stateValue);\n    return valueKeys.concat.apply(valueKeys, __spread(valueKeys.map(function (key) {\n      return _this.toStrings(stateValue[key], delimiter).map(function (s) {\n        return key + delimiter + s;\n      });\n    })));\n  };\n\n  State.prototype.toJSON = function () {\n    var _a = this,\n        configuration = _a.configuration,\n        transitions = _a.transitions,\n        jsonValues = __rest(_a, [\"configuration\", \"transitions\"]);\n\n    return jsonValues;\n  };\n  /**\r\n   * Whether the current state value is a subset of the given parent state value.\r\n   * @param parentStateValue\r\n   */\n\n\n  State.prototype.matches = function (parentStateValue) {\n    return matchesState(parentStateValue, this.value);\n  };\n\n  return State;\n}();\n\nexport { State, bindActionToState, isState, stateValuesEqual };","function createNullActor(id) {\n  return {\n    id: id,\n    send: function () {\n      return void 0;\n    },\n    subscribe: function () {\n      return {\n        unsubscribe: function () {\n          return void 0;\n        }\n      };\n    },\n    toJSON: function () {\n      return {\n        id: id\n      };\n    }\n  };\n}\n/**\r\n * Creates a null actor that is able to be invoked given the provided\r\n * invocation information in its `.meta` value.\r\n *\r\n * @param invokeDefinition The meta information needed to invoke the actor.\r\n */\n\n\nfunction createInvocableActor(invokeDefinition) {\n  var tempActor = createNullActor(invokeDefinition.id);\n  tempActor.meta = invokeDefinition;\n  return tempActor;\n}\n\nfunction isActor(item) {\n  try {\n    return typeof item.send === 'function';\n  } catch (e) {\n    return false;\n  }\n}\n\nexport { createInvocableActor, createNullActor, isActor };","import { __assign, __values, __spread, __read, __rest } from './_virtual/_tslib.js';\nimport { DEFAULT_GUARD_TYPE, STATE_DELIMITER } from './constants.js';\nimport { IS_PRODUCTION } from './environment.js';\nimport { mapValues, isArray, flatten, keys, toArray, toStateValue, isString, getEventType, matchesState, path, mapContext, toSCXMLEvent, pathToStateValue, isBuiltInEvent, partition, updateContext, warn, updateHistoryValue, toStatePath, mapFilterValues, toStatePaths, nestedPath, normalizeTarget, toGuard, toTransitionConfigArray, isMachine, isFunction } from './utils.js';\nimport { SpecialTargets } from './types.js';\nimport { getAllStateNodes, getConfiguration, has, getChildren, isInFinalState, getValue, isLeafNode } from './stateUtils.js';\nimport { start as start$1, stop as stop$1, pure, log, send, raise as raise$1, invoke, update, nullEvent, assign } from './actionTypes.js';\nimport { done, start, raise, stop, toActionObjects, toActionObject, resolveLog, resolveSend, resolveRaise, doneInvoke, error, toActivityDefinition, after, send as send$1, cancel, initEvent } from './actions.js';\nimport { State, stateValuesEqual } from './State.js';\nimport { createInvocableActor } from './Actor.js';\nvar NULL_EVENT = '';\nvar STATE_IDENTIFIER = '#';\nvar WILDCARD = '*';\nvar EMPTY_OBJECT = {};\n\nvar isStateId = function (str) {\n  return str[0] === STATE_IDENTIFIER;\n};\n\nvar createDefaultOptions = function () {\n  return {\n    actions: {},\n    guards: {},\n    services: {},\n    activities: {},\n    delays: {}\n  };\n};\n\nvar validateArrayifiedTransitions = function (stateNode, event, transitions) {\n  var hasNonLastUnguardedTarget = transitions.slice(0, -1).some(function (transition) {\n    return !('cond' in transition) && !('in' in transition) && (isString(transition.target) || isMachine(transition.target));\n  });\n  var eventText = event === NULL_EVENT ? 'the transient event' : \"event '\" + event + \"'\";\n  warn(!hasNonLastUnguardedTarget, \"One or more transitions for \" + eventText + \" on state '\" + stateNode.id + \"' are unreachable. \" + \"Make sure that the default transition is the last one defined.\");\n};\n\nvar StateNode =\n/*#__PURE__*/\n\n/** @class */\nfunction () {\n  function StateNode(\n  /**\r\n   * The raw config used to create the machine.\r\n   */\n  config, options,\n  /**\r\n   * The initial extended state\r\n   */\n  context) {\n    var _this = this;\n\n    this.config = config;\n    this.context = context;\n    /**\r\n     * The order this state node appears. Corresponds to the implicit SCXML document order.\r\n     */\n\n    this.order = -1;\n    this.__xstatenode = true;\n    this.__cache = {\n      events: undefined,\n      relativeValue: new Map(),\n      initialStateValue: undefined,\n      initialState: undefined,\n      on: undefined,\n      transitions: undefined,\n      candidates: {},\n      delayedTransitions: undefined\n    };\n    this.idMap = {};\n    this.options = Object.assign(createDefaultOptions(), options);\n    this.parent = this.options._parent;\n    this.key = this.config.key || this.options._key || this.config.id || '(machine)';\n    this.machine = this.parent ? this.parent.machine : this;\n    this.path = this.parent ? this.parent.path.concat(this.key) : [];\n    this.delimiter = this.config.delimiter || (this.parent ? this.parent.delimiter : STATE_DELIMITER);\n    this.id = this.config.id || __spread([this.machine.key], this.path).join(this.delimiter);\n    this.version = this.parent ? this.parent.version : this.config.version;\n    this.type = this.config.type || (this.config.parallel ? 'parallel' : this.config.states && keys(this.config.states).length ? 'compound' : this.config.history ? 'history' : 'atomic');\n\n    if (!IS_PRODUCTION) {\n      warn(!('parallel' in this.config), \"The \\\"parallel\\\" property is deprecated and will be removed in version 4.1. \" + (this.config.parallel ? \"Replace with `type: 'parallel'`\" : \"Use `type: '\" + this.type + \"'`\") + \" in the config for state node '\" + this.id + \"' instead.\");\n    }\n\n    this.initial = this.config.initial;\n    this.states = this.config.states ? mapValues(this.config.states, function (stateConfig, key) {\n      var _a;\n\n      var stateNode = new StateNode(stateConfig, {\n        _parent: _this,\n        _key: key\n      });\n      Object.assign(_this.idMap, __assign((_a = {}, _a[stateNode.id] = stateNode, _a), stateNode.idMap));\n      return stateNode;\n    }) : EMPTY_OBJECT; // Document order\n\n    var order = 0;\n\n    function dfs(stateNode) {\n      var e_1, _a;\n\n      stateNode.order = order++;\n\n      try {\n        for (var _b = __values(getChildren(stateNode)), _c = _b.next(); !_c.done; _c = _b.next()) {\n          var child = _c.value;\n          dfs(child);\n        }\n      } catch (e_1_1) {\n        e_1 = {\n          error: e_1_1\n        };\n      } finally {\n        try {\n          if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n        } finally {\n          if (e_1) throw e_1.error;\n        }\n      }\n    }\n\n    dfs(this); // History config\n\n    this.history = this.config.history === true ? 'shallow' : this.config.history || false;\n    this._transient = !this.config.on ? false : Array.isArray(this.config.on) ? this.config.on.some(function (_a) {\n      var event = _a.event;\n      return event === NULL_EVENT;\n    }) : NULL_EVENT in this.config.on;\n    this.strict = !!this.config.strict; // TODO: deprecate (entry)\n\n    this.onEntry = toArray(this.config.entry || this.config.onEntry).map(function (action) {\n      return toActionObject(action);\n    }); // TODO: deprecate (exit)\n\n    this.onExit = toArray(this.config.exit || this.config.onExit).map(function (action) {\n      return toActionObject(action);\n    });\n    this.meta = this.config.meta;\n    this.data = this.type === 'final' ? this.config.data : undefined;\n    this.invoke = toArray(this.config.invoke).map(function (invokeConfig, i) {\n      var _a, _b;\n\n      if (isMachine(invokeConfig)) {\n        _this.machine.options.services = __assign((_a = {}, _a[invokeConfig.id] = invokeConfig, _a), _this.machine.options.services);\n        return {\n          type: invoke,\n          src: invokeConfig.id,\n          id: invokeConfig.id\n        };\n      } else if (typeof invokeConfig.src !== 'string') {\n        var invokeSrc = _this.id + \":invocation[\" + i + \"]\"; // TODO: util function\n\n        _this.machine.options.services = __assign((_b = {}, _b[invokeSrc] = invokeConfig.src, _b), _this.machine.options.services);\n        return __assign(__assign({\n          type: invoke,\n          id: invokeSrc\n        }, invokeConfig), {\n          src: invokeSrc\n        });\n      } else {\n        return __assign(__assign({}, invokeConfig), {\n          type: invoke,\n          id: invokeConfig.id || invokeConfig.src,\n          src: invokeConfig.src\n        });\n      }\n    });\n    this.activities = toArray(this.config.activities).concat(this.invoke).map(function (activity) {\n      return toActivityDefinition(activity);\n    });\n    this.transition = this.transition.bind(this);\n  }\n\n  StateNode.prototype._init = function () {\n    if (this.__cache.transitions) {\n      return;\n    }\n\n    getAllStateNodes(this).forEach(function (stateNode) {\n      return stateNode.on;\n    });\n  };\n  /**\r\n   * Clones this state machine with custom options and context.\r\n   *\r\n   * @param options Options (actions, guards, activities, services) to recursively merge with the existing options.\r\n   * @param context Custom context (will override predefined context)\r\n   */\n\n\n  StateNode.prototype.withConfig = function (options, context) {\n    if (context === void 0) {\n      context = this.context;\n    }\n\n    var _a = this.options,\n        actions = _a.actions,\n        activities = _a.activities,\n        guards = _a.guards,\n        services = _a.services,\n        delays = _a.delays;\n    return new StateNode(this.config, {\n      actions: __assign(__assign({}, actions), options.actions),\n      activities: __assign(__assign({}, activities), options.activities),\n      guards: __assign(__assign({}, guards), options.guards),\n      services: __assign(__assign({}, services), options.services),\n      delays: __assign(__assign({}, delays), options.delays)\n    }, context);\n  };\n  /**\r\n   * Clones this state machine with custom context.\r\n   *\r\n   * @param context Custom context (will override predefined context, not recursive)\r\n   */\n\n\n  StateNode.prototype.withContext = function (context) {\n    return new StateNode(this.config, this.options, context);\n  };\n\n  Object.defineProperty(StateNode.prototype, \"definition\", {\n    /**\r\n     * The well-structured state node definition.\r\n     */\n    get: function () {\n      return {\n        id: this.id,\n        key: this.key,\n        version: this.version,\n        context: this.context,\n        type: this.type,\n        initial: this.initial,\n        history: this.history,\n        states: mapValues(this.states, function (state) {\n          return state.definition;\n        }),\n        on: this.on,\n        transitions: this.transitions,\n        entry: this.onEntry,\n        exit: this.onExit,\n        activities: this.activities || [],\n        meta: this.meta,\n        order: this.order || -1,\n        data: this.data,\n        invoke: this.invoke\n      };\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  StateNode.prototype.toJSON = function () {\n    return this.definition;\n  };\n\n  Object.defineProperty(StateNode.prototype, \"on\", {\n    /**\r\n     * The mapping of events to transitions.\r\n     */\n    get: function () {\n      if (this.__cache.on) {\n        return this.__cache.on;\n      }\n\n      var transitions = this.transitions;\n      return this.__cache.on = transitions.reduce(function (map, transition) {\n        map[transition.eventType] = map[transition.eventType] || [];\n        map[transition.eventType].push(transition);\n        return map;\n      }, {});\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(StateNode.prototype, \"after\", {\n    get: function () {\n      return this.__cache.delayedTransitions || (this.__cache.delayedTransitions = this.getDelayedTransitions(), this.__cache.delayedTransitions);\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(StateNode.prototype, \"transitions\", {\n    /**\r\n     * All the transitions that can be taken from this state node.\r\n     */\n    get: function () {\n      return this.__cache.transitions || (this.__cache.transitions = this.formatTransitions(), this.__cache.transitions);\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  StateNode.prototype.getCandidates = function (eventName) {\n    if (this.__cache.candidates[eventName]) {\n      return this.__cache.candidates[eventName];\n    }\n\n    var transient = eventName === NULL_EVENT;\n    var candidates = this.transitions.filter(function (transition) {\n      var sameEventType = transition.eventType === eventName; // null events should only match against eventless transitions\n\n      return transient ? sameEventType : sameEventType || transition.eventType === WILDCARD;\n    });\n    this.__cache.candidates[eventName] = candidates;\n    return candidates;\n  };\n  /**\r\n   * All delayed transitions from the config.\r\n   */\n\n\n  StateNode.prototype.getDelayedTransitions = function () {\n    var _this = this;\n\n    var afterConfig = this.config.after;\n\n    if (!afterConfig) {\n      return [];\n    }\n\n    var mutateEntryExit = function (delay, i) {\n      var delayRef = isFunction(delay) ? _this.id + \":delay[\" + i + \"]\" : delay;\n      var eventType = after(delayRef, _this.id);\n\n      _this.onEntry.push(send$1(eventType, {\n        delay: delay\n      }));\n\n      _this.onExit.push(cancel(eventType));\n\n      return eventType;\n    };\n\n    var delayedTransitions = isArray(afterConfig) ? afterConfig.map(function (transition, i) {\n      var eventType = mutateEntryExit(transition.delay, i);\n      return __assign(__assign({}, transition), {\n        event: eventType\n      });\n    }) : flatten(keys(afterConfig).map(function (delay, i) {\n      var configTransition = afterConfig[delay];\n      var resolvedTransition = isString(configTransition) ? {\n        target: configTransition\n      } : configTransition;\n      var resolvedDelay = !isNaN(+delay) ? +delay : delay;\n      var eventType = mutateEntryExit(resolvedDelay, i);\n      return toArray(resolvedTransition).map(function (transition) {\n        return __assign(__assign({}, transition), {\n          event: eventType,\n          delay: resolvedDelay\n        });\n      });\n    }));\n    return delayedTransitions.map(function (delayedTransition) {\n      var delay = delayedTransition.delay;\n      return __assign(__assign({}, _this.formatTransition(delayedTransition)), {\n        delay: delay\n      });\n    });\n  };\n  /**\r\n   * Returns the state nodes represented by the current state value.\r\n   *\r\n   * @param state The state value or State instance\r\n   */\n\n\n  StateNode.prototype.getStateNodes = function (state) {\n    var _a;\n\n    var _this = this;\n\n    if (!state) {\n      return [];\n    }\n\n    var stateValue = state instanceof State ? state.value : toStateValue(state, this.delimiter);\n\n    if (isString(stateValue)) {\n      var initialStateValue = this.getStateNode(stateValue).initial;\n      return initialStateValue !== undefined ? this.getStateNodes((_a = {}, _a[stateValue] = initialStateValue, _a)) : [this.states[stateValue]];\n    }\n\n    var subStateKeys = keys(stateValue);\n    var subStateNodes = subStateKeys.map(function (subStateKey) {\n      return _this.getStateNode(subStateKey);\n    });\n    return subStateNodes.concat(subStateKeys.reduce(function (allSubStateNodes, subStateKey) {\n      var subStateNode = _this.getStateNode(subStateKey).getStateNodes(stateValue[subStateKey]);\n\n      return allSubStateNodes.concat(subStateNode);\n    }, []));\n  };\n  /**\r\n   * Returns `true` if this state node explicitly handles the given event.\r\n   *\r\n   * @param event The event in question\r\n   */\n\n\n  StateNode.prototype.handles = function (event) {\n    var eventType = getEventType(event);\n    return this.events.includes(eventType);\n  };\n  /**\r\n   * Resolves the given `state` to a new `State` instance relative to this machine.\r\n   *\r\n   * This ensures that `.events` and `.nextEvents` represent the correct values.\r\n   *\r\n   * @param state The state to resolve\r\n   */\n\n\n  StateNode.prototype.resolveState = function (state) {\n    var configuration = Array.from(getConfiguration([], this.getStateNodes(state.value)));\n    return new State(__assign(__assign({}, state), {\n      value: this.resolve(state.value),\n      configuration: configuration\n    }));\n  };\n\n  StateNode.prototype.transitionLeafNode = function (stateValue, state, _event) {\n    var stateNode = this.getStateNode(stateValue);\n    var next = stateNode.next(state, _event);\n\n    if (!next || !next.transitions.length) {\n      return this.next(state, _event);\n    }\n\n    return next;\n  };\n\n  StateNode.prototype.transitionCompoundNode = function (stateValue, state, _event) {\n    var subStateKeys = keys(stateValue);\n    var stateNode = this.getStateNode(subStateKeys[0]);\n\n    var next = stateNode._transition(stateValue[subStateKeys[0]], state, _event);\n\n    if (!next || !next.transitions.length) {\n      return this.next(state, _event);\n    }\n\n    return next;\n  };\n\n  StateNode.prototype.transitionParallelNode = function (stateValue, state, _event) {\n    var e_2, _a;\n\n    var transitionMap = {};\n\n    try {\n      for (var _b = __values(keys(stateValue)), _c = _b.next(); !_c.done; _c = _b.next()) {\n        var subStateKey = _c.value;\n        var subStateValue = stateValue[subStateKey];\n\n        if (!subStateValue) {\n          continue;\n        }\n\n        var subStateNode = this.getStateNode(subStateKey);\n\n        var next = subStateNode._transition(subStateValue, state, _event);\n\n        if (next) {\n          transitionMap[subStateKey] = next;\n        }\n      }\n    } catch (e_2_1) {\n      e_2 = {\n        error: e_2_1\n      };\n    } finally {\n      try {\n        if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n      } finally {\n        if (e_2) throw e_2.error;\n      }\n    }\n\n    var stateTransitions = keys(transitionMap).map(function (key) {\n      return transitionMap[key];\n    });\n    var enabledTransitions = flatten(stateTransitions.map(function (st) {\n      return st.transitions;\n    }));\n    var willTransition = stateTransitions.some(function (st) {\n      return st.transitions.length > 0;\n    });\n\n    if (!willTransition) {\n      return this.next(state, _event);\n    }\n\n    var entryNodes = flatten(stateTransitions.map(function (t) {\n      return t.entrySet;\n    }));\n    var configuration = flatten(keys(transitionMap).map(function (key) {\n      return transitionMap[key].configuration;\n    }));\n    return {\n      transitions: enabledTransitions,\n      entrySet: entryNodes,\n      exitSet: flatten(stateTransitions.map(function (t) {\n        return t.exitSet;\n      })),\n      configuration: configuration,\n      source: state,\n      actions: flatten(keys(transitionMap).map(function (key) {\n        return transitionMap[key].actions;\n      }))\n    };\n  };\n\n  StateNode.prototype._transition = function (stateValue, state, _event) {\n    // leaf node\n    if (isString(stateValue)) {\n      return this.transitionLeafNode(stateValue, state, _event);\n    } // hierarchical node\n\n\n    if (keys(stateValue).length === 1) {\n      return this.transitionCompoundNode(stateValue, state, _event);\n    } // orthogonal node\n\n\n    return this.transitionParallelNode(stateValue, state, _event);\n  };\n\n  StateNode.prototype.next = function (state, _event) {\n    var e_3, _a;\n\n    var _this = this;\n\n    var eventName = _event.name;\n    var actions = [];\n    var nextStateNodes = [];\n    var selectedTransition;\n\n    try {\n      for (var _b = __values(this.getCandidates(eventName)), _c = _b.next(); !_c.done; _c = _b.next()) {\n        var candidate = _c.value;\n        var cond = candidate.cond,\n            stateIn = candidate.in;\n        var resolvedContext = state.context;\n        var isInState = stateIn ? isString(stateIn) && isStateId(stateIn) ? // Check if in state by ID\n        state.matches(toStateValue(this.getStateNodeById(stateIn).path, this.delimiter)) : // Check if in state by relative grandparent\n        matchesState(toStateValue(stateIn, this.delimiter), path(this.path.slice(0, -2))(state.value)) : true;\n        var guardPassed = false;\n\n        try {\n          guardPassed = !cond || this.evaluateGuard(cond, resolvedContext, _event, state);\n        } catch (err) {\n          throw new Error(\"Unable to evaluate guard '\" + (cond.name || cond.type) + \"' in transition for event '\" + eventName + \"' in state node '\" + this.id + \"':\\n\" + err.message);\n        }\n\n        if (guardPassed && isInState) {\n          if (candidate.target !== undefined) {\n            nextStateNodes = candidate.target;\n          }\n\n          actions.push.apply(actions, __spread(candidate.actions));\n          selectedTransition = candidate;\n          break;\n        }\n      }\n    } catch (e_3_1) {\n      e_3 = {\n        error: e_3_1\n      };\n    } finally {\n      try {\n        if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n      } finally {\n        if (e_3) throw e_3.error;\n      }\n    }\n\n    if (!selectedTransition) {\n      return undefined;\n    }\n\n    if (!nextStateNodes.length) {\n      return {\n        transitions: [selectedTransition],\n        entrySet: [],\n        exitSet: [],\n        configuration: state.value ? [this] : [],\n        source: state,\n        actions: actions\n      };\n    }\n\n    var allNextStateNodes = flatten(nextStateNodes.map(function (stateNode) {\n      return _this.getRelativeStateNodes(stateNode, state.historyValue);\n    }));\n    var isInternal = !!selectedTransition.internal;\n    var reentryNodes = isInternal ? [] : flatten(allNextStateNodes.map(function (n) {\n      return _this.nodesFromChild(n);\n    }));\n    return {\n      transitions: [selectedTransition],\n      entrySet: reentryNodes,\n      exitSet: isInternal ? [] : [this],\n      configuration: allNextStateNodes,\n      source: state,\n      actions: actions\n    };\n  };\n\n  StateNode.prototype.nodesFromChild = function (childStateNode) {\n    if (childStateNode.escapes(this)) {\n      return [];\n    }\n\n    var nodes = [];\n    var marker = childStateNode;\n\n    while (marker && marker !== this) {\n      nodes.push(marker);\n      marker = marker.parent;\n    }\n\n    nodes.push(this); // inclusive\n\n    return nodes;\n  };\n  /**\r\n   * Whether the given state node \"escapes\" this state node. If the `stateNode` is equal to or the parent of\r\n   * this state node, it does not escape.\r\n   */\n\n\n  StateNode.prototype.escapes = function (stateNode) {\n    if (this === stateNode) {\n      return false;\n    }\n\n    var parent = this.parent;\n\n    while (parent) {\n      if (parent === stateNode) {\n        return false;\n      }\n\n      parent = parent.parent;\n    }\n\n    return true;\n  };\n\n  StateNode.prototype.evaluateGuard = function (guard, context, _event, state) {\n    var guards = this.machine.options.guards;\n    var guardMeta = {\n      state: state,\n      cond: guard,\n      _event: _event\n    }; // TODO: do not hardcode!\n\n    if (guard.type === DEFAULT_GUARD_TYPE) {\n      return guard.predicate(context, _event.data, guardMeta);\n    }\n\n    var condFn = guards[guard.type];\n\n    if (!condFn) {\n      throw new Error(\"Guard '\" + guard.type + \"' is not implemented on machine '\" + this.machine.id + \"'.\");\n    }\n\n    return condFn(context, _event.data, guardMeta);\n  };\n\n  StateNode.prototype.getActions = function (transition, currentContext, _event, prevState) {\n    var e_4, _a, e_5, _b;\n\n    var prevConfig = getConfiguration([], prevState ? this.getStateNodes(prevState.value) : [this]);\n    var resolvedConfig = transition.configuration.length ? getConfiguration(prevConfig, transition.configuration) : prevConfig;\n\n    try {\n      for (var resolvedConfig_1 = __values(resolvedConfig), resolvedConfig_1_1 = resolvedConfig_1.next(); !resolvedConfig_1_1.done; resolvedConfig_1_1 = resolvedConfig_1.next()) {\n        var sn = resolvedConfig_1_1.value;\n\n        if (!has(prevConfig, sn)) {\n          transition.entrySet.push(sn);\n        }\n      }\n    } catch (e_4_1) {\n      e_4 = {\n        error: e_4_1\n      };\n    } finally {\n      try {\n        if (resolvedConfig_1_1 && !resolvedConfig_1_1.done && (_a = resolvedConfig_1.return)) _a.call(resolvedConfig_1);\n      } finally {\n        if (e_4) throw e_4.error;\n      }\n    }\n\n    try {\n      for (var prevConfig_1 = __values(prevConfig), prevConfig_1_1 = prevConfig_1.next(); !prevConfig_1_1.done; prevConfig_1_1 = prevConfig_1.next()) {\n        var sn = prevConfig_1_1.value;\n\n        if (!has(resolvedConfig, sn) || has(transition.exitSet, sn.parent)) {\n          transition.exitSet.push(sn);\n        }\n      }\n    } catch (e_5_1) {\n      e_5 = {\n        error: e_5_1\n      };\n    } finally {\n      try {\n        if (prevConfig_1_1 && !prevConfig_1_1.done && (_b = prevConfig_1.return)) _b.call(prevConfig_1);\n      } finally {\n        if (e_5) throw e_5.error;\n      }\n    }\n\n    if (!transition.source) {\n      transition.exitSet = []; // Ensure that root StateNode (machine) is entered\n\n      transition.entrySet.push(this);\n    }\n\n    var doneEvents = flatten(transition.entrySet.map(function (sn) {\n      var events = [];\n\n      if (sn.type !== 'final') {\n        return events;\n      }\n\n      var parent = sn.parent;\n      events.push(done(sn.id, sn.data), // TODO: deprecate - final states should not emit done events for their own state.\n      done(parent.id, sn.data ? mapContext(sn.data, currentContext, _event) : undefined));\n\n      if (parent.parent) {\n        var grandparent = parent.parent;\n\n        if (grandparent.type === 'parallel') {\n          if (getChildren(grandparent).every(function (parentNode) {\n            return isInFinalState(transition.configuration, parentNode);\n          })) {\n            events.push(done(grandparent.id, grandparent.data));\n          }\n        }\n      }\n\n      return events;\n    }));\n    transition.exitSet.sort(function (a, b) {\n      return b.order - a.order;\n    });\n    transition.entrySet.sort(function (a, b) {\n      return a.order - b.order;\n    });\n    var entryStates = new Set(transition.entrySet);\n    var exitStates = new Set(transition.exitSet);\n\n    var _c = __read([flatten(Array.from(entryStates).map(function (stateNode) {\n      return __spread(stateNode.activities.map(function (activity) {\n        return start(activity);\n      }), stateNode.onEntry);\n    })).concat(doneEvents.map(raise)), flatten(Array.from(exitStates).map(function (stateNode) {\n      return __spread(stateNode.onExit, stateNode.activities.map(function (activity) {\n        return stop(activity);\n      }));\n    }))], 2),\n        entryActions = _c[0],\n        exitActions = _c[1];\n\n    var actions = toActionObjects(exitActions.concat(transition.actions).concat(entryActions), this.machine.options.actions);\n    return actions;\n  };\n  /**\r\n   * Determines the next state given the current `state` and sent `event`.\r\n   *\r\n   * @param state The current State instance or state value\r\n   * @param event The event that was sent at the current state\r\n   * @param context The current context (extended state) of the current state\r\n   */\n\n\n  StateNode.prototype.transition = function (state, event, context) {\n    if (state === void 0) {\n      state = this.initialState;\n    }\n\n    var _event = toSCXMLEvent(event);\n\n    var currentState;\n\n    if (state instanceof State) {\n      currentState = context === undefined ? state : this.resolveState(State.from(state, context));\n    } else {\n      var resolvedStateValue = isString(state) ? this.resolve(pathToStateValue(this.getResolvedPath(state))) : this.resolve(state);\n      var resolvedContext = context ? context : this.machine.context;\n      currentState = this.resolveState(State.from(resolvedStateValue, resolvedContext));\n    }\n\n    if (!IS_PRODUCTION && _event.name === WILDCARD) {\n      throw new Error(\"An event cannot have the wildcard type ('\" + WILDCARD + \"')\");\n    }\n\n    if (this.strict) {\n      if (!this.events.includes(_event.name) && !isBuiltInEvent(_event.name)) {\n        throw new Error(\"Machine '\" + this.id + \"' does not accept event '\" + _event.name + \"'\");\n      }\n    }\n\n    var stateTransition = this._transition(currentState.value, currentState, _event) || {\n      transitions: [],\n      configuration: [],\n      entrySet: [],\n      exitSet: [],\n      source: currentState,\n      actions: []\n    };\n    var prevConfig = getConfiguration([], this.getStateNodes(currentState.value));\n    var resolvedConfig = stateTransition.configuration.length ? getConfiguration(prevConfig, stateTransition.configuration) : prevConfig;\n    stateTransition.configuration = __spread(resolvedConfig);\n    return this.resolveTransition(stateTransition, currentState, _event);\n  };\n\n  StateNode.prototype.resolveRaisedTransition = function (state, _event, originalEvent) {\n    var _a;\n\n    var currentActions = state.actions;\n    state = this.transition(state, _event); // Save original event to state\n\n    state._event = originalEvent;\n    state.event = originalEvent.data;\n\n    (_a = state.actions).unshift.apply(_a, __spread(currentActions));\n\n    return state;\n  };\n\n  StateNode.prototype.resolveTransition = function (stateTransition, currentState, _event, context) {\n    var e_6, _a;\n\n    var _this = this;\n\n    if (_event === void 0) {\n      _event = initEvent;\n    }\n\n    if (context === void 0) {\n      context = this.machine.context;\n    }\n\n    var configuration = stateTransition.configuration; // Transition will \"apply\" if:\n    // - this is the initial state (there is no current state)\n    // - OR there are transitions\n\n    var willTransition = !currentState || stateTransition.transitions.length > 0;\n    var resolvedStateValue = willTransition ? getValue(this.machine, configuration) : undefined;\n    var historyValue = currentState ? currentState.historyValue ? currentState.historyValue : stateTransition.source ? this.machine.historyValue(currentState.value) : undefined : undefined;\n    var currentContext = currentState ? currentState.context : context;\n    var actions = this.getActions(stateTransition, currentContext, _event, currentState);\n    var activities = currentState ? __assign({}, currentState.activities) : {};\n\n    try {\n      for (var actions_1 = __values(actions), actions_1_1 = actions_1.next(); !actions_1_1.done; actions_1_1 = actions_1.next()) {\n        var action = actions_1_1.value;\n\n        if (action.type === start$1) {\n          activities[action.activity.type] = action;\n        } else if (action.type === stop$1) {\n          activities[action.activity.type] = false;\n        }\n      }\n    } catch (e_6_1) {\n      e_6 = {\n        error: e_6_1\n      };\n    } finally {\n      try {\n        if (actions_1_1 && !actions_1_1.done && (_a = actions_1.return)) _a.call(actions_1);\n      } finally {\n        if (e_6) throw e_6.error;\n      }\n    }\n\n    var _b = __read(partition(actions, function (action) {\n      return action.type === assign;\n    }), 2),\n        assignActions = _b[0],\n        otherActions = _b[1];\n\n    var updatedContext = assignActions.length ? updateContext(currentContext, _event, assignActions, currentState) : currentContext;\n    var resolvedActions = flatten(otherActions.map(function (actionObject) {\n      switch (actionObject.type) {\n        case raise$1:\n          return resolveRaise(actionObject);\n\n        case send:\n          var sendAction = resolveSend(actionObject, updatedContext, _event, _this.machine.options.delays); // TODO: fix ActionTypes.Init\n\n          if (!IS_PRODUCTION) {\n            // warn after resolving as we can create better contextual message here\n            warn(!isString(actionObject.delay) || typeof sendAction.delay === 'number', // tslint:disable-next-line:max-line-length\n            \"No delay reference for delay expression '\" + actionObject.delay + \"' was found on machine '\" + _this.machine.id + \"'\");\n          }\n\n          return sendAction;\n\n        case log:\n          return resolveLog(actionObject, updatedContext, _event);\n\n        case pure:\n          return actionObject.get(updatedContext, _event.data) || [];\n\n        default:\n          return toActionObject(actionObject, _this.options.actions);\n      }\n    }));\n\n    var _c = __read(partition(resolvedActions, function (action) {\n      return action.type === raise$1 || action.type === send && action.to === SpecialTargets.Internal;\n    }), 2),\n        raisedEvents = _c[0],\n        nonRaisedActions = _c[1];\n\n    var invokeActions = resolvedActions.filter(function (action) {\n      return action.type === start$1 && action.activity.type === invoke;\n    });\n    var children = invokeActions.reduce(function (acc, action) {\n      acc[action.activity.id] = createInvocableActor(action.activity);\n      return acc;\n    }, currentState ? __assign({}, currentState.children) : {});\n    var resolvedConfiguration = resolvedStateValue ? stateTransition.configuration : currentState ? currentState.configuration : [];\n    var meta = resolvedConfiguration.reduce(function (acc, stateNode) {\n      if (stateNode.meta !== undefined) {\n        acc[stateNode.id] = stateNode.meta;\n      }\n\n      return acc;\n    }, {});\n    var isDone = isInFinalState(resolvedConfiguration, this);\n    var nextState = new State({\n      value: resolvedStateValue || currentState.value,\n      context: updatedContext,\n      _event: _event,\n      // Persist _sessionid between states\n      _sessionid: currentState ? currentState._sessionid : null,\n      historyValue: resolvedStateValue ? historyValue ? updateHistoryValue(historyValue, resolvedStateValue) : undefined : currentState ? currentState.historyValue : undefined,\n      history: !resolvedStateValue || stateTransition.source ? currentState : undefined,\n      actions: resolvedStateValue ? nonRaisedActions : [],\n      activities: resolvedStateValue ? activities : currentState ? currentState.activities : {},\n      meta: resolvedStateValue ? meta : currentState ? currentState.meta : undefined,\n      events: [],\n      configuration: resolvedConfiguration,\n      transitions: stateTransition.transitions,\n      children: children,\n      done: isDone\n    });\n    nextState.changed = _event.name === update || !!assignActions.length; // Dispose of penultimate histories to prevent memory leaks\n\n    var history = nextState.history;\n\n    if (history) {\n      delete history.history;\n    }\n\n    if (!resolvedStateValue) {\n      return nextState;\n    }\n\n    var maybeNextState = nextState;\n\n    if (!isDone) {\n      var isTransient = this._transient || configuration.some(function (stateNode) {\n        return stateNode._transient;\n      });\n\n      if (isTransient) {\n        maybeNextState = this.resolveRaisedTransition(maybeNextState, {\n          type: nullEvent\n        }, _event);\n      }\n\n      while (raisedEvents.length) {\n        var raisedEvent = raisedEvents.shift();\n        maybeNextState = this.resolveRaisedTransition(maybeNextState, raisedEvent._event, _event);\n      }\n    } // Detect if state changed\n\n\n    var changed = maybeNextState.changed || (history ? !!maybeNextState.actions.length || !!assignActions.length || typeof history.value !== typeof maybeNextState.value || !stateValuesEqual(maybeNextState.value, history.value) : undefined);\n    maybeNextState.changed = changed; // Preserve original history after raised events\n\n    maybeNextState.historyValue = nextState.historyValue;\n    maybeNextState.history = history;\n    return maybeNextState;\n  };\n  /**\r\n   * Returns the child state node from its relative `stateKey`, or throws.\r\n   */\n\n\n  StateNode.prototype.getStateNode = function (stateKey) {\n    if (isStateId(stateKey)) {\n      return this.machine.getStateNodeById(stateKey);\n    }\n\n    if (!this.states) {\n      throw new Error(\"Unable to retrieve child state '\" + stateKey + \"' from '\" + this.id + \"'; no child states exist.\");\n    }\n\n    var result = this.states[stateKey];\n\n    if (!result) {\n      throw new Error(\"Child state '\" + stateKey + \"' does not exist on '\" + this.id + \"'\");\n    }\n\n    return result;\n  };\n  /**\r\n   * Returns the state node with the given `stateId`, or throws.\r\n   *\r\n   * @param stateId The state ID. The prefix \"#\" is removed.\r\n   */\n\n\n  StateNode.prototype.getStateNodeById = function (stateId) {\n    var resolvedStateId = isStateId(stateId) ? stateId.slice(STATE_IDENTIFIER.length) : stateId;\n\n    if (resolvedStateId === this.id) {\n      return this;\n    }\n\n    var stateNode = this.machine.idMap[resolvedStateId];\n\n    if (!stateNode) {\n      throw new Error(\"Child state node '#\" + resolvedStateId + \"' does not exist on machine '\" + this.id + \"'\");\n    }\n\n    return stateNode;\n  };\n  /**\r\n   * Returns the relative state node from the given `statePath`, or throws.\r\n   *\r\n   * @param statePath The string or string array relative path to the state node.\r\n   */\n\n\n  StateNode.prototype.getStateNodeByPath = function (statePath) {\n    if (typeof statePath === 'string' && isStateId(statePath)) {\n      try {\n        return this.getStateNodeById(statePath.slice(1));\n      } catch (e) {// try individual paths\n        // throw e;\n      }\n    }\n\n    var arrayStatePath = toStatePath(statePath, this.delimiter).slice();\n    var currentStateNode = this;\n\n    while (arrayStatePath.length) {\n      var key = arrayStatePath.shift();\n\n      if (!key.length) {\n        break;\n      }\n\n      currentStateNode = currentStateNode.getStateNode(key);\n    }\n\n    return currentStateNode;\n  };\n  /**\r\n   * Resolves a partial state value with its full representation in this machine.\r\n   *\r\n   * @param stateValue The partial state value to resolve.\r\n   */\n\n\n  StateNode.prototype.resolve = function (stateValue) {\n    var _a;\n\n    var _this = this;\n\n    if (!stateValue) {\n      return this.initialStateValue || EMPTY_OBJECT; // TODO: type-specific properties\n    }\n\n    switch (this.type) {\n      case 'parallel':\n        return mapValues(this.initialStateValue, function (subStateValue, subStateKey) {\n          return subStateValue ? _this.getStateNode(subStateKey).resolve(stateValue[subStateKey] || subStateValue) : EMPTY_OBJECT;\n        });\n\n      case 'compound':\n        if (isString(stateValue)) {\n          var subStateNode = this.getStateNode(stateValue);\n\n          if (subStateNode.type === 'parallel' || subStateNode.type === 'compound') {\n            return _a = {}, _a[stateValue] = subStateNode.initialStateValue, _a;\n          }\n\n          return stateValue;\n        }\n\n        if (!keys(stateValue).length) {\n          return this.initialStateValue || {};\n        }\n\n        return mapValues(stateValue, function (subStateValue, subStateKey) {\n          return subStateValue ? _this.getStateNode(subStateKey).resolve(subStateValue) : EMPTY_OBJECT;\n        });\n\n      default:\n        return stateValue || EMPTY_OBJECT;\n    }\n  };\n\n  StateNode.prototype.getResolvedPath = function (stateIdentifier) {\n    if (isStateId(stateIdentifier)) {\n      var stateNode = this.machine.idMap[stateIdentifier.slice(STATE_IDENTIFIER.length)];\n\n      if (!stateNode) {\n        throw new Error(\"Unable to find state node '\" + stateIdentifier + \"'\");\n      }\n\n      return stateNode.path;\n    }\n\n    return toStatePath(stateIdentifier, this.delimiter);\n  };\n\n  Object.defineProperty(StateNode.prototype, \"initialStateValue\", {\n    get: function () {\n      var _a;\n\n      if (this.__cache.initialStateValue) {\n        return this.__cache.initialStateValue;\n      }\n\n      var initialStateValue;\n\n      if (this.type === 'parallel') {\n        initialStateValue = mapFilterValues(this.states, function (state) {\n          return state.initialStateValue || EMPTY_OBJECT;\n        }, function (stateNode) {\n          return !(stateNode.type === 'history');\n        });\n      } else if (this.initial !== undefined) {\n        if (!this.states[this.initial]) {\n          throw new Error(\"Initial state '\" + this.initial + \"' not found on '\" + this.key + \"'\");\n        }\n\n        initialStateValue = isLeafNode(this.states[this.initial]) ? this.initial : (_a = {}, _a[this.initial] = this.states[this.initial].initialStateValue, _a);\n      }\n\n      this.__cache.initialStateValue = initialStateValue;\n      return this.__cache.initialStateValue;\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  StateNode.prototype.getInitialState = function (stateValue, context) {\n    var configuration = this.getStateNodes(stateValue);\n    return this.resolveTransition({\n      configuration: configuration,\n      entrySet: configuration,\n      exitSet: [],\n      transitions: [],\n      source: undefined,\n      actions: []\n    }, undefined, undefined, context);\n  };\n\n  Object.defineProperty(StateNode.prototype, \"initialState\", {\n    /**\r\n     * The initial State instance, which includes all actions to be executed from\r\n     * entering the initial state.\r\n     */\n    get: function () {\n      this._init();\n\n      var initialStateValue = this.initialStateValue;\n\n      if (!initialStateValue) {\n        throw new Error(\"Cannot retrieve initial state from simple state '\" + this.id + \"'.\");\n      }\n\n      return this.getInitialState(initialStateValue);\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(StateNode.prototype, \"target\", {\n    /**\r\n     * The target state value of the history state node, if it exists. This represents the\r\n     * default state value to transition to if no history value exists yet.\r\n     */\n    get: function () {\n      var target;\n\n      if (this.type === 'history') {\n        var historyConfig = this.config;\n\n        if (isString(historyConfig.target)) {\n          target = isStateId(historyConfig.target) ? pathToStateValue(this.machine.getStateNodeById(historyConfig.target).path.slice(this.path.length - 1)) : historyConfig.target;\n        } else {\n          target = historyConfig.target;\n        }\n      }\n\n      return target;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  /**\r\n   * Returns the leaf nodes from a state path relative to this state node.\r\n   *\r\n   * @param relativeStateId The relative state path to retrieve the state nodes\r\n   * @param history The previous state to retrieve history\r\n   * @param resolve Whether state nodes should resolve to initial child state nodes\r\n   */\n\n  StateNode.prototype.getRelativeStateNodes = function (relativeStateId, historyValue, resolve) {\n    if (resolve === void 0) {\n      resolve = true;\n    }\n\n    return resolve ? relativeStateId.type === 'history' ? relativeStateId.resolveHistory(historyValue) : relativeStateId.initialStateNodes : [relativeStateId];\n  };\n\n  Object.defineProperty(StateNode.prototype, \"initialStateNodes\", {\n    get: function () {\n      var _this = this;\n\n      if (isLeafNode(this)) {\n        return [this];\n      } // Case when state node is compound but no initial state is defined\n\n\n      if (this.type === 'compound' && !this.initial) {\n        if (!IS_PRODUCTION) {\n          warn(false, \"Compound state node '\" + this.id + \"' has no initial state.\");\n        }\n\n        return [this];\n      }\n\n      var initialStateNodePaths = toStatePaths(this.initialStateValue);\n      return flatten(initialStateNodePaths.map(function (initialPath) {\n        return _this.getFromRelativePath(initialPath);\n      }));\n    },\n    enumerable: true,\n    configurable: true\n  });\n  /**\r\n   * Retrieves state nodes from a relative path to this state node.\r\n   *\r\n   * @param relativePath The relative path from this state node\r\n   * @param historyValue\r\n   */\n\n  StateNode.prototype.getFromRelativePath = function (relativePath) {\n    if (!relativePath.length) {\n      return [this];\n    }\n\n    var _a = __read(relativePath),\n        stateKey = _a[0],\n        childStatePath = _a.slice(1);\n\n    if (!this.states) {\n      throw new Error(\"Cannot retrieve subPath '\" + stateKey + \"' from node with no states\");\n    }\n\n    var childStateNode = this.getStateNode(stateKey);\n\n    if (childStateNode.type === 'history') {\n      return childStateNode.resolveHistory();\n    }\n\n    if (!this.states[stateKey]) {\n      throw new Error(\"Child state '\" + stateKey + \"' does not exist on '\" + this.id + \"'\");\n    }\n\n    return this.states[stateKey].getFromRelativePath(childStatePath);\n  };\n\n  StateNode.prototype.historyValue = function (relativeStateValue) {\n    if (!keys(this.states).length) {\n      return undefined;\n    }\n\n    return {\n      current: relativeStateValue || this.initialStateValue,\n      states: mapFilterValues(this.states, function (stateNode, key) {\n        if (!relativeStateValue) {\n          return stateNode.historyValue();\n        }\n\n        var subStateValue = isString(relativeStateValue) ? undefined : relativeStateValue[key];\n        return stateNode.historyValue(subStateValue || stateNode.initialStateValue);\n      }, function (stateNode) {\n        return !stateNode.history;\n      })\n    };\n  };\n  /**\r\n   * Resolves to the historical value(s) of the parent state node,\r\n   * represented by state nodes.\r\n   *\r\n   * @param historyValue\r\n   */\n\n\n  StateNode.prototype.resolveHistory = function (historyValue) {\n    var _this = this;\n\n    if (this.type !== 'history') {\n      return [this];\n    }\n\n    var parent = this.parent;\n\n    if (!historyValue) {\n      var historyTarget = this.target;\n      return historyTarget ? flatten(toStatePaths(historyTarget).map(function (relativeChildPath) {\n        return parent.getFromRelativePath(relativeChildPath);\n      })) : parent.initialStateNodes;\n    }\n\n    var subHistoryValue = nestedPath(parent.path, 'states')(historyValue).current;\n\n    if (isString(subHistoryValue)) {\n      return [parent.getStateNode(subHistoryValue)];\n    }\n\n    return flatten(toStatePaths(subHistoryValue).map(function (subStatePath) {\n      return _this.history === 'deep' ? parent.getFromRelativePath(subStatePath) : [parent.states[subStatePath[0]]];\n    }));\n  };\n\n  Object.defineProperty(StateNode.prototype, \"stateIds\", {\n    /**\r\n     * All the state node IDs of this state node and its descendant state nodes.\r\n     */\n    get: function () {\n      var _this = this;\n\n      var childStateIds = flatten(keys(this.states).map(function (stateKey) {\n        return _this.states[stateKey].stateIds;\n      }));\n      return [this.id].concat(childStateIds);\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(StateNode.prototype, \"events\", {\n    /**\r\n     * All the event types accepted by this state node and its descendants.\r\n     */\n    get: function () {\n      var e_7, _a, e_8, _b;\n\n      if (this.__cache.events) {\n        return this.__cache.events;\n      }\n\n      var states = this.states;\n      var events = new Set(this.ownEvents);\n\n      if (states) {\n        try {\n          for (var _c = __values(keys(states)), _d = _c.next(); !_d.done; _d = _c.next()) {\n            var stateId = _d.value;\n            var state = states[stateId];\n\n            if (state.states) {\n              try {\n                for (var _e = (e_8 = void 0, __values(state.events)), _f = _e.next(); !_f.done; _f = _e.next()) {\n                  var event_1 = _f.value;\n                  events.add(\"\" + event_1);\n                }\n              } catch (e_8_1) {\n                e_8 = {\n                  error: e_8_1\n                };\n              } finally {\n                try {\n                  if (_f && !_f.done && (_b = _e.return)) _b.call(_e);\n                } finally {\n                  if (e_8) throw e_8.error;\n                }\n              }\n            }\n          }\n        } catch (e_7_1) {\n          e_7 = {\n            error: e_7_1\n          };\n        } finally {\n          try {\n            if (_d && !_d.done && (_a = _c.return)) _a.call(_c);\n          } finally {\n            if (e_7) throw e_7.error;\n          }\n        }\n      }\n\n      return this.__cache.events = Array.from(events);\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(StateNode.prototype, \"ownEvents\", {\n    /**\r\n     * All the events that have transitions directly from this state node.\r\n     *\r\n     * Excludes any inert events.\r\n     */\n    get: function () {\n      var events = new Set(this.transitions.filter(function (transition) {\n        return !(!transition.target && !transition.actions.length && transition.internal);\n      }).map(function (transition) {\n        return transition.eventType;\n      }));\n      return Array.from(events);\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  StateNode.prototype.resolveTarget = function (_target) {\n    var _this = this;\n\n    if (_target === undefined) {\n      // an undefined target signals that the state node should not transition from that state when receiving that event\n      return undefined;\n    }\n\n    return _target.map(function (target) {\n      if (!isString(target)) {\n        return target;\n      }\n\n      var isInternalTarget = target[0] === _this.delimiter; // If internal target is defined on machine,\n      // do not include machine key on target\n\n      if (isInternalTarget && !_this.parent) {\n        return _this.getStateNodeByPath(target.slice(1));\n      }\n\n      var resolvedTarget = isInternalTarget ? _this.key + target : target;\n\n      if (_this.parent) {\n        try {\n          var targetStateNode = _this.parent.getStateNodeByPath(resolvedTarget);\n\n          return targetStateNode;\n        } catch (err) {\n          throw new Error(\"Invalid transition definition for state node '\" + _this.id + \"':\\n\" + err.message);\n        }\n      } else {\n        return _this.getStateNodeByPath(resolvedTarget);\n      }\n    });\n  };\n\n  StateNode.prototype.formatTransition = function (transitionConfig) {\n    var _this = this;\n\n    var normalizedTarget = normalizeTarget(transitionConfig.target);\n    var internal = 'internal' in transitionConfig ? transitionConfig.internal : normalizedTarget ? normalizedTarget.some(function (_target) {\n      return isString(_target) && _target[0] === _this.delimiter;\n    }) : true;\n    var guards = this.machine.options.guards;\n    var target = this.resolveTarget(normalizedTarget);\n\n    var transition = __assign(__assign({}, transitionConfig), {\n      actions: toActionObjects(toArray(transitionConfig.actions)),\n      cond: toGuard(transitionConfig.cond, guards),\n      target: target,\n      source: this,\n      internal: internal,\n      eventType: transitionConfig.event\n    });\n\n    Object.defineProperty(transition, 'toJSON', {\n      value: function () {\n        return __assign(__assign({}, transition), {\n          target: transition.target ? transition.target.map(function (t) {\n            return \"#\" + t.id;\n          }) : undefined,\n          source: \"#{this.id}\"\n        });\n      }\n    });\n    return transition;\n  };\n\n  StateNode.prototype.formatTransitions = function () {\n    var e_9, _a;\n\n    var _this = this;\n\n    var onConfig;\n\n    if (!this.config.on) {\n      onConfig = [];\n    } else if (Array.isArray(this.config.on)) {\n      onConfig = this.config.on;\n    } else {\n      var _b = this.config.on,\n          _c = WILDCARD,\n          _d = _b[_c],\n          wildcardConfigs = _d === void 0 ? [] : _d,\n          strictOnConfigs_1 = __rest(_b, [typeof _c === \"symbol\" ? _c : _c + \"\"]);\n\n      onConfig = flatten(keys(strictOnConfigs_1).map(function (key) {\n        var arrayified = toTransitionConfigArray(key, strictOnConfigs_1[key]);\n\n        if (!IS_PRODUCTION) {\n          validateArrayifiedTransitions(_this, key, arrayified);\n        }\n\n        return arrayified;\n      }).concat(toTransitionConfigArray(WILDCARD, wildcardConfigs)));\n    }\n\n    var doneConfig = this.config.onDone ? toTransitionConfigArray(String(done(this.id)), this.config.onDone) : [];\n    var invokeConfig = flatten(this.invoke.map(function (invokeDef) {\n      var settleTransitions = [];\n\n      if (invokeDef.onDone) {\n        settleTransitions.push.apply(settleTransitions, __spread(toTransitionConfigArray(String(doneInvoke(invokeDef.id)), invokeDef.onDone)));\n      }\n\n      if (invokeDef.onError) {\n        settleTransitions.push.apply(settleTransitions, __spread(toTransitionConfigArray(String(error(invokeDef.id)), invokeDef.onError)));\n      }\n\n      return settleTransitions;\n    }));\n    var delayedTransitions = this.after;\n    var formattedTransitions = flatten(__spread(doneConfig, invokeConfig, onConfig).map(function (transitionConfig) {\n      return toArray(transitionConfig).map(function (transition) {\n        return _this.formatTransition(transition);\n      });\n    }));\n\n    try {\n      for (var delayedTransitions_1 = __values(delayedTransitions), delayedTransitions_1_1 = delayedTransitions_1.next(); !delayedTransitions_1_1.done; delayedTransitions_1_1 = delayedTransitions_1.next()) {\n        var delayedTransition = delayedTransitions_1_1.value;\n        formattedTransitions.push(delayedTransition);\n      }\n    } catch (e_9_1) {\n      e_9 = {\n        error: e_9_1\n      };\n    } finally {\n      try {\n        if (delayedTransitions_1_1 && !delayedTransitions_1_1.done && (_a = delayedTransitions_1.return)) _a.call(delayedTransitions_1);\n      } finally {\n        if (e_9) throw e_9.error;\n      }\n    }\n\n    return formattedTransitions;\n  };\n\n  return StateNode;\n}();\n\nexport { StateNode };","import { StateNode } from './StateNode.js';\n\nfunction Machine(config, options, initialContext) {\n  if (initialContext === void 0) {\n    initialContext = config.context;\n  }\n\n  var resolvedInitialContext = typeof initialContext === 'function' ? initialContext() : initialContext;\n  return new StateNode(config, options, resolvedInitialContext);\n}\n\nfunction createMachine(config, options) {\n  var resolvedInitialContext = typeof config.context === 'function' ? config.context() : config.context;\n  return new StateNode(config, options, resolvedInitialContext);\n}\n\nexport { Machine, createMachine };","import { __assign } from './_virtual/_tslib.js';\nvar defaultOptions = {\n  deferEvents: false\n};\n\nvar Scheduler =\n/*#__PURE__*/\n\n/** @class */\nfunction () {\n  function Scheduler(options) {\n    this.processingEvent = false;\n    this.queue = [];\n    this.initialized = false;\n    this.options = __assign(__assign({}, defaultOptions), options);\n  }\n\n  Scheduler.prototype.initialize = function (callback) {\n    this.initialized = true;\n\n    if (callback) {\n      if (!this.options.deferEvents) {\n        this.schedule(callback);\n        return;\n      }\n\n      this.process(callback);\n    }\n\n    this.flushEvents();\n  };\n\n  Scheduler.prototype.schedule = function (task) {\n    if (!this.initialized || this.processingEvent) {\n      this.queue.push(task);\n      return;\n    }\n\n    if (this.queue.length !== 0) {\n      throw new Error('Event queue should be empty when it is not processing events');\n    }\n\n    this.process(task);\n    this.flushEvents();\n  };\n\n  Scheduler.prototype.clear = function () {\n    this.queue = [];\n  };\n\n  Scheduler.prototype.flushEvents = function () {\n    var nextCallback = this.queue.shift();\n\n    while (nextCallback) {\n      this.process(nextCallback);\n      nextCallback = this.queue.shift();\n    }\n  };\n\n  Scheduler.prototype.process = function (callback) {\n    this.processingEvent = true;\n\n    try {\n      callback();\n    } catch (e) {\n      // there is no use to keep the future events\n      // as the situation is not anymore the same\n      this.clear();\n      throw e;\n    } finally {\n      this.processingEvent = false;\n    }\n  };\n\n  return Scheduler;\n}();\n\nexport { Scheduler };","var children =\n/*#__PURE__*/\nnew Map();\nvar sessionIdIndex = 0;\nvar registry = {\n  bookId: function () {\n    return \"x:\" + sessionIdIndex++;\n  },\n  register: function (id, actor) {\n    children.set(id, actor);\n    return id;\n  },\n  get: function (id) {\n    return children.get(id);\n  },\n  free: function (id) {\n    children.delete(id);\n  }\n};\nexport { registry };","import { IS_PRODUCTION } from './environment.js';\n\nfunction getDevTools() {\n  var w = window;\n\n  if (!!w.__xstate__) {\n    return w.__xstate__;\n  }\n\n  return undefined;\n}\n\nfunction registerService(service) {\n  if (IS_PRODUCTION || typeof window === 'undefined') {\n    return;\n  }\n\n  var devTools = getDevTools();\n\n  if (devTools) {\n    devTools.register(service);\n  }\n}\n\nexport { registerService };","import { __values, __assign, __spread } from './_virtual/_tslib.js';\nimport { IS_PRODUCTION } from './environment.js';\nimport { warn, mapContext, isFunction, keys, toSCXMLEvent, isPromiseLike, isObservable, isMachine, reportUnhandledExceptionOnInvocation, symbolObservable, isArray, toEventObject, isString, uniqueId } from './utils.js';\nimport { ActionTypes, SpecialTargets } from './types.js';\nimport { isInFinalState } from './stateUtils.js';\nimport { errorPlatform, log, stop, start, cancel, send, update, error as error$1 } from './actionTypes.js';\nimport { doneInvoke, initEvent, getActionFunction, error } from './actions.js';\nimport { isState, State, bindActionToState } from './State.js';\nimport { isActor } from './Actor.js';\nimport { Scheduler } from './scheduler.js';\nimport { registry } from './registry.js';\nimport { registerService } from './devTools.js';\nvar DEFAULT_SPAWN_OPTIONS = {\n  sync: false,\n  autoForward: false\n};\n/**\r\n * Maintains a stack of the current service in scope.\r\n * This is used to provide the correct service to spawn().\r\n *\r\n * @private\r\n */\n\nvar withServiceScope =\n/*#__PURE__*/\nfunction () {\n  var serviceStack = [];\n  return function (service, fn) {\n    service && serviceStack.push(service);\n    var result = fn(service || serviceStack[serviceStack.length - 1]);\n    service && serviceStack.pop();\n    return result;\n  };\n}();\n\nvar InterpreterStatus;\n\n(function (InterpreterStatus) {\n  InterpreterStatus[InterpreterStatus[\"NotStarted\"] = 0] = \"NotStarted\";\n  InterpreterStatus[InterpreterStatus[\"Running\"] = 1] = \"Running\";\n  InterpreterStatus[InterpreterStatus[\"Stopped\"] = 2] = \"Stopped\";\n})(InterpreterStatus || (InterpreterStatus = {}));\n\nvar Interpreter =\n/*#__PURE__*/\n\n/** @class */\nfunction () {\n  /**\r\n   * Creates a new Interpreter instance (i.e., service) for the given machine with the provided options, if any.\r\n   *\r\n   * @param machine The machine to be interpreted\r\n   * @param options Interpreter options\r\n   */\n  function Interpreter(machine, options) {\n    var _this = this;\n\n    if (options === void 0) {\n      options = Interpreter.defaultOptions;\n    }\n\n    this.machine = machine;\n    this.scheduler = new Scheduler();\n    this.delayedEventsMap = {};\n    this.listeners = new Set();\n    this.contextListeners = new Set();\n    this.stopListeners = new Set();\n    this.doneListeners = new Set();\n    this.eventListeners = new Set();\n    this.sendListeners = new Set();\n    /**\r\n     * Whether the service is started.\r\n     */\n\n    this.initialized = false;\n    this._status = InterpreterStatus.NotStarted;\n    this.children = new Map();\n    this.forwardTo = new Set();\n    /**\r\n     * Alias for Interpreter.prototype.start\r\n     */\n\n    this.init = this.start;\n    /**\r\n     * Sends an event to the running interpreter to trigger a transition.\r\n     *\r\n     * An array of events (batched) can be sent as well, which will send all\r\n     * batched events to the running interpreter. The listeners will be\r\n     * notified only **once** when all events are processed.\r\n     *\r\n     * @param event The event(s) to send\r\n     */\n\n    this.send = function (event, payload) {\n      if (isArray(event)) {\n        _this.batch(event);\n\n        return _this.state;\n      }\n\n      var _event = toSCXMLEvent(toEventObject(event, payload));\n\n      if (_this._status === InterpreterStatus.Stopped) {\n        // do nothing\n        if (!IS_PRODUCTION) {\n          warn(false, \"Event \\\"\" + _event.name + \"\\\" was sent to stopped service \\\"\" + _this.machine.id + \"\\\". This service has already reached its final state, and will not transition.\\nEvent: \" + JSON.stringify(_event.data));\n        }\n\n        return _this.state;\n      }\n\n      if (_this._status === InterpreterStatus.NotStarted && _this.options.deferEvents) {\n        // tslint:disable-next-line:no-console\n        if (!IS_PRODUCTION) {\n          warn(false, \"Event \\\"\" + _event.name + \"\\\" was sent to uninitialized service \\\"\" + _this.machine.id + \"\\\" and is deferred. Make sure .start() is called for this service.\\nEvent: \" + JSON.stringify(_event.data));\n        }\n      } else if (_this._status !== InterpreterStatus.Running) {\n        throw new Error(\"Event \\\"\" + _event.name + \"\\\" was sent to uninitialized service \\\"\" + _this.machine.id + \"\\\". Make sure .start() is called for this service, or set { deferEvents: true } in the service options.\\nEvent: \" + JSON.stringify(_event.data));\n      }\n\n      _this.scheduler.schedule(function () {\n        // Forward copy of event to child actors\n        _this.forward(_event);\n\n        var nextState = _this.nextState(_event);\n\n        _this.update(nextState, _event);\n      });\n\n      return _this._state; // TODO: deprecate (should return void)\n      // tslint:disable-next-line:semicolon\n    };\n\n    this.sendTo = function (event, to) {\n      var isParent = _this.parent && (to === SpecialTargets.Parent || _this.parent.id === to);\n      var target = isParent ? _this.parent : isActor(to) ? to : _this.children.get(to) || registry.get(to);\n\n      if (!target) {\n        if (!isParent) {\n          throw new Error(\"Unable to send event to child '\" + to + \"' from service '\" + _this.id + \"'.\");\n        } // tslint:disable-next-line:no-console\n\n\n        if (!IS_PRODUCTION) {\n          warn(false, \"Service '\" + _this.id + \"' has no parent: unable to send event \" + event.type);\n        }\n\n        return;\n      }\n\n      if ('machine' in target) {\n        // Send SCXML events to machines\n        target.send(__assign(__assign({}, event), {\n          name: event.name === error$1 ? \"\" + error(_this.id) : event.name,\n          origin: _this.sessionId\n        }));\n      } else {\n        // Send normal events to other targets\n        target.send(event.data);\n      }\n    };\n\n    var resolvedOptions = __assign(__assign({}, Interpreter.defaultOptions), options);\n\n    var clock = resolvedOptions.clock,\n        logger = resolvedOptions.logger,\n        parent = resolvedOptions.parent,\n        id = resolvedOptions.id;\n    var resolvedId = id !== undefined ? id : machine.id;\n    this.id = resolvedId;\n    this.logger = logger;\n    this.clock = clock;\n    this.parent = parent;\n    this.options = resolvedOptions;\n    this.scheduler = new Scheduler({\n      deferEvents: this.options.deferEvents\n    });\n    this.sessionId = registry.bookId();\n  }\n\n  Object.defineProperty(Interpreter.prototype, \"initialState\", {\n    get: function () {\n      var _this = this;\n\n      if (this._initialState) {\n        return this._initialState;\n      }\n\n      return withServiceScope(this, function () {\n        _this._initialState = _this.machine.initialState;\n        return _this._initialState;\n      });\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Interpreter.prototype, \"state\", {\n    get: function () {\n      if (!IS_PRODUCTION) {\n        warn(this._status !== InterpreterStatus.NotStarted, \"Attempted to read state from uninitialized service '\" + this.id + \"'. Make sure the service is started first.\");\n      }\n\n      return this._state;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  /**\r\n   * Executes the actions of the given state, with that state's `context` and `event`.\r\n   *\r\n   * @param state The state whose actions will be executed\r\n   * @param actionsConfig The action implementations to use\r\n   */\n\n  Interpreter.prototype.execute = function (state, actionsConfig) {\n    var e_1, _a;\n\n    try {\n      for (var _b = __values(state.actions), _c = _b.next(); !_c.done; _c = _b.next()) {\n        var action = _c.value;\n        this.exec(action, state, actionsConfig);\n      }\n    } catch (e_1_1) {\n      e_1 = {\n        error: e_1_1\n      };\n    } finally {\n      try {\n        if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n      } finally {\n        if (e_1) throw e_1.error;\n      }\n    }\n  };\n\n  Interpreter.prototype.update = function (state, _event) {\n    var e_2, _a, e_3, _b, e_4, _c, e_5, _d;\n\n    var _this = this; // Attach session ID to state\n\n\n    state._sessionid = this.sessionId; // Update state\n\n    this._state = state; // Execute actions\n\n    if (this.options.execute) {\n      this.execute(this.state);\n    } // Dev tools\n\n\n    if (this.devTools) {\n      this.devTools.send(_event.data, state);\n    } // Execute listeners\n\n\n    if (state.event) {\n      try {\n        for (var _e = __values(this.eventListeners), _f = _e.next(); !_f.done; _f = _e.next()) {\n          var listener = _f.value;\n          listener(state.event);\n        }\n      } catch (e_2_1) {\n        e_2 = {\n          error: e_2_1\n        };\n      } finally {\n        try {\n          if (_f && !_f.done && (_a = _e.return)) _a.call(_e);\n        } finally {\n          if (e_2) throw e_2.error;\n        }\n      }\n    }\n\n    try {\n      for (var _g = __values(this.listeners), _h = _g.next(); !_h.done; _h = _g.next()) {\n        var listener = _h.value;\n        listener(state, state.event);\n      }\n    } catch (e_3_1) {\n      e_3 = {\n        error: e_3_1\n      };\n    } finally {\n      try {\n        if (_h && !_h.done && (_b = _g.return)) _b.call(_g);\n      } finally {\n        if (e_3) throw e_3.error;\n      }\n    }\n\n    try {\n      for (var _j = __values(this.contextListeners), _k = _j.next(); !_k.done; _k = _j.next()) {\n        var contextListener = _k.value;\n        contextListener(this.state.context, this.state.history ? this.state.history.context : undefined);\n      }\n    } catch (e_4_1) {\n      e_4 = {\n        error: e_4_1\n      };\n    } finally {\n      try {\n        if (_k && !_k.done && (_c = _j.return)) _c.call(_j);\n      } finally {\n        if (e_4) throw e_4.error;\n      }\n    }\n\n    var isDone = isInFinalState(state.configuration || [], this.machine);\n\n    if (this.state.configuration && isDone) {\n      // get final child state node\n      var finalChildStateNode = state.configuration.find(function (sn) {\n        return sn.type === 'final' && sn.parent === _this.machine;\n      });\n      var doneData = finalChildStateNode && finalChildStateNode.data ? mapContext(finalChildStateNode.data, state.context, _event) : undefined;\n\n      try {\n        for (var _l = __values(this.doneListeners), _m = _l.next(); !_m.done; _m = _l.next()) {\n          var listener = _m.value;\n          listener(doneInvoke(this.id, doneData));\n        }\n      } catch (e_5_1) {\n        e_5 = {\n          error: e_5_1\n        };\n      } finally {\n        try {\n          if (_m && !_m.done && (_d = _l.return)) _d.call(_l);\n        } finally {\n          if (e_5) throw e_5.error;\n        }\n      }\n\n      this.stop();\n    }\n  };\n  /*\r\n   * Adds a listener that is notified whenever a state transition happens. The listener is called with\r\n   * the next state and the event object that caused the state transition.\r\n   *\r\n   * @param listener The state listener\r\n   */\n\n\n  Interpreter.prototype.onTransition = function (listener) {\n    this.listeners.add(listener); // Send current state to listener\n\n    if (this._status === InterpreterStatus.Running) {\n      listener(this.state, this.state.event);\n    }\n\n    return this;\n  };\n\n  Interpreter.prototype.subscribe = function (nextListenerOrObserver, // @ts-ignore\n  errorListener, completeListener) {\n    var _this = this;\n\n    if (!nextListenerOrObserver) {\n      return {\n        unsubscribe: function () {\n          return void 0;\n        }\n      };\n    }\n\n    var listener;\n    var resolvedCompleteListener = completeListener;\n\n    if (typeof nextListenerOrObserver === 'function') {\n      listener = nextListenerOrObserver;\n    } else {\n      listener = nextListenerOrObserver.next.bind(nextListenerOrObserver);\n      resolvedCompleteListener = nextListenerOrObserver.complete.bind(nextListenerOrObserver);\n    }\n\n    this.listeners.add(listener); // Send current state to listener\n\n    if (this._status === InterpreterStatus.Running) {\n      listener(this.state);\n    }\n\n    if (resolvedCompleteListener) {\n      this.onDone(resolvedCompleteListener);\n    }\n\n    return {\n      unsubscribe: function () {\n        listener && _this.listeners.delete(listener);\n        resolvedCompleteListener && _this.doneListeners.delete(resolvedCompleteListener);\n      }\n    };\n  };\n  /**\r\n   * Adds an event listener that is notified whenever an event is sent to the running interpreter.\r\n   * @param listener The event listener\r\n   */\n\n\n  Interpreter.prototype.onEvent = function (listener) {\n    this.eventListeners.add(listener);\n    return this;\n  };\n  /**\r\n   * Adds an event listener that is notified whenever a `send` event occurs.\r\n   * @param listener The event listener\r\n   */\n\n\n  Interpreter.prototype.onSend = function (listener) {\n    this.sendListeners.add(listener);\n    return this;\n  };\n  /**\r\n   * Adds a context listener that is notified whenever the state context changes.\r\n   * @param listener The context listener\r\n   */\n\n\n  Interpreter.prototype.onChange = function (listener) {\n    this.contextListeners.add(listener);\n    return this;\n  };\n  /**\r\n   * Adds a listener that is notified when the machine is stopped.\r\n   * @param listener The listener\r\n   */\n\n\n  Interpreter.prototype.onStop = function (listener) {\n    this.stopListeners.add(listener);\n    return this;\n  };\n  /**\r\n   * Adds a state listener that is notified when the statechart has reached its final state.\r\n   * @param listener The state listener\r\n   */\n\n\n  Interpreter.prototype.onDone = function (listener) {\n    this.doneListeners.add(listener);\n    return this;\n  };\n  /**\r\n   * Removes a listener.\r\n   * @param listener The listener to remove\r\n   */\n\n\n  Interpreter.prototype.off = function (listener) {\n    this.listeners.delete(listener);\n    this.eventListeners.delete(listener);\n    this.sendListeners.delete(listener);\n    this.stopListeners.delete(listener);\n    this.doneListeners.delete(listener);\n    this.contextListeners.delete(listener);\n    return this;\n  };\n  /**\r\n   * Starts the interpreter from the given state, or the initial state.\r\n   * @param initialState The state to start the statechart from\r\n   */\n\n\n  Interpreter.prototype.start = function (initialState) {\n    var _this = this;\n\n    if (this._status === InterpreterStatus.Running) {\n      // Do not restart the service if it is already started\n      return this;\n    }\n\n    registry.register(this.sessionId, this);\n    this.initialized = true;\n    this._status = InterpreterStatus.Running;\n    var resolvedState = initialState === undefined ? this.initialState : withServiceScope(this, function () {\n      return isState(initialState) ? _this.machine.resolveState(initialState) : _this.machine.resolveState(State.from(initialState, _this.machine.context));\n    });\n\n    if (this.options.devTools) {\n      this.attachDev();\n    }\n\n    this.scheduler.initialize(function () {\n      _this.update(resolvedState, initEvent);\n    });\n    return this;\n  };\n  /**\r\n   * Stops the interpreter and unsubscribe all listeners.\r\n   *\r\n   * This will also notify the `onStop` listeners.\r\n   */\n\n\n  Interpreter.prototype.stop = function () {\n    var e_6, _a, e_7, _b, e_8, _c, e_9, _d, e_10, _e;\n\n    try {\n      for (var _f = __values(this.listeners), _g = _f.next(); !_g.done; _g = _f.next()) {\n        var listener = _g.value;\n        this.listeners.delete(listener);\n      }\n    } catch (e_6_1) {\n      e_6 = {\n        error: e_6_1\n      };\n    } finally {\n      try {\n        if (_g && !_g.done && (_a = _f.return)) _a.call(_f);\n      } finally {\n        if (e_6) throw e_6.error;\n      }\n    }\n\n    try {\n      for (var _h = __values(this.stopListeners), _j = _h.next(); !_j.done; _j = _h.next()) {\n        var listener = _j.value; // call listener, then remove\n\n        listener();\n        this.stopListeners.delete(listener);\n      }\n    } catch (e_7_1) {\n      e_7 = {\n        error: e_7_1\n      };\n    } finally {\n      try {\n        if (_j && !_j.done && (_b = _h.return)) _b.call(_h);\n      } finally {\n        if (e_7) throw e_7.error;\n      }\n    }\n\n    try {\n      for (var _k = __values(this.contextListeners), _l = _k.next(); !_l.done; _l = _k.next()) {\n        var listener = _l.value;\n        this.contextListeners.delete(listener);\n      }\n    } catch (e_8_1) {\n      e_8 = {\n        error: e_8_1\n      };\n    } finally {\n      try {\n        if (_l && !_l.done && (_c = _k.return)) _c.call(_k);\n      } finally {\n        if (e_8) throw e_8.error;\n      }\n    }\n\n    try {\n      for (var _m = __values(this.doneListeners), _o = _m.next(); !_o.done; _o = _m.next()) {\n        var listener = _o.value;\n        this.doneListeners.delete(listener);\n      }\n    } catch (e_9_1) {\n      e_9 = {\n        error: e_9_1\n      };\n    } finally {\n      try {\n        if (_o && !_o.done && (_d = _m.return)) _d.call(_m);\n      } finally {\n        if (e_9) throw e_9.error;\n      }\n    } // Stop all children\n\n\n    this.children.forEach(function (child) {\n      if (isFunction(child.stop)) {\n        child.stop();\n      }\n    });\n\n    try {\n      // Cancel all delayed events\n      for (var _p = __values(keys(this.delayedEventsMap)), _q = _p.next(); !_q.done; _q = _p.next()) {\n        var key = _q.value;\n        this.clock.clearTimeout(this.delayedEventsMap[key]);\n      }\n    } catch (e_10_1) {\n      e_10 = {\n        error: e_10_1\n      };\n    } finally {\n      try {\n        if (_q && !_q.done && (_e = _p.return)) _e.call(_p);\n      } finally {\n        if (e_10) throw e_10.error;\n      }\n    }\n\n    this.scheduler.clear();\n    this.initialized = false;\n    this._status = InterpreterStatus.Stopped;\n    registry.free(this.sessionId);\n    return this;\n  };\n\n  Interpreter.prototype.batch = function (events) {\n    var _this = this;\n\n    if (this._status === InterpreterStatus.NotStarted && this.options.deferEvents) {\n      // tslint:disable-next-line:no-console\n      if (!IS_PRODUCTION) {\n        warn(false, events.length + \" event(s) were sent to uninitialized service \\\"\" + this.machine.id + \"\\\" and are deferred. Make sure .start() is called for this service.\\nEvent: \" + JSON.stringify(event));\n      }\n    } else if (this._status !== InterpreterStatus.Running) {\n      throw new Error( // tslint:disable-next-line:max-line-length\n      events.length + \" event(s) were sent to uninitialized service \\\"\" + this.machine.id + \"\\\". Make sure .start() is called for this service, or set { deferEvents: true } in the service options.\");\n    }\n\n    this.scheduler.schedule(function () {\n      var e_11, _a;\n\n      var nextState = _this.state;\n      var batchChanged = false;\n      var batchedActions = [];\n\n      var _loop_1 = function (event_1) {\n        var _event = toSCXMLEvent(event_1);\n\n        _this.forward(_event);\n\n        nextState = withServiceScope(_this, function () {\n          return _this.machine.transition(nextState, _event);\n        });\n        batchedActions.push.apply(batchedActions, __spread(nextState.actions.map(function (a) {\n          return bindActionToState(a, nextState);\n        })));\n        batchChanged = batchChanged || !!nextState.changed;\n      };\n\n      try {\n        for (var events_1 = __values(events), events_1_1 = events_1.next(); !events_1_1.done; events_1_1 = events_1.next()) {\n          var event_1 = events_1_1.value;\n\n          _loop_1(event_1);\n        }\n      } catch (e_11_1) {\n        e_11 = {\n          error: e_11_1\n        };\n      } finally {\n        try {\n          if (events_1_1 && !events_1_1.done && (_a = events_1.return)) _a.call(events_1);\n        } finally {\n          if (e_11) throw e_11.error;\n        }\n      }\n\n      nextState.changed = batchChanged;\n      nextState.actions = batchedActions;\n\n      _this.update(nextState, toSCXMLEvent(events[events.length - 1]));\n    });\n  };\n  /**\r\n   * Returns a send function bound to this interpreter instance.\r\n   *\r\n   * @param event The event to be sent by the sender.\r\n   */\n\n\n  Interpreter.prototype.sender = function (event) {\n    return this.send.bind(this, event);\n  };\n  /**\r\n   * Returns the next state given the interpreter's current state and the event.\r\n   *\r\n   * This is a pure method that does _not_ update the interpreter's state.\r\n   *\r\n   * @param event The event to determine the next state\r\n   */\n\n\n  Interpreter.prototype.nextState = function (event) {\n    var _this = this;\n\n    var _event = toSCXMLEvent(event);\n\n    if (_event.name.indexOf(errorPlatform) === 0 && !this.state.nextEvents.some(function (nextEvent) {\n      return nextEvent.indexOf(errorPlatform) === 0;\n    })) {\n      throw _event.data.data;\n    }\n\n    var nextState = withServiceScope(this, function () {\n      return _this.machine.transition(_this.state, _event);\n    });\n    return nextState;\n  };\n\n  Interpreter.prototype.forward = function (event) {\n    var e_12, _a;\n\n    try {\n      for (var _b = __values(this.forwardTo), _c = _b.next(); !_c.done; _c = _b.next()) {\n        var id = _c.value;\n        var child = this.children.get(id);\n\n        if (!child) {\n          throw new Error(\"Unable to forward event '\" + event + \"' from interpreter '\" + this.id + \"' to nonexistant child '\" + id + \"'.\");\n        }\n\n        child.send(event);\n      }\n    } catch (e_12_1) {\n      e_12 = {\n        error: e_12_1\n      };\n    } finally {\n      try {\n        if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n      } finally {\n        if (e_12) throw e_12.error;\n      }\n    }\n  };\n\n  Interpreter.prototype.defer = function (sendAction) {\n    var _this = this;\n\n    this.delayedEventsMap[sendAction.id] = this.clock.setTimeout(function () {\n      if (sendAction.to) {\n        _this.sendTo(sendAction._event, sendAction.to);\n      } else {\n        _this.send(sendAction._event);\n      }\n    }, sendAction.delay);\n  };\n\n  Interpreter.prototype.cancel = function (sendId) {\n    this.clock.clearTimeout(this.delayedEventsMap[sendId]);\n    delete this.delayedEventsMap[sendId];\n  };\n\n  Interpreter.prototype.exec = function (action, state, actionFunctionMap) {\n    var context = state.context,\n        _event = state._event;\n    var actionOrExec = getActionFunction(action.type, actionFunctionMap) || action.exec;\n    var exec = isFunction(actionOrExec) ? actionOrExec : actionOrExec ? actionOrExec.exec : action.exec;\n\n    if (exec) {\n      try {\n        return exec(context, _event.data, {\n          action: action,\n          state: this.state,\n          _event: _event\n        });\n      } catch (err) {\n        if (this.parent) {\n          this.parent.send({\n            type: 'xstate.error',\n            data: err\n          });\n        }\n\n        throw err;\n      }\n    }\n\n    switch (action.type) {\n      case send:\n        var sendAction = action;\n\n        if (typeof sendAction.delay === 'number') {\n          this.defer(sendAction);\n          return;\n        } else {\n          if (sendAction.to) {\n            this.sendTo(sendAction._event, sendAction.to);\n          } else {\n            this.send(sendAction._event);\n          }\n        }\n\n        break;\n\n      case cancel:\n        this.cancel(action.sendId);\n        break;\n\n      case start:\n        {\n          var activity = action.activity; // If the activity will be stopped right after it's started\n          // (such as in transient states)\n          // don't bother starting the activity.\n\n          if (!this.state.activities[activity.type]) {\n            break;\n          } // Invoked services\n\n\n          if (activity.type === ActionTypes.Invoke) {\n            var serviceCreator = this.machine.options.services ? this.machine.options.services[activity.src] : undefined;\n            var id = activity.id,\n                data = activity.data;\n\n            if (!IS_PRODUCTION) {\n              warn(!('forward' in activity), // tslint:disable-next-line:max-line-length\n              \"`forward` property is deprecated (found in invocation of '\" + activity.src + \"' in in machine '\" + this.machine.id + \"'). \" + \"Please use `autoForward` instead.\");\n            }\n\n            var autoForward = 'autoForward' in activity ? activity.autoForward : !!activity.forward;\n\n            if (!serviceCreator) {\n              // tslint:disable-next-line:no-console\n              if (!IS_PRODUCTION) {\n                warn(false, \"No service found for invocation '\" + activity.src + \"' in machine '\" + this.machine.id + \"'.\");\n              }\n\n              return;\n            }\n\n            var source = isFunction(serviceCreator) ? serviceCreator(context, _event.data) : serviceCreator;\n\n            if (isPromiseLike(source)) {\n              this.state.children[id] = this.spawnPromise(Promise.resolve(source), id);\n            } else if (isFunction(source)) {\n              this.state.children[id] = this.spawnCallback(source, id);\n            } else if (isObservable(source)) {\n              this.state.children[id] = this.spawnObservable(source, id);\n            } else if (isMachine(source)) {\n              // TODO: try/catch here\n              this.state.children[id] = this.spawnMachine(data ? source.withContext(mapContext(data, context, _event)) : source, {\n                id: id,\n                autoForward: autoForward\n              });\n            }\n          } else {\n            this.spawnActivity(activity);\n          }\n\n          break;\n        }\n\n      case stop:\n        {\n          this.stopChild(action.activity.id);\n          break;\n        }\n\n      case log:\n        var label = action.label,\n            value = action.value;\n\n        if (label) {\n          this.logger(label, value);\n        } else {\n          this.logger(value);\n        }\n\n        break;\n\n      default:\n        if (!IS_PRODUCTION) {\n          warn(false, \"No implementation found for action type '\" + action.type + \"'\");\n        }\n\n        break;\n    }\n\n    return undefined;\n  };\n\n  Interpreter.prototype.stopChild = function (childId) {\n    var child = this.children.get(childId);\n\n    if (!child) {\n      return;\n    }\n\n    this.children.delete(childId);\n    this.forwardTo.delete(childId);\n    delete this.state.children[childId];\n\n    if (isFunction(child.stop)) {\n      child.stop();\n    }\n  };\n\n  Interpreter.prototype.spawn = function (entity, name, options) {\n    if (isPromiseLike(entity)) {\n      return this.spawnPromise(Promise.resolve(entity), name);\n    } else if (isFunction(entity)) {\n      return this.spawnCallback(entity, name);\n    } else if (isActor(entity)) {\n      return this.spawnActor(entity);\n    } else if (isObservable(entity)) {\n      return this.spawnObservable(entity, name);\n    } else if (isMachine(entity)) {\n      return this.spawnMachine(entity, __assign(__assign({}, options), {\n        id: name\n      }));\n    } else {\n      throw new Error(\"Unable to spawn entity \\\"\" + name + \"\\\" of type \\\"\" + typeof entity + \"\\\".\");\n    }\n  };\n\n  Interpreter.prototype.spawnMachine = function (machine, options) {\n    var _this = this;\n\n    if (options === void 0) {\n      options = {};\n    }\n\n    var childService = new Interpreter(machine, __assign(__assign({}, this.options), {\n      parent: this,\n      id: options.id || machine.id\n    }));\n\n    var resolvedOptions = __assign(__assign({}, DEFAULT_SPAWN_OPTIONS), options);\n\n    if (resolvedOptions.sync) {\n      childService.onTransition(function (state) {\n        _this.send(update, {\n          state: state,\n          id: childService.id\n        });\n      });\n    }\n\n    childService.onDone(function (doneEvent) {\n      _this.send(toSCXMLEvent(doneEvent, {\n        origin: childService.id\n      }));\n    }).start();\n    var actor = childService;\n    this.children.set(childService.id, actor);\n\n    if (resolvedOptions.autoForward) {\n      this.forwardTo.add(childService.id);\n    }\n\n    return actor;\n  };\n\n  Interpreter.prototype.spawnPromise = function (promise, id) {\n    var _this = this;\n\n    var canceled = false;\n    promise.then(function (response) {\n      if (!canceled) {\n        _this.send(toSCXMLEvent(doneInvoke(id, response), {\n          origin: id\n        }));\n      }\n    }, function (errorData) {\n      if (!canceled) {\n        var errorEvent = error(id, errorData);\n\n        try {\n          // Send \"error.platform.id\" to this (parent).\n          _this.send(toSCXMLEvent(errorEvent, {\n            origin: id\n          }));\n        } catch (error) {\n          reportUnhandledExceptionOnInvocation(errorData, error, id);\n\n          if (_this.devTools) {\n            _this.devTools.send(errorEvent, _this.state);\n          }\n\n          if (_this.machine.strict) {\n            // it would be better to always stop the state machine if unhandled\n            // exception/promise rejection happens but because we don't want to\n            // break existing code so enforce it on strict mode only especially so\n            // because documentation says that onError is optional\n            _this.stop();\n          }\n        }\n      }\n    });\n    var actor = {\n      id: id,\n      send: function () {\n        return void 0;\n      },\n      subscribe: function (next, handleError, complete) {\n        var unsubscribed = false;\n        promise.then(function (response) {\n          if (unsubscribed) {\n            return;\n          }\n\n          next && next(response);\n\n          if (unsubscribed) {\n            return;\n          }\n\n          complete && complete();\n        }, function (err) {\n          if (unsubscribed) {\n            return;\n          }\n\n          handleError(err);\n        });\n        return {\n          unsubscribe: function () {\n            return unsubscribed = true;\n          }\n        };\n      },\n      stop: function () {\n        canceled = true;\n      },\n      toJSON: function () {\n        return {\n          id: id\n        };\n      }\n    };\n    this.children.set(id, actor);\n    return actor;\n  };\n\n  Interpreter.prototype.spawnCallback = function (callback, id) {\n    var _this = this;\n\n    var canceled = false;\n    var receivers = new Set();\n    var listeners = new Set();\n\n    var receive = function (e) {\n      listeners.forEach(function (listener) {\n        return listener(e);\n      });\n\n      if (canceled) {\n        return;\n      }\n\n      _this.send(e);\n    };\n\n    var callbackStop;\n\n    try {\n      callbackStop = callback(receive, function (newListener) {\n        receivers.add(newListener);\n      });\n    } catch (err) {\n      this.send(error(id, err));\n    }\n\n    if (isPromiseLike(callbackStop)) {\n      // it turned out to be an async function, can't reliably check this before calling `callback`\n      // because transpiled async functions are not recognizable\n      return this.spawnPromise(callbackStop, id);\n    }\n\n    var actor = {\n      id: id,\n      send: function (event) {\n        return receivers.forEach(function (receiver) {\n          return receiver(event);\n        });\n      },\n      subscribe: function (next) {\n        listeners.add(next);\n        return {\n          unsubscribe: function () {\n            listeners.delete(next);\n          }\n        };\n      },\n      stop: function () {\n        canceled = true;\n\n        if (isFunction(callbackStop)) {\n          callbackStop();\n        }\n      },\n      toJSON: function () {\n        return {\n          id: id\n        };\n      }\n    };\n    this.children.set(id, actor);\n    return actor;\n  };\n\n  Interpreter.prototype.spawnObservable = function (source, id) {\n    var _this = this;\n\n    var subscription = source.subscribe(function (value) {\n      _this.send(toSCXMLEvent(value, {\n        origin: id\n      }));\n    }, function (err) {\n      _this.send(toSCXMLEvent(error(id, err), {\n        origin: id\n      }));\n    }, function () {\n      _this.send(toSCXMLEvent(doneInvoke(id), {\n        origin: id\n      }));\n    });\n    var actor = {\n      id: id,\n      send: function () {\n        return void 0;\n      },\n      subscribe: function (next, handleError, complete) {\n        return source.subscribe(next, handleError, complete);\n      },\n      stop: function () {\n        return subscription.unsubscribe();\n      },\n      toJSON: function () {\n        return {\n          id: id\n        };\n      }\n    };\n    this.children.set(id, actor);\n    return actor;\n  };\n\n  Interpreter.prototype.spawnActor = function (actor) {\n    this.children.set(actor.id, actor);\n    return actor;\n  };\n\n  Interpreter.prototype.spawnActivity = function (activity) {\n    var implementation = this.machine.options && this.machine.options.activities ? this.machine.options.activities[activity.type] : undefined;\n\n    if (!implementation) {\n      if (!IS_PRODUCTION) {\n        warn(false, \"No implementation found for activity '\" + activity.type + \"'\");\n      } // tslint:disable-next-line:no-console\n\n\n      return;\n    } // Start implementation\n\n\n    var dispose = implementation(this.state.context, activity);\n    this.spawnEffect(activity.id, dispose);\n  };\n\n  Interpreter.prototype.spawnEffect = function (id, dispose) {\n    this.children.set(id, {\n      id: id,\n      send: function () {\n        return void 0;\n      },\n      subscribe: function () {\n        return {\n          unsubscribe: function () {\n            return void 0;\n          }\n        };\n      },\n      stop: dispose || undefined,\n      toJSON: function () {\n        return {\n          id: id\n        };\n      }\n    });\n  };\n\n  Interpreter.prototype.attachDev = function () {\n    if (this.options.devTools && typeof window !== 'undefined') {\n      if (window.__REDUX_DEVTOOLS_EXTENSION__) {\n        var devToolsOptions = typeof this.options.devTools === 'object' ? this.options.devTools : undefined;\n        this.devTools = window.__REDUX_DEVTOOLS_EXTENSION__.connect(__assign(__assign({\n          name: this.id,\n          autoPause: true,\n          stateSanitizer: function (state) {\n            return {\n              value: state.value,\n              context: state.context,\n              actions: state.actions\n            };\n          }\n        }, devToolsOptions), {\n          features: __assign({\n            jump: false,\n            skip: false\n          }, devToolsOptions ? devToolsOptions.features : undefined)\n        }), this.machine);\n        this.devTools.init(this.state);\n      } // add XState-specific dev tooling hook\n\n\n      registerService(this);\n    }\n  };\n\n  Interpreter.prototype.toJSON = function () {\n    return {\n      id: this.id\n    };\n  };\n\n  Interpreter.prototype[symbolObservable] = function () {\n    return this;\n  };\n  /**\r\n   * The default interpreter options:\r\n   *\r\n   * - `clock` uses the global `setTimeout` and `clearTimeout` functions\r\n   * - `logger` uses the global `console.log()` method\r\n   */\n\n\n  Interpreter.defaultOptions =\n  /*#__PURE__*/\n  function (global) {\n    return {\n      execute: true,\n      deferEvents: true,\n      clock: {\n        setTimeout: function (fn, ms) {\n          return global.setTimeout.call(null, fn, ms);\n        },\n        clearTimeout: function (id) {\n          return global.clearTimeout.call(null, id);\n        }\n      },\n      logger: global.console.log.bind(console),\n      devTools: false\n    };\n  }(typeof window === 'undefined' ? global : window);\n\n  Interpreter.interpret = interpret;\n  return Interpreter;\n}();\n\nvar createNullActor = function (name) {\n  if (name === void 0) {\n    name = 'null';\n  }\n\n  return {\n    id: name,\n    send: function () {\n      return void 0;\n    },\n    subscribe: function () {\n      // tslint:disable-next-line:no-empty\n      return {\n        unsubscribe: function () {}\n      };\n    },\n    toJSON: function () {\n      return {\n        id: name\n      };\n    }\n  };\n};\n\nvar resolveSpawnOptions = function (nameOrOptions) {\n  if (isString(nameOrOptions)) {\n    return __assign(__assign({}, DEFAULT_SPAWN_OPTIONS), {\n      name: nameOrOptions\n    });\n  }\n\n  return __assign(__assign(__assign({}, DEFAULT_SPAWN_OPTIONS), {\n    name: uniqueId()\n  }), nameOrOptions);\n};\n\nfunction spawn(entity, nameOrOptions) {\n  var resolvedOptions = resolveSpawnOptions(nameOrOptions);\n  return withServiceScope(undefined, function (service) {\n    if (!IS_PRODUCTION) {\n      warn(!!service, \"Attempted to spawn an Actor (ID: \\\"\" + (isMachine(entity) ? entity.id : 'undefined') + \"\\\") outside of a service. This will have no effect.\");\n    }\n\n    if (service) {\n      return service.spawn(entity, resolvedOptions.name, resolvedOptions);\n    } else {\n      return createNullActor(resolvedOptions.name);\n    }\n  });\n}\n/**\r\n * Creates a new Interpreter instance for the given machine with the provided options, if any.\r\n *\r\n * @param machine The machine to interpret\r\n * @param options Interpreter options\r\n */\n\n\nfunction interpret(machine, options) {\n  var interpreter = new Interpreter(machine, options);\n  return interpreter;\n}\n\nexport { Interpreter, interpret, spawn };","import { __values, __read } from './_virtual/_tslib.js';\nimport { State } from './State.js';\n\nfunction matchState(state, patterns, defaultValue) {\n  var e_1, _a;\n\n  var resolvedState = State.from(state, state instanceof State ? state.context : undefined);\n\n  try {\n    for (var patterns_1 = __values(patterns), patterns_1_1 = patterns_1.next(); !patterns_1_1.done; patterns_1_1 = patterns_1.next()) {\n      var _b = __read(patterns_1_1.value, 2),\n          stateValue = _b[0],\n          getValue = _b[1];\n\n      if (resolvedState.matches(stateValue)) {\n        return getValue(resolvedState);\n      }\n    }\n  } catch (e_1_1) {\n    e_1 = {\n      error: e_1_1\n    };\n  } finally {\n    try {\n      if (patterns_1_1 && !patterns_1_1.done && (_a = patterns_1.return)) _a.call(patterns_1);\n    } finally {\n      if (e_1) throw e_1.error;\n    }\n  }\n\n  return defaultValue(resolvedState);\n}\n\nexport { matchState };","export { matchesState } from './utils.js';\nexport { mapState } from './mapState.js';\nexport { ActionTypes, SpecialTargets } from './types.js';\nimport { raise, send, sendParent, sendUpdate, log, cancel, start, stop, assign, after, done, respond, forwardTo, escalate } from './actions.js';\nexport { assign, doneInvoke, forwardTo, send, sendParent, sendUpdate } from './actions.js';\nexport { State } from './State.js';\nexport { StateNode } from './StateNode.js';\nexport { Machine, createMachine } from './Machine.js';\nexport { Interpreter, interpret, spawn } from './interpreter.js';\nexport { matchState } from './match.js';\nvar actions = {\n  raise: raise,\n  send: send,\n  sendParent: sendParent,\n  sendUpdate: sendUpdate,\n  log: log,\n  cancel: cancel,\n  start: start,\n  stop: stop,\n  assign: assign,\n  after: after,\n  done: done,\n  respond: respond,\n  forwardTo: forwardTo,\n  escalate: escalate\n};\nexport { actions };","// Generated by Haxe 3.4.4\nvar hsluv = hsluv || {};\nhsluv.Geometry = function() { };\nhsluv.Geometry.intersectLineLine = function(a,b) {\n\tvar x = (a.intercept - b.intercept) / (b.slope - a.slope);\n\tvar y = a.slope * x + a.intercept;\n\treturn { x : x, y : y};\n};\nhsluv.Geometry.distanceFromOrigin = function(point) {\n\treturn Math.sqrt(Math.pow(point.x,2) + Math.pow(point.y,2));\n};\nhsluv.Geometry.distanceLineFromOrigin = function(line) {\n\treturn Math.abs(line.intercept) / Math.sqrt(Math.pow(line.slope,2) + 1);\n};\nhsluv.Geometry.perpendicularThroughPoint = function(line,point) {\n\tvar slope = -1 / line.slope;\n\tvar intercept = point.y - slope * point.x;\n\treturn { slope : slope, intercept : intercept};\n};\nhsluv.Geometry.angleFromOrigin = function(point) {\n\treturn Math.atan2(point.y,point.x);\n};\nhsluv.Geometry.normalizeAngle = function(angle) {\n\tvar m = 2 * Math.PI;\n\treturn (angle % m + m) % m;\n};\nhsluv.Geometry.lengthOfRayUntilIntersect = function(theta,line) {\n\treturn line.intercept / (Math.sin(theta) - line.slope * Math.cos(theta));\n};\nhsluv.Hsluv = function() { };\nhsluv.Hsluv.getBounds = function(L) {\n\tvar result = [];\n\tvar sub1 = Math.pow(L + 16,3) / 1560896;\n\tvar sub2 = sub1 > hsluv.Hsluv.epsilon ? sub1 : L / hsluv.Hsluv.kappa;\n\tvar _g = 0;\n\twhile(_g < 3) {\n\t\tvar c = _g++;\n\t\tvar m1 = hsluv.Hsluv.m[c][0];\n\t\tvar m2 = hsluv.Hsluv.m[c][1];\n\t\tvar m3 = hsluv.Hsluv.m[c][2];\n\t\tvar _g1 = 0;\n\t\twhile(_g1 < 2) {\n\t\t\tvar t = _g1++;\n\t\t\tvar top1 = (284517 * m1 - 94839 * m3) * sub2;\n\t\t\tvar top2 = (838422 * m3 + 769860 * m2 + 731718 * m1) * L * sub2 - 769860 * t * L;\n\t\t\tvar bottom = (632260 * m3 - 126452 * m2) * sub2 + 126452 * t;\n\t\t\tresult.push({ slope : top1 / bottom, intercept : top2 / bottom});\n\t\t}\n\t}\n\treturn result;\n};\nhsluv.Hsluv.maxSafeChromaForL = function(L) {\n\tvar bounds = hsluv.Hsluv.getBounds(L);\n\tvar min = Infinity;\n\tvar _g = 0;\n\twhile(_g < bounds.length) {\n\t\tvar bound = bounds[_g];\n\t\t++_g;\n\t\tvar length = hsluv.Geometry.distanceLineFromOrigin(bound);\n\t\tmin = Math.min(min,length);\n\t}\n\treturn min;\n};\nhsluv.Hsluv.maxChromaForLH = function(L,H) {\n\tvar hrad = H / 360 * Math.PI * 2;\n\tvar bounds = hsluv.Hsluv.getBounds(L);\n\tvar min = Infinity;\n\tvar _g = 0;\n\twhile(_g < bounds.length) {\n\t\tvar bound = bounds[_g];\n\t\t++_g;\n\t\tvar length = hsluv.Geometry.lengthOfRayUntilIntersect(hrad,bound);\n\t\tif(length >= 0) {\n\t\t\tmin = Math.min(min,length);\n\t\t}\n\t}\n\treturn min;\n};\nhsluv.Hsluv.dotProduct = function(a,b) {\n\tvar sum = 0;\n\tvar _g1 = 0;\n\tvar _g = a.length;\n\twhile(_g1 < _g) {\n\t\tvar i = _g1++;\n\t\tsum += a[i] * b[i];\n\t}\n\treturn sum;\n};\nhsluv.Hsluv.fromLinear = function(c) {\n\tif(c <= 0.0031308) {\n\t\treturn 12.92 * c;\n\t} else {\n\t\treturn 1.055 * Math.pow(c,0.416666666666666685) - 0.055;\n\t}\n};\nhsluv.Hsluv.toLinear = function(c) {\n\tif(c > 0.04045) {\n\t\treturn Math.pow((c + 0.055) / 1.055,2.4);\n\t} else {\n\t\treturn c / 12.92;\n\t}\n};\nhsluv.Hsluv.xyzToRgb = function(tuple) {\n\treturn [hsluv.Hsluv.fromLinear(hsluv.Hsluv.dotProduct(hsluv.Hsluv.m[0],tuple)),hsluv.Hsluv.fromLinear(hsluv.Hsluv.dotProduct(hsluv.Hsluv.m[1],tuple)),hsluv.Hsluv.fromLinear(hsluv.Hsluv.dotProduct(hsluv.Hsluv.m[2],tuple))];\n};\nhsluv.Hsluv.rgbToXyz = function(tuple) {\n\tvar rgbl = [hsluv.Hsluv.toLinear(tuple[0]),hsluv.Hsluv.toLinear(tuple[1]),hsluv.Hsluv.toLinear(tuple[2])];\n\treturn [hsluv.Hsluv.dotProduct(hsluv.Hsluv.minv[0],rgbl),hsluv.Hsluv.dotProduct(hsluv.Hsluv.minv[1],rgbl),hsluv.Hsluv.dotProduct(hsluv.Hsluv.minv[2],rgbl)];\n};\nhsluv.Hsluv.yToL = function(Y) {\n\tif(Y <= hsluv.Hsluv.epsilon) {\n\t\treturn Y / hsluv.Hsluv.refY * hsluv.Hsluv.kappa;\n\t} else {\n\t\treturn 116 * Math.pow(Y / hsluv.Hsluv.refY,0.333333333333333315) - 16;\n\t}\n};\nhsluv.Hsluv.lToY = function(L) {\n\tif(L <= 8) {\n\t\treturn hsluv.Hsluv.refY * L / hsluv.Hsluv.kappa;\n\t} else {\n\t\treturn hsluv.Hsluv.refY * Math.pow((L + 16) / 116,3);\n\t}\n};\nhsluv.Hsluv.xyzToLuv = function(tuple) {\n\tvar X = tuple[0];\n\tvar Y = tuple[1];\n\tvar Z = tuple[2];\n\tvar divider = X + 15 * Y + 3 * Z;\n\tvar varU = 4 * X;\n\tvar varV = 9 * Y;\n\tif(divider != 0) {\n\t\tvarU /= divider;\n\t\tvarV /= divider;\n\t} else {\n\t\tvarU = NaN;\n\t\tvarV = NaN;\n\t}\n\tvar L = hsluv.Hsluv.yToL(Y);\n\tif(L == 0) {\n\t\treturn [0,0,0];\n\t}\n\tvar U = 13 * L * (varU - hsluv.Hsluv.refU);\n\tvar V = 13 * L * (varV - hsluv.Hsluv.refV);\n\treturn [L,U,V];\n};\nhsluv.Hsluv.luvToXyz = function(tuple) {\n\tvar L = tuple[0];\n\tvar U = tuple[1];\n\tvar V = tuple[2];\n\tif(L == 0) {\n\t\treturn [0,0,0];\n\t}\n\tvar varU = U / (13 * L) + hsluv.Hsluv.refU;\n\tvar varV = V / (13 * L) + hsluv.Hsluv.refV;\n\tvar Y = hsluv.Hsluv.lToY(L);\n\tvar X = 0 - 9 * Y * varU / ((varU - 4) * varV - varU * varV);\n\tvar Z = (9 * Y - 15 * varV * Y - varV * X) / (3 * varV);\n\treturn [X,Y,Z];\n};\nhsluv.Hsluv.luvToLch = function(tuple) {\n\tvar L = tuple[0];\n\tvar U = tuple[1];\n\tvar V = tuple[2];\n\tvar C = Math.sqrt(U * U + V * V);\n\tvar H;\n\tif(C < 0.00000001) {\n\t\tH = 0;\n\t} else {\n\t\tvar Hrad = Math.atan2(V,U);\n\t\tH = Hrad * 180.0 / Math.PI;\n\t\tif(H < 0) {\n\t\t\tH = 360 + H;\n\t\t}\n\t}\n\treturn [L,C,H];\n};\nhsluv.Hsluv.lchToLuv = function(tuple) {\n\tvar L = tuple[0];\n\tvar C = tuple[1];\n\tvar H = tuple[2];\n\tvar Hrad = H / 360.0 * 2 * Math.PI;\n\tvar U = Math.cos(Hrad) * C;\n\tvar V = Math.sin(Hrad) * C;\n\treturn [L,U,V];\n};\nhsluv.Hsluv.hsluvToLch = function(tuple) {\n\tvar H = tuple[0];\n\tvar S = tuple[1];\n\tvar L = tuple[2];\n\tif(L > 99.9999999) {\n\t\treturn [100,0,H];\n\t}\n\tif(L < 0.00000001) {\n\t\treturn [0,0,H];\n\t}\n\tvar max = hsluv.Hsluv.maxChromaForLH(L,H);\n\tvar C = max / 100 * S;\n\treturn [L,C,H];\n};\nhsluv.Hsluv.lchToHsluv = function(tuple) {\n\tvar L = tuple[0];\n\tvar C = tuple[1];\n\tvar H = tuple[2];\n\tif(L > 99.9999999) {\n\t\treturn [H,0,100];\n\t}\n\tif(L < 0.00000001) {\n\t\treturn [H,0,0];\n\t}\n\tvar max = hsluv.Hsluv.maxChromaForLH(L,H);\n\tvar S = C / max * 100;\n\treturn [H,S,L];\n};\nhsluv.Hsluv.hpluvToLch = function(tuple) {\n\tvar H = tuple[0];\n\tvar S = tuple[1];\n\tvar L = tuple[2];\n\tif(L > 99.9999999) {\n\t\treturn [100,0,H];\n\t}\n\tif(L < 0.00000001) {\n\t\treturn [0,0,H];\n\t}\n\tvar max = hsluv.Hsluv.maxSafeChromaForL(L);\n\tvar C = max / 100 * S;\n\treturn [L,C,H];\n};\nhsluv.Hsluv.lchToHpluv = function(tuple) {\n\tvar L = tuple[0];\n\tvar C = tuple[1];\n\tvar H = tuple[2];\n\tif(L > 99.9999999) {\n\t\treturn [H,0,100];\n\t}\n\tif(L < 0.00000001) {\n\t\treturn [H,0,0];\n\t}\n\tvar max = hsluv.Hsluv.maxSafeChromaForL(L);\n\tvar S = C / max * 100;\n\treturn [H,S,L];\n};\nhsluv.Hsluv.rgbToHex = function(tuple) {\n\tvar h = \"#\";\n\tvar _g = 0;\n\twhile(_g < 3) {\n\t\tvar i = _g++;\n\t\tvar chan = tuple[i];\n\t\tvar c = Math.round(chan * 255);\n\t\tvar digit2 = c % 16;\n\t\tvar digit1 = (c - digit2) / 16 | 0;\n\t\th += hsluv.Hsluv.hexChars.charAt(digit1) + hsluv.Hsluv.hexChars.charAt(digit2);\n\t}\n\treturn h;\n};\nhsluv.Hsluv.hexToRgb = function(hex) {\n\thex = hex.toLowerCase();\n\tvar ret = [];\n\tvar _g = 0;\n\twhile(_g < 3) {\n\t\tvar i = _g++;\n\t\tvar digit1 = hsluv.Hsluv.hexChars.indexOf(hex.charAt(i * 2 + 1));\n\t\tvar digit2 = hsluv.Hsluv.hexChars.indexOf(hex.charAt(i * 2 + 2));\n\t\tvar n = digit1 * 16 + digit2;\n\t\tret.push(n / 255.0);\n\t}\n\treturn ret;\n};\nhsluv.Hsluv.lchToRgb = function(tuple) {\n\treturn hsluv.Hsluv.xyzToRgb(hsluv.Hsluv.luvToXyz(hsluv.Hsluv.lchToLuv(tuple)));\n};\nhsluv.Hsluv.rgbToLch = function(tuple) {\n\treturn hsluv.Hsluv.luvToLch(hsluv.Hsluv.xyzToLuv(hsluv.Hsluv.rgbToXyz(tuple)));\n};\nhsluv.Hsluv.hsluvToRgb = function(tuple) {\n\treturn hsluv.Hsluv.lchToRgb(hsluv.Hsluv.hsluvToLch(tuple));\n};\nhsluv.Hsluv.rgbToHsluv = function(tuple) {\n\treturn hsluv.Hsluv.lchToHsluv(hsluv.Hsluv.rgbToLch(tuple));\n};\nhsluv.Hsluv.hpluvToRgb = function(tuple) {\n\treturn hsluv.Hsluv.lchToRgb(hsluv.Hsluv.hpluvToLch(tuple));\n};\nhsluv.Hsluv.rgbToHpluv = function(tuple) {\n\treturn hsluv.Hsluv.lchToHpluv(hsluv.Hsluv.rgbToLch(tuple));\n};\nhsluv.Hsluv.hsluvToHex = function(tuple) {\n\treturn hsluv.Hsluv.rgbToHex(hsluv.Hsluv.hsluvToRgb(tuple));\n};\nhsluv.Hsluv.hpluvToHex = function(tuple) {\n\treturn hsluv.Hsluv.rgbToHex(hsluv.Hsluv.hpluvToRgb(tuple));\n};\nhsluv.Hsluv.hexToHsluv = function(s) {\n\treturn hsluv.Hsluv.rgbToHsluv(hsluv.Hsluv.hexToRgb(s));\n};\nhsluv.Hsluv.hexToHpluv = function(s) {\n\treturn hsluv.Hsluv.rgbToHpluv(hsluv.Hsluv.hexToRgb(s));\n};\nhsluv.Hsluv.m = [[3.240969941904521,-1.537383177570093,-0.498610760293],[-0.96924363628087,1.87596750150772,0.041555057407175],[0.055630079696993,-0.20397695888897,1.056971514242878]];\nhsluv.Hsluv.minv = [[0.41239079926595,0.35758433938387,0.18048078840183],[0.21263900587151,0.71516867876775,0.072192315360733],[0.019330818715591,0.11919477979462,0.95053215224966]];\nhsluv.Hsluv.refY = 1.0;\nhsluv.Hsluv.refU = 0.19783000664283;\nhsluv.Hsluv.refV = 0.46831999493879;\nhsluv.Hsluv.kappa = 903.2962962;\nhsluv.Hsluv.epsilon = 0.0088564516;\nhsluv.Hsluv.hexChars = \"0123456789abcdef\";\nvar root = {\n    \"hsluvToRgb\": hsluv.Hsluv.hsluvToRgb,\n    \"rgbToHsluv\": hsluv.Hsluv.rgbToHsluv,\n    \"hpluvToRgb\": hsluv.Hsluv.hpluvToRgb,\n    \"rgbToHpluv\": hsluv.Hsluv.rgbToHpluv,\n    \"hsluvToHex\": hsluv.Hsluv.hsluvToHex,\n    \"hexToHsluv\": hsluv.Hsluv.hexToHsluv,\n    \"hpluvToHex\": hsluv.Hsluv.hpluvToHex,\n    \"hexToHpluv\": hsluv.Hsluv.hexToHpluv,\n    \"lchToHpluv\": hsluv.Hsluv.lchToHpluv,\n    \"hpluvToLch\": hsluv.Hsluv.hpluvToLch,\n    \"lchToHsluv\": hsluv.Hsluv.lchToHsluv,\n    \"hsluvToLch\": hsluv.Hsluv.hsluvToLch,\n    \"lchToLuv\": hsluv.Hsluv.lchToLuv,\n    \"luvToLch\": hsluv.Hsluv.luvToLch,\n    \"xyzToLuv\": hsluv.Hsluv.xyzToLuv,\n    \"luvToXyz\": hsluv.Hsluv.luvToXyz,\n    \"xyzToRgb\": hsluv.Hsluv.xyzToRgb,\n    \"rgbToXyz\": hsluv.Hsluv.rgbToXyz,\n    \"lchToRgb\": hsluv.Hsluv.lchToRgb,\n    \"rgbToLch\": hsluv.Hsluv.rgbToLch\n};\n\nmodule.exports = root;\n","import { hsluvToHex } from \"hsluv\";\r\n\r\nexport const pathCalc = ([mx, my, x, y]) => {\r\n  const x1 = (mx + x) / 2;\r\n  const y1 = Math.max(my, y) + 50;\r\n  return `M ${mx} ${my} Q ${x1} ${y1} ${x} ${y}`;\r\n};\r\n\r\nexport const rerenderPath = (svg, points) => {\r\n  const path = svg.getElementsByClassName(\"wire-path\")[0];\r\n  path.setAttribute(\"d\", pathCalc(points));\r\n};\r\n\r\nexport const isSocket = (context, { pos }) => {\r\n  const el = document.elementFromPoint(pos[0], pos[1]);\r\n  return el && !!findUpTree(context.socketList, el);\r\n};\r\n\r\nexport const findUpTree = (hitList, element) =>\r\n  hitList.get(element) ||\r\n  (element.parentElement ? findUpTree(hitList, element.parentElement) : null);\r\n\r\nexport const getColor = (() => {\r\n  let hue = Math.floor(Math.random() * 360);\r\n  return () => {\r\n    hue += 30;\r\n    hue = hue <= 360 ? hue : hue % 360;\r\n    return hsluvToHex([hue, 80, 70]);\r\n  };\r\n})();\r\n\r\nexport const createPath = (el, points) => {\r\n  const svg = document.createElementNS(\"http://www.w3.org/2000/svg\", \"svg\");\r\n  const path = document.createElementNS(\"http://www.w3.org/2000/svg\", \"path\");\r\n  path.setAttribute(\"d\", pathCalc(points));\r\n  path.setAttribute(\"class\", \"wire-path\");\r\n  path.setAttribute(\"stroke\", getColor());\r\n  svg.setAttribute(\"class\", \"wire\");\r\n  svg.appendChild(path);\r\n  el.appendChild(svg);\r\n  return svg;\r\n};\r\n\r\nexport const logShit = (c, e) => console.log(c, e);\r\n\r\nexport const dragListener = area => () => cb => {\r\n  const moveListener = ({ clientX, clientY }) => {\r\n    cb({ type: \"MOVE\", pos: [clientX, clientY] });\r\n  };\r\n  area.addEventListener(\"pointermove\", moveListener);\r\n  return () => area.removeEventListener(\"pointermove\", moveListener);\r\n};\r\n","import { Machine, assign } from \"xstate\";\r\nimport { isSocket, createPath, dragListener } from \"./utils\";\r\nimport { rerenderPath, logShit } from \"./utils\";\r\nexport const dragMachine = (area, socketList) => {\r\n  const div = document.createElement(\"div\");\r\n  div.style.position = \"absolute\";\r\n  area.appendChild(div);\r\n  const initialContext = {\r\n    div,\r\n    area,\r\n    socketList,\r\n    start: [0, 0],\r\n    end: [0, 0],\r\n    wire: null,\r\n  };\r\n\r\n  return Machine(\r\n    {\r\n      id: \"drag-machine\",\r\n      context: initialContext,\r\n      initial: \"idle\",\r\n      states: {\r\n        idle: {\r\n          on: {\r\n            POINTERDOWN: {\r\n              target: \"drag\",\r\n              cond: isSocket,\r\n              actions: [\"setStart\", \"setEnd\", \"startPath\"],\r\n            },\r\n          },\r\n        },\r\n        drag: {\r\n          activities: [\"beeping\"],\r\n          invoke: {\r\n            src: dragListener(area),\r\n          },\r\n          on: {\r\n            MOVE: { actions: [\"setEnd\", \"updatePath\"] },\r\n            POINTERLEAVE: \"dragCancel\",\r\n            POINTERUP: [\r\n              { target: \"connect\", cond: isSocket },\r\n              { target: \"dragCancel\" },\r\n            ],\r\n          },\r\n        },\r\n        dragCancel: {\r\n          entry: \"removeWire\",\r\n          on: { \"\": \"idle\" },\r\n        },\r\n        connect: {\r\n          on: { \"\": \"idle\" },\r\n        },\r\n      },\r\n    },\r\n    { actions, activities },\r\n  );\r\n};\r\n\r\nconst actions = {\r\n  startPath: assign({\r\n    wire: ({ div, start, end }) => createPath(div, [...start, ...end]),\r\n  }),\r\n  removeWire: assign({\r\n    wire: ({ wire }) => {\r\n      wire.parentNode.removeChild(wire);\r\n      return {\r\n        wire: null,\r\n      };\r\n    },\r\n  }),\r\n  updatePath: ({ wire, start, end }) => rerenderPath(wire, [...start, ...end]),\r\n  setStart: assign({\r\n    start: (_, { pos }) => pos,\r\n  }),\r\n  setEnd: assign({\r\n    end: (_, { pos }) => pos,\r\n  }),\r\n  logShit,\r\n};\r\n\r\nconst activities = {\r\n  beeping: () => {\r\n    // Start the beeping activity\r\n    const indicator = document.getElementById(\"indicator\");\r\n    const interval = setInterval(() => {\r\n      if (indicator.style.backgroundColor === \"red\") {\r\n        indicator.style.backgroundColor = \"blue\";\r\n      } else {\r\n        indicator.style.backgroundColor = \"red\";\r\n      }\r\n    }, 100);\r\n\r\n    // Return a function that stops the beeping activity\r\n    return () => clearInterval(interval);\r\n  },\r\n};\r\n","import { interpret } from \"xstate\";\r\nimport { dragMachine as _dragMachine } from \"./dragMachine\";\r\n\r\nconst area = document.getElementById(\"area\");\r\narea.style.position = \"relative\";\r\nconst socketList = new Map();\r\n\r\nfor (const s of document.getElementsByClassName(\"socket\")) {\r\n  socketList.set(s, s);\r\n}\r\n\r\nlet dragMachine = _dragMachine(area, socketList);\r\n\r\nconst dragService = interpret(dragMachine).start();\r\n\r\narea.addEventListener(\"pointerdown\", ({ clientX, clientY }) => {\r\n  dragService.send({\r\n    type: \"POINTERDOWN\",\r\n    pos: [clientX, clientY]\r\n  });\r\n});\r\narea.addEventListener(\"pointerleave\", ({ clientX, clientY, target }) => {\r\n  target === area &&\r\n    dragService.send({\r\n      type: \"POINTERLEAVE\",\r\n      pos: [clientX, clientY]\r\n    });\r\n});\r\narea.addEventListener(\"pointerup\", ({ clientX, clientY }) => {\r\n  dragService.send({\r\n    type: \"POINTERUP\",\r\n    pos: [clientX, clientY]\r\n  });\r\n});\r\n\r\nwindow.dragMachine = dragMachine;\r\n","var OVERLAY_ID = '__parcel__error__overlay__';\n\nvar OldModule = module.bundle.Module;\n\nfunction Module(moduleName) {\n  OldModule.call(this, moduleName);\n  this.hot = {\n    data: module.bundle.hotData,\n    _acceptCallbacks: [],\n    _disposeCallbacks: [],\n    accept: function (fn) {\n      this._acceptCallbacks.push(fn || function () {});\n    },\n    dispose: function (fn) {\n      this._disposeCallbacks.push(fn);\n    }\n  };\n\n  module.bundle.hotData = null;\n}\n\nmodule.bundle.Module = Module;\nvar checkedAssets, assetsToAccept;\n\nvar parent = module.bundle.parent;\nif ((!parent || !parent.isParcelRequire) && typeof WebSocket !== 'undefined') {\n  var hostname = process.env.HMR_HOSTNAME || location.hostname;\n  var protocol = location.protocol === 'https:' ? 'wss' : 'ws';\n  var ws = new WebSocket(protocol + '://' + hostname + ':' + process.env.HMR_PORT + '/');\n  ws.onmessage = function(event) {\n    checkedAssets = {};\n    assetsToAccept = [];\n\n    var data = JSON.parse(event.data);\n\n    if (data.type === 'update') {\n      var handled = false;\n      data.assets.forEach(function(asset) {\n        if (!asset.isNew) {\n          var didAccept = hmrAcceptCheck(global.parcelRequire, asset.id);\n          if (didAccept) {\n            handled = true;\n          }\n        }\n      });\n\n      // Enable HMR for CSS by default.\n      handled = handled || data.assets.every(function(asset) {\n        return asset.type === 'css' && asset.generated.js;\n      });\n\n      if (handled) {\n        console.clear();\n\n        data.assets.forEach(function (asset) {\n          hmrApply(global.parcelRequire, asset);\n        });\n\n        assetsToAccept.forEach(function (v) {\n          hmrAcceptRun(v[0], v[1]);\n        });\n      } else if (location.reload) { // `location` global exists in a web worker context but lacks `.reload()` function.\n        location.reload();\n      }\n    }\n\n    if (data.type === 'reload') {\n      ws.close();\n      ws.onclose = function () {\n        location.reload();\n      }\n    }\n\n    if (data.type === 'error-resolved') {\n      console.log('[parcel] ✨ Error resolved');\n\n      removeErrorOverlay();\n    }\n\n    if (data.type === 'error') {\n      console.error('[parcel] 🚨  ' + data.error.message + '\\n' + data.error.stack);\n\n      removeErrorOverlay();\n\n      var overlay = createErrorOverlay(data);\n      document.body.appendChild(overlay);\n    }\n  };\n}\n\nfunction removeErrorOverlay() {\n  var overlay = document.getElementById(OVERLAY_ID);\n  if (overlay) {\n    overlay.remove();\n  }\n}\n\nfunction createErrorOverlay(data) {\n  var overlay = document.createElement('div');\n  overlay.id = OVERLAY_ID;\n\n  // html encode message and stack trace\n  var message = document.createElement('div');\n  var stackTrace = document.createElement('pre');\n  message.innerText = data.error.message;\n  stackTrace.innerText = data.error.stack;\n\n  overlay.innerHTML = (\n    '<div style=\"background: black; font-size: 16px; color: white; position: fixed; height: 100%; width: 100%; top: 0px; left: 0px; padding: 30px; opacity: 0.85; font-family: Menlo, Consolas, monospace; z-index: 9999;\">' +\n      '<span style=\"background: red; padding: 2px 4px; border-radius: 2px;\">ERROR</span>' +\n      '<span style=\"top: 2px; margin-left: 5px; position: relative;\">🚨</span>' +\n      '<div style=\"font-size: 18px; font-weight: bold; margin-top: 20px;\">' + message.innerHTML + '</div>' +\n      '<pre>' + stackTrace.innerHTML + '</pre>' +\n    '</div>'\n  );\n\n  return overlay;\n\n}\n\nfunction getParents(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return [];\n  }\n\n  var parents = [];\n  var k, d, dep;\n\n  for (k in modules) {\n    for (d in modules[k][1]) {\n      dep = modules[k][1][d];\n      if (dep === id || (Array.isArray(dep) && dep[dep.length - 1] === id)) {\n        parents.push(k);\n      }\n    }\n  }\n\n  if (bundle.parent) {\n    parents = parents.concat(getParents(bundle.parent, id));\n  }\n\n  return parents;\n}\n\nfunction hmrApply(bundle, asset) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (modules[asset.id] || !bundle.parent) {\n    var fn = new Function('require', 'module', 'exports', asset.generated.js);\n    asset.isNew = !modules[asset.id];\n    modules[asset.id] = [fn, asset.deps];\n  } else if (bundle.parent) {\n    hmrApply(bundle.parent, asset);\n  }\n}\n\nfunction hmrAcceptCheck(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (!modules[id] && bundle.parent) {\n    return hmrAcceptCheck(bundle.parent, id);\n  }\n\n  if (checkedAssets[id]) {\n    return;\n  }\n  checkedAssets[id] = true;\n\n  var cached = bundle.cache[id];\n\n  assetsToAccept.push([bundle, id]);\n\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    return true;\n  }\n\n  return getParents(global.parcelRequire, id).some(function (id) {\n    return hmrAcceptCheck(global.parcelRequire, id)\n  });\n}\n\nfunction hmrAcceptRun(bundle, id) {\n  var cached = bundle.cache[id];\n  bundle.hotData = {};\n  if (cached) {\n    cached.hot.data = bundle.hotData;\n  }\n\n  if (cached && cached.hot && cached.hot._disposeCallbacks.length) {\n    cached.hot._disposeCallbacks.forEach(function (cb) {\n      cb(bundle.hotData);\n    });\n  }\n\n  delete bundle.cache[id];\n  bundle(id);\n\n  cached = bundle.cache[id];\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    cached.hot._acceptCallbacks.forEach(function (cb) {\n      cb();\n    });\n    return true;\n  }\n}\n"]}